WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/linkbrowser-editor-adapter.js' */
AJS.$(function(){$("body").hasClass("with-space-sidebar")&&(Confluence=Confluence||{},Confluence.Editor=Confluence.Editor||{},AJS.Rte=AJS.Rte||{},AJS.Rte.BookmarkManager=AJS.Rte.BookmarkManager||{},AJS.Rte.BookmarkManager.storeBookmark=AJS.$.noop,AJS.Rte.BookmarkManager.restoreBookmark=AJS.$.noop)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-ia.js' */
(function(J){Confluence.Sidebar={};AJS.toInit(function(b){function r(){AJS.trigger("sidebar.hide-overlays")}function n(a,d){b(document).tooltip(b.extend({gravity:"w",title:function(){return b(this).attr("data-tooltip")||""}},d?d:{},{live:a}))}function z(a,d){b(a).attr("data-collapsed-tooltip",d);n(a,{title:function(){return b(this).attr("data-collapsed-tooltip")||""},aria:!1})}function A(){function a(){b(".collapsed .ia-secondary-container.tipsy-enabled").tooltip("disable");b(".collapsed .quick-links-section-button.tipsy-enabled, .collapsed .acs-nav-item \x3e a.tipsy-enabled, .collapsed #space-tools-menu-trigger.tipsy-enabled").tooltip("disable");
b(".configure-mode .acs-side-bar-space-info.tipsy-enabled").tooltip("disable")}b(".acs-side-bar .quick-links-section-button").attr("data-collapsed-tooltip","Space shortcuts");b("#space-tools-menu-trigger").attr("data-collapsed-tooltip","Space tools");const d=w.attr("data-tree-type");"pages"===d?z("#child-pages-button","Child pages"):"page-tree"===d&&z("#page-tree-button","Page tree");n(".expand-collapse-trigger",
{aria:!1});n(".ia-splitter-handle.tipsy-enabled");n(".collapsed .quick-links-section-button.tipsy-enabled, .collapsed .acs-nav-item \x3e a.tipsy-enabled, .collapsed #space-tools-menu-trigger.tipsy-enabled",{title:function(){return b(this).attr("data-collapsed-tooltip")||""},aria:!1});n(".configure-mode .acs-side-bar-space-info.tipsy-enabled",{title:function(){return b(this).attr("data-configure-tooltip")||""}});f.on("mousedown click scroll",r);b(window).on("scroll resize",r);AJS.bind("sidebar.hide-overlays",
a);AJS.bind("sidebar.disable-tooltip",a);AJS.bind("sidebar.enable-all-tooltips",function(){b(".collapsed .ia-secondary-container.tipsy-enabled").tooltip("enable");b(".collapsed .quick-links-section-button.tipsy-enabled, .collapsed .acs-nav-item \x3e a.tipsy-enabled, .collapsed #space-tools-menu-trigger.tipsy-enabled").tooltip("enable");b(".configure-mode .acs-side-bar-space-info.tipsy-enabled").tooltip("enable")})}function D(a){"blogs"===a?E(f,F):"pages"===a&&Confluence.Sidebar.Pages.installHandlers(f)}
function F(a,d){var c=a.attr("data-group-type");a=a.attr("data-group-value");b.get(G+"/rest/ia/1.0/pagetree/blog/subtree",{spaceKey:H,groupType:c,groupValue:a}).done(d)}function E(a,d){a.delegate(".acs-tree-item \x3e .icon, .acs-tree-item \x3e .node-title","click",function(){var c=b(this).parent(),p=c.find("\x3e .icon");if(c.hasClass("opened"))c.children("ul").hide(),c.removeClass("opened").addClass("closed"),c.attr("aria-expanded",!1),p.removeClass("aui-iconfont-expanded").addClass("aui-iconfont-collapsed");
else if(c.hasClass("closed")){var g=c.children("ul");if(g.length)g.show();else{var l=b(Confluence.Templates.Sidebar.treeThrobber());c.append(l);d(c,function(x){x=b(Confluence.Templates.Sidebar.pagetreeList({pagetree:x,isSubtree:!0}));l.remove();x.appendTo(c)})}c.removeClass("closed").addClass("opened");c.attr("aria-expanded",!0);p.removeClass("aui-iconfont-collapsed").addClass("aui-iconfont-expanded")}})}function m(){var a=y.offset().top,d=h.scrollTop(),c=h.scrollLeft();0>d||d>u.height()-h.height()||
0>c||c>u.width()-h.width()||("fixed"!==b("#header").css("position")?e.css({top:Math.max(a-d,0)+"px",left:Math.min(-1*c,0)+"px"}):e.css({left:Math.min(-1*c,0)+"px"}))}function k(a){a=Math.max(a,55);a=Math.min(a,640);B.setItemQuietly("width",a);150>=a?(e.addClass("collapsed"),b(".expand-collapse-trigger").removeClass("aui-iconfont-chevron-double-left").addClass("aui-iconfont-chevron-double-right").attr("aria-expanded",!1),v.attr("data-tooltip",Confluence.Sidebar.expandTooltip),AJS.trigger("sidebar.collapsed")):
e.hasClass("collapsed")&&(e.removeClass("collapsed"),v.attr("data-tooltip",Confluence.Sidebar.collapseTooltip),b(".expand-collapse-trigger").removeClass("aui-iconfont-chevron-double-right").addClass("aui-iconfont-chevron-double-left").attr("aria-expanded",!0),AJS.trigger("sidebar.expanded"));e.width(a);C.eq(1).css("margin-left",a+"px");I.css("margin-left",e.outerWidth()+"px")}var h=b(window),u=b(document),q=Math.min(285,h.width()/3),B=AJS.storageManager("confluence","sidebar"),G=AJS.contextPath(),
H=AJS.Meta.get("space-key"),t=AJS.Meta.get("use-keyboard-shortcuts")?" "+"(\u2009[\u2009)":"";Confluence.Sidebar.collapseTooltip="Collapse sidebar"+t;Confluence.Sidebar.expandTooltip="Expand sidebar"+t;Confluence.Sidebar.ariaLabel="Sidebar";var C=b(".ia-splitter").children(),y=b(".ia-splitter-left");if(!(1>y.length)){var f=b(".acs-side-bar"),e=y.find(".ia-fixed-sidebar"),
v=b("\x3cdiv\x3e",{"class":"ia-splitter-handle tipsy-enabled",role:"tooltip","data-tooltip":Confluence.Sidebar.collapseTooltip}).appendTo(e);b("\x3cdiv\x3e",{"class":"ia-splitter-handle-highlight confluence-icon-grab-handle"}).appendTo(v);var w=b(".ia-secondary-container"),I=b("#footer, #studio-footer");Confluence.Sidebar.throbberDiv=function(){var a=b(Confluence.Templates.Sidebar.throbber()),d=a.find(".spinner"),c=Raphael.spinner(d[0],10,"#666");a.find(".throbber").bind("remove",function(){c()});
return a};w.length&&D(w.attr("data-tree-type"));h.scroll(m);h.resize(m);h.on("touchend",m);u.ready(m);AJS.bind("confluence.header-resized",m);b("#header-precursor img").on("load",m);Confluence.Sidebar.applyTooltip=n;A();AJS.bind("sidebar.exit-configure-mode",A);(function(){b(".quick-links-section-button.tipsy-enabled, .acs-nav-item \x3e a.tipsy-enabled, #space-tools-menu-trigger.tipsy-enabled").each(function(){return b(this).attr("aria-label",b(this).text())})})();t=B.getItem("width")||q;k(150<t?
t:55);(function(){u.on("mousewheel",".ia-scrollable-section",function(a,d){var c=b(this).scrollTop(),p=b(this).get(0).scrollHeight-b(this).innerHeight()-1;(0<d&&0>=c||0>d&&c>=p)&&a.preventDefault();a.stopPropagation()})})();e.css("visibility","visible");m();(function(){function a(){if(!Confluence.Sidebar.Configure.mode){var g=e.width();55<g?150>=g?(q=285,k(q)):(q=g,k(55)):k(q)}}var d=b("body"),c=!1,p=function(g){g.preventDefault();C.one("selectstart",function(l){l.preventDefault()});c=!1;d.on("mousemove.ia-splitter",
function(l){Confluence.Sidebar.Configure.mode&&285>l.pageX||(k(l.pageX),c=!0)});d.one("mouseup mouseleave",function(){150>=e.width()?k(55):q=e.width();d.off("mousemove.ia-splitter")})};v.on("mousedown.ia-splitter",function(g){p(g);r()}).click(function(){c?c=!1:a()});Confluence.Sidebar.toggle=a})();setTimeout(function(){Confluence.Sidebar.createFlyouts(f)},0);AJS.trigger("sidebar.finished-loading");h.one("pagetree-children-loaded",function(){var a=b(".plugin_pagetree_current");a.length&&(a=a.offset(),
a.top>f.height()/2&&f.scrollTop(a.top-f.height()/3),a.left>f.width()/2&&f.scrollLeft(a.left-f.width()/2))});AJS.bind("sidebar.enter-configure-mode",function(){r();285>e.width()&&(Confluence.Sidebar.widthBeforeConfiguring=e.width(),k(285));e.addClass("configure-mode")});AJS.bind("sidebar.exit-configure-mode",function(){r();Confluence.Sidebar.widthBeforeConfiguring&&(k(Confluence.Sidebar.widthBeforeConfiguring),Confluence.Sidebar.widthBeforeConfiguring=void 0);e.removeClass("configure-mode")})}})})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/configurable-nav.js' */
(function(f){AJS.Confluence.ConfigurableNav=AJS.RestfulTable.extend({initialize:function(b){var a=this;a.options=f.extend(!0,this._getDefaultOptions(b),b,{columns:[{id:"title"}]});a._events=a._events||AJS.RestfulTable.Events;a._event=a._event||AJS.RestfulTable.Events;a.classNames=AJS.RestfulTable.ClassNames;a.dataKeys=AJS.RestfulTable.DataKeys;a.$table=b.$el.addClass(this.classNames.RESTFUL_TABLE).addClass(this.classNames.ALLOW_HOVER).addClass("aui").addClass(a.classNames.LOADING);a.$table.prepend('\x3ccolgroup\x3e\x3ccol span\x3d"1" class\x3d"aui-restfultable-order"\x3e\x3ccol span\x3d"1"\x3e\x3ccol span\x3d"1" class\x3d"aui-restfultable-operations"\x3e\x3c/colgroup\x3e');
a.$tbody=f("\x3ctbody/\x3e");a._models=this._createCollection();a._rowClass=AJS.Confluence.ConfigurableNav.Row;a.editRows=[];a.enableReordering();a._models.bind("remove",function(c){f.each(a.getRows(),function(e,g){g.model===c&&(g.hasFocus()&&a._createRow&&a._createRow.trigger(a._event.FOCUS),a.removeRow(g))})});this.fetchInitialResources();Confluence.Sidebar.applyTooltip(".aui-iconfont-add-circle, .aui-iconfont-cross-circle, .aui-iconfont-plan-disabled")},enableReordering:function(){var b=this;this.$tbody.sortable({handle:"."+
this.classNames.DRAG_HANDLE,helper:function(a,c){a=c.clone(!0).addClass(b.classNames.MOVEABLE);a.children().each(function(e){f(this).width(c.children().eq(e).width())});return a},start:function(a,c){var e=c.placeholder.find("td");c.item.addClass(b.classNames.MOVEABLE).children().each(function(g){f(this).width(e.eq(g).width())});c.placeholder.html('\x3ctd colspan\x3d"'+b.getColumnCount()+'"\x3e\x26nbsp;\x3c/td\x3e').css("visibility","visible");b.getRowFromElement(c.item[0]).trigger(b._event.MODAL)},
stop:function(a,c){jQuery(c.item[0]).is(":visible")&&(c.item.removeClass(b.classNames.MOVEABLE).children().attr("style",""),c.placeholder.removeClass(b.classNames.ROW),b.getRowFromElement(c.item[0]).trigger(b._event.MODELESS))},update:function(a,c){a={};var e=b.getRowFromElement(c.item[0]);if(e){c=b.options.reverseOrder?c.item.next():c.item.prev();c.length?(c=b.getRowFromElement(c).model,a.after=c.url()):a.position="First";a.spaceKey=AJS.Meta.get("space-key");f.ajax({url:e.model.url()+"/move",type:"POST",
dataType:"json",contentType:"application/json",data:JSON.stringify(a),complete:function(){e.hideLoading()},success:function(d){g(AJS.RestfulTable.Events.REORDER_SUCCESS,b,[d])},error:function(d){var h=d.responseText||d.data?JSON.parse(d.responseText||d.data):null;g(AJS.RestfulTable.Events.SERVER_ERROR,b,[h,d])}});function g(d,h,k){f(h).trigger(d,k);f(h).trigger(d,k);h.id&&f(h).trigger(h.id+"-"+d,k)}e.showLoading()}},axis:"y",delay:0,containment:"document",cursor:"move",scroll:!0,zIndex:8E3});this.$tbody.bind("selectstart mousedown",
function(a){return!f(a.target).is("."+b.classNames.DRAG_HANDLE)})}});AJS.Confluence.ConfigurableNav.ReadView=AJS.RestfulTable.CustomReadView.extend({render:function(b){var a="pinned_attachment"==b.styleClass?"aui-icon aui-icon-small aui-iconfont-attachment":b.styleClass.includes("aui-iconfont")?`aui-icon ${b.styleClass}`:"icon";return _.template('\x3cspan class\x3d"acs-nav-item-link" title\x3d"\x3c%\x3dtitle%\x3e"\x3e\x3cspan class\x3d"'+a+'"\x3e\x3c/span\x3e\x3cspan class\x3d"acs-nav-item-label"\x3e\x3c%\x3dtitle%\x3e\x3c/span\x3e\x3c/span\x3e')({title:AJS.escapeHtml(b.title)})}});
AJS.Confluence.ConfigurableNav.Row=AJS.RestfulTable.Row.extend({render:function(){var b=this,a=this.model.toJSON(),c=f("\x3ctd class\x3d'aui-restfultable-operations' /\x3e").append(this.renderOperations(a.canHide,a.hidden)),e=f('\x3ctd class\x3d"'+this.classNames.ORDER+'"/\x3e').append('\x3cspan class\x3d"aui-restfultable-draghandle aui-icon aui-icon-small aui-iconfont-menu" role\x3d"img"\x3e\x3c/span\x3e');b._event=b._event||b._events;b.$el.attr("data-id",this.model.id);b.$el.append(e);f.each(b.columns,
function(g,d){g=f("\x3ctd /\x3e");var h=a[d.id];h&&b.$el.attr("data-"+d.id,h);d=(new AJS.Confluence.ConfigurableNav.ReadView).render(a);g.append(d);b.$el.append(g)});b.$el.append(c);a.canHide&&a.hidden&&b.$el.addClass("hidden-link");b.$el.addClass(this.classNames.ROW+" "+b.classNames.READ_ONLY+" acs-nav-item "+a.styleClass);b.trigger(this._event.RENDER,this.$el,a);b.$el.trigger(this._event.CONTENT_REFRESHED,[b.$el]);return b},renderOperations:function(b,a){var c=this,e=f('\x3ca href\x3d"#" class\x3d"aui-icon aui-icon-small"/\x3e');
if(b){function g(d){d.hasClass("aui-iconfont-plan-disabled")?d.attr("data-tooltip","Hide link"):d.attr("data-tooltip","Show link")}e.addClass(a?"aui-iconfont-add-circle show-link":"aui-iconfont-plan-disabled hide-link").click(function(d){d.preventDefault();f.ajax({url:c.model.url()+(a?"/show":"/hide"),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({spaceKey:AJS.Meta.get("space-key")})}).done(function(){e.closest(".acs-nav-item").toggleClass("hidden-link");
e.toggleClass("aui-iconfont-plan-disabled").toggleClass("aui-iconfont-add-circle");e.toggleClass("hide-link").toggleClass("show-link");g(e)})});g(e)}else e.addClass("aui-iconfont-cross-circle delete-link tipsy-enabled").click(function(g){g.preventDefault();"hide"!=f(".acs-nav").data("quick-links-state")&&(AJS.trigger("sidebar.disable-tooltip",this),c.destroy())}).attr("data-tooltip","Remove link");return e},destroy:function(){this.model.destroy({data:{spaceKey:AJS.Meta.get("space-key")}})}})})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-pages.js' */
(function(a){const e=AJS.Meta.get("context-path"),f=AJS.Meta.get("atl-token");Confluence.Sidebar.Pages={installHandlers:function(b){b.find(".more-children-link").click(function(c){c.preventDefault();b.find("ul.more-children").show();a(this).hide()})},quickLinksContent:function(){let b=a(".acs-side-bar .quick-links-wrapper").clone();b.find(".sidebar-flyout-button.quick-links-section-button").remove();return(new a.Deferred).resolve(b.html())},childPageCollapsedContent:function(){let b=a(".acs-side-bar .ia-secondary-header"),
c=a(".acs-side-bar .ia-secondary-parent-content").clone(),d=a(".acs-side-bar .ia-secondary-current-content"),g=a(".acs-side-bar .ia-secondary-content");c.find("#child-pages-button").remove();return(new a.Deferred).resolve(a("\x3cdiv\x3e").append(a("\x3cdiv\x3e").addClass("acs-side-bar-flyout-wiki-wrapper").append(b.clone()).append(c.clone()).append(d.clone()).append(g.clone())).html())},pageTreeCollapsedContent:function(){let b=a(".page-tree-flyout-content");return 0==b.length?a.ajax({url:e+"/rest/ia/1.0/space/childPagesContextualNav",
data:{pageId:AJS.Meta.get("page-id")}}).then(function(c){c=a("\x3cdiv\x3e").addClass("acs-side-bar-flyout-wiki-wrapper").append(Confluence.Templates.Sidebar.Pages.renderPageContextualNav({pageContextualNav:c,hasCreatePermission:a(".acs-nav").data("has-create-permission"),atlToken:f}));let d=c.clone();d.find(".sidebar-flyout-button").remove();a("body").append(a("\x3cdiv\x3e").addClass("page-tree-flyout-content hidden").append(d));return c}):(new a.Deferred).resolve(b.html())}}})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-links.js' */
AJS.$(function(){function v(b){var e=a(".space-information-container .favourite-space-icon");e.addClass("disabled");if("add"===b){var f="PUT";var l="confluence.space-sidebar.favourite.click"}else f="DELETE",l="confluence.space-sidebar.favourite-remove.click";a.ajax({url:h+"/rest/experimental/relation/user/current/favourite/toSpace/"+m,type:f,dataType:"json",contentType:"application/json",data:JSON.stringify({spaceKey:m})}).done(function(){var d=a("#space-favourite-add"),c=a("#space-favourite-remove");
"add"===b?(d.prop("data-favourited","true"),d.attr("aria-pressed","true"),c.attr("aria-pressed","false"),c.show(),d.hide()):(d.prop("data-favourited","false"),d.attr("aria-pressed","false"),c.attr("aria-pressed","true"),d.show(),c.hide())}).fail(function(d){var c=require("confluence/message-controller");c.showError(c.parseError(d),c.Location.FLAG)}).always(function(){e.removeClass("disabled")});AJS.trigger("analyticsEvent",{name:l})}function x(){AJS.trigger("sidebar-before-enter-configure-mode");
var b=a(".custom-sidebar-content"),e=b.length;if(e){var f=h+"/spaces/custompagecontent.action?key\x3d"+m;var l=b.children().html()}q=g.data("nav-type");Confluence.Sidebar.Configure.mode=!0;w=a(".acs-nav-sections .acs-nav-item.current-item").data("collector-key");k=Confluence.Sidebar.throbberDiv();b=a(".acs-nav-sections");k.height(b.height());r.hide();b.replaceWith(k);e=Confluence.Templates.Sidebar.configure({pageTree:"page-tree"===q,quickLinksState:g.data("quick-links-state"),pageTreeState:g.data("page-tree-state"),
hasSidebarCustomisation:e,customContentAdminLink:f,sidebarCustomisation:l,accessMode:AJS.Meta.get("access-mode")});n=a(e).hide();k.after(n);y();z();Confluence.Sidebar.Configure.MainLinks=new AJS.Confluence.ConfigurableNav({$el:a("#acs-nav-list-main"),resources:{all:h+"/rest/ia/1.0/link/main?spaceKey\x3d"+m+"\x26includeHidden\x3dtrue",self:h+"/rest/ia/1.0/link"}});Confluence.Sidebar.Configure.QuickLinks=new AJS.Confluence.ConfigurableNav({$el:a("#acs-nav-list-quick"),resources:{all:h+"/rest/ia/1.0/link/quick?spaceKey\x3d"+
m,self:h+"/rest/ia/1.0/link"},reverseOrder:!0});var d={};a("#acs-nav-list-main").one(AJS.RestfulTable.Events.INITIALIZED,function(){d.main=!0;d.quick&&(k.replaceWith(n),n.show())});a("#acs-nav-list-quick").one(AJS.RestfulTable.Events.INITIALIZED,function(){d.quick=!0;d.main&&(k.replaceWith(n),n.show())});a(".acs-nav-type").change(function(c){t("nav-type",a(this).val(),function(p){r.data("tree-type",p);g.data("nav-type",p)})});a(".acs-done-link").click(function(c){c.preventDefault();a(".acs-done-link").attr("aria-disabled",
!0).prop("disabled",!0);A()});a(".quick-links-header a").click(function(c){c.preventDefault();c="hide"===g.data("quick-links-state")?"show":"hide";t("quick-links-state",c,B)});a(".page-tree-header a").click(function(c){c.preventDefault();c="hide"===g.data("page-tree-state")?"show":"hide";var p=a(".acs-nav-type");"show"===c?p.prop("disabled",!1):p.prop("disabled",!0);t("page-tree-state",c,C)});AJS.$(".acs-side-bar-space-info").on("click.configurelogo",D);AJS.trigger("sidebar.enter-configure-mode")}
function D(b){var e=AJS.$(".acs-side-bar-space-info \x3e .flyout-handle");e.addClass("loading").spin();WRM.require("wr!com.atlassian.confluence.plugins.confluence-space-ia:avatar-picker",function(){AJS.trigger("deferred.spaceia.open.configure.space")}).always(function(){e.removeClass("loading").spinStop()});b.preventDefault()}function t(b,e,f){a.ajax({url:h+"/rest/ia/1.0/space/option",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({spaceKey:m,option:b,value:e}),success:function(l){f(e)}})}
function A(){if(q!==g.data("nav-type")||!0===u)location.reload(),u=!1;else{var b=a(".custom-sidebar-content"),e=b.length,f;e&&(f=b.children().html());k=Confluence.Sidebar.throbberDiv();k.height(n.height());n.replaceWith(k);Confluence.Sidebar.Configure.MainLinks.remove();Confluence.Sidebar.Configure.MainLinks.unbind();Confluence.Sidebar.Configure.QuickLinks.remove();Confluence.Sidebar.Configure.QuickLinks.unbind();a(document).unbind(AJS.RestfulTable.Events.INITIALIZED);a(document).unbind(AJS.RestfulTable.Events.ROW_ADDED);
a(document).unbind(AJS.RestfulTable.Events.ROW_REMOVED);r.show().css("display","");var l=function(){var c=a(Confluence.Templates.Sidebar.renderLinks({mainLinks:d.main,quickLinks:d.quick.reverse(),advancedLinks:d.advanced,hasConfigurePermission:!0,collectorToHighlight:w,quickLinksState:g.data("quick-links-state"),hasSidebarCustomisation:e,sidebarCustomisation:f}));k.replaceWith(c);Confluence.Sidebar.Configure.mode=!1;AJS.trigger("sidebar.exit-configure-mode")},d={};a.get(h+"/rest/ia/1.0/link/main",
{spaceKey:m,includeHidden:!1}).done(function(c){d.main=c;d.quick&&d.advanced&&l()});a.get(h+"/rest/ia/1.0/link/quick",{spaceKey:m}).done(function(c){d.quick=c;d.main&&d.advanced&&l()});a.get(h+"/rest/ia/1.0/link/advanced",{spaceKey:m}).done(function(c){d.advanced=c;d.main&&d.quick&&l()});Confluence.Sidebar.Configure.Logo&&Confluence.Sidebar.Configure.Logo.unbind()}}function y(){WRM.require("wr!com.atlassian.confluence.plugins.confluence-space-ia:link-dialog",function(){var b=new a.Deferred;a(".acs-add-link").click(function(e){b.done(function(){e.preventDefault();
"hide"!==g.data("quick-links-state")&&(Confluence.Sidebar.LinkAdapter.hijackLinkBrowser(),Confluence.Editor.LinkBrowser.open(),a("#recentlyviewed-panel-id").click())})}).addClass("acs-add-link-ready");AJS.Meta.get("space-key")?AJS.Confluence.EditorLoader.load(function(){b.resolve()},function(){AJS.log("Attempted to load editor for space ia side bar. Loading the editor failed.");b.reject()}):b.resolve()})}function z(){var b=a("#acs-nav-list-quick"),e=a(".acs-nav-sections .tip").hide(),f=function(){Confluence.Sidebar.Configure.QuickLinks.isEmpty()?
(b.hide(),e.show()):(e.hide(),b.show())};a(document).bind(AJS.RestfulTable.Events.INITIALIZED,f);a(document).bind(AJS.RestfulTable.Events.ROW_ADDED,f);a(document).bind(AJS.RestfulTable.Events.ROW_REMOVED,f)}function B(b){g.data("quick-links-state",b);"hide"===b?(a(".acs-nav-list-quick-section").addClass("hidden-section"),a(".quick-links-header a").removeClass("aui-iconfont-plan-disabled").addClass("aui-iconfont-add-circle").attr("aria-disabled",!0)):(a(".acs-nav-list-quick-section").removeClass("hidden-section"),
a(".quick-links-header a").removeClass("aui-iconfont-add-circle").addClass("aui-iconfont-plan-disabled").attr("aria-disabled",!1))}function C(b){g.data("page-tree-state",b);u=!0;"hide"===b?(a(".acs-nav-list-page-tree-section").addClass("hidden-section"),a(".page-tree-header a").removeClass("aui-iconfont-plan-disabled").addClass("aui-iconfont-add-circle").attr("aria-disabled",!0)):(a(".acs-nav-list-page-tree-section").removeClass("hidden-section"),a(".page-tree-header a").removeClass("aui-iconfont-add-circle").addClass("aui-iconfont-plan-disabled").attr("aria-disabled",
!1))}Confluence.Sidebar.Configure={mode:!1};var a=AJS.$,h=AJS.Meta.get("context-path"),m=AJS.Meta.get("space-key"),r=a(".acs-side-bar").find(".ia-secondary-container"),k,n,w,q,g=a(".acs-nav"),u=!1;a.ajaxSetup({cache:!1});a("body").on("click keypress","#acs-configure-link, a.configure-sidebar",function(b){if("click"===b.type||13===b.keyCode||32===b.keyCode)b.preventDefault(),x()});a("#space-favourite-remove").on("click",function(){v("remove")});a("#space-favourite-add").on("click",function(){v("add")})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-space-tools.js' */
define("confluence-space-ia/sidebar-space-tools",["ajs","jquery","confluence/legacy"],function(b,a,c){return function(){var h=[],k=[],e=0===b.version.indexOf("5.7");if(!e){var n=a("#space-tools-menu-trigger");var l=a("#space-tools-menu")}e?a("#space-tools-web-items").children("div").each(function(){h.push({label:a(this).data("label"),href:a(this).data("href")})}):(b.warn("Remove legacy sidebar code when upgrade to AUI 5.8+"),l.on({"aui-dropdown2-show":function(){b.trigger("sidebar.disable-tooltip",
n)},"aui-dropdown2-hide":function(){b.trigger("sidebar.enable-all-tooltips")}}),a("#space-tools-web-items").children("div").each(function(){h.push({text:a(this).data("label"),href:a(this).data("href")})}));e?a("#space-tools-menu-additional-items").children("div").each(function(){k.push({className:a(this).data("class"),label:a(this).data("label"),href:a(this).data("href")})}):a("#space-tools-menu-additional-items").children("div").each(function(){k.push({extraClasses:a(this).data("class"),text:a(this).data("label"),
href:a(this).data("href")})});if(e){var p={hideDelay:null,width:170,displayShadow:!1,calculatePositions:function(f,d){d=d.target.offset();return{popupCss:{top:d.top-f.height(),left:d.left},arrowCss:{display:"none"}}},hideCallback:function(){b.trigger("sidebar.enable-all-tooltips")}};var m=b.InlineDialog(a("#space-tools-menu-trigger"),"space-tools",function(f,d,q){f.html(c.Templates.Sidebar.spaceToolsMenu({spaceToolLinks:h,spaceLinks:k,isAuiFiveSeven:e}));a(d).one("click",function(r){a("#inline-dialog-space-tools").is(":visible")&&
setTimeout(function(){m.hide()},0)});b.trigger("sidebar.disable-tooltip",d);b.trigger("sidebar.spacetools-loaded");q();return!1},p);m.addClass("aui-dropdown2 aui-style-default space-tools-dropdown");b.bind("sidebar.hide-overlays",m.hide)}else l.html(c.Templates.Sidebar.spaceToolsMenu({spaceToolLinks:h,spaceLinks:k})),b&&b.Confluence&&b.Confluence.Analytics&&b.Confluence.Analytics.setAnalyticsSource&&b.Confluence.Analytics.setAnalyticsSource(l.find("a:not(.configure-sidebar)"),"spacetools"),b.bind("sidebar.hide-overlays",
function(){l.filter('[aria-hidden\x3d"false"]').length&&a("#space-tools-menu-trigger").trigger("aui-button-invoke")});var g=a(".expand-collapse-trigger");g.click(function(f){f.preventDefault();c.Sidebar.toggle()});g.attr("data-tooltip",a(".ia-fixed-sidebar").hasClass("collapsed")?c.Sidebar.expandTooltip:c.Sidebar.collapseTooltip);g.attr("aria-label",c.Sidebar.ariaLabel);b.bind("sidebar.collapsed",function(){g.attr("data-tooltip",c.Sidebar.expandTooltip)});b.bind("sidebar.expanded",function(){g.attr("data-tooltip",
c.Sidebar.collapseTooltip)})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-space-tools-require.js' */
require(["confluence-space-ia/sidebar-space-tools"],function(a){AJS.toInit(function(){a()})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-flyouts.js' */
(function(d){function g(a){var b=d(a);b.selector||(b.selector=a);return b}function h(a,b,c,l){var e=require("confluence/inline-dialog");e=e.inlineDialog||e;var k=e(a,c,function(f,m,p){f.addClass("acs-side-bar-flyout ia-scrollable-section");f.empty().append(Confluence.Sidebar.throbberDiv());b().done(function(n){f.html(n)});AJS.trigger("sidebar.flyout-triggered",l);p();d(m).one("click",function(n){d("#inline-dialog-"+c).is(":visible")&&setTimeout(function(){k.hide()},0)});AJS.trigger("sidebar.disable-tooltip",
m);return f},{gravity:"w",calculatePositions:q,useLiveEvents:!0,hideDelay:null,hideCallback:function(){AJS.trigger("sidebar.enable-all-tooltips")}});AJS.bind("sidebar.hide-overlays",k.hide);return k}function q(a,b,c,l){a=b.target.offset();c=b.target.width();b=b.target.height();b={top:a.top+b/2-15,left:a.left+c+5,right:"auto"};a=d(window);b.maxHeight=a.height()+a.scrollTop()-b.top-20;return{popupCss:b,arrowCss:{top:9},gravity:"w"}}Confluence.Sidebar.createFlyouts=function(a){h(g(".collapsed button.quick-links-section-button"),
Confluence.Sidebar.Pages.quickLinksContent,"sidebar-quick-links-flyout",{flyout:"quick-links"});a=a.find(".ia-secondary-container");a.length&&"pages"==a.attr("data-tree-type")&&h(g(".collapsed .ia-secondary-header-title.wiki button"),Confluence.Sidebar.Pages.childPageCollapsedContent,"sidebar-children-flyout",{flyout:"children"});a.length&&"page-tree"==a.attr("data-tree-type")&&h(g(".collapsed .ia-secondary-header-title.page-tree button"),Confluence.Sidebar.Pages.pageTreeCollapsedContent,"sidebar-page-tree-flyout",
{flyout:"pagetree"})}})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/external/jquery.mousewheel.min.js' */
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
(function(a){function d(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=!0,g=0,h=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),h=e,c.axis!==undefined&&c.axis===c.HORIZONTAL_AXIS&&(h=0,g=-1*e),c.wheelDeltaY!==undefined&&(h=c.wheelDeltaY/120),c.wheelDeltaX!==undefined&&(g=-1*c.wheelDeltaX/120),d.unshift(b,e,g,h),(a.event.dispatch||a.event.handle).apply(this,d)}var b=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var c=b.length;c;)a.event.fixHooks[b[--c]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=b.length;a;)this.addEventListener(b[--a],d,!1);else this.onmousewheel=d},teardown:function(){if(this.removeEventListener)for(var a=b.length;a;)this.removeEventListener(b[--a],d,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar', location = 'js/sidebar-logo.js' */
AJS.toInit(function(b){Confluence.Sidebar.Configure.Logo={};var l=b(".acs-side-bar-space-info div.name"),d,h,m=function(e){d||(d=new e({onCrop:function(k,f){b.ajax({type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({spaceKey:AJS.Meta.get("space-key"),spaceName:f,logoDataURI:k}),url:AJS.Meta.get("context-path")+"/rest/ia/1.0/space/setLogo",success:function(a){var c=a.logoDownloadPath;b(".space-logo .avatar-img").attr("src",AJS.Meta.get("context-path")+c);a=a.name;l.attr("title",
a).text(a);d.hide()},error:function(a){d.setMessage("An error occurred while updating space details");d._removeSaveImageLoadingIcon()}})}}));d.show(b(".acs-side-bar-space-info div.name a").text());return!1},n=function(){function e(a,c,g,p){a=c.target.offset();g=c.target.width();c=c.target.height();return{popupCss:{top:a.top+c/2-15,left:a.left+g+5,right:"auto"},arrowCss:{top:9},gravity:"w"}}var k=function(a,c,g){b(a).addClass("acs-side-bar-flyout");b(a).empty();a.html(AJS.template.load("logo-config-content"));
a.unbind("mouseover mouseout");AJS.trigger("sidebar.disable-tooltip",c);g()};if(!h){var f=b(".acs-side-bar-space-info");f.selector||(f.selector=".acs-side-bar-space-info");h=AJS.InlineDialog(f,"space-logo-config",k,{gravity:"w",calculatePositions:e,useLiveEvents:!0,hideCallback:function(){AJS.trigger("sidebar.enable-all-tooltips")},hideDelay:null,noBind:!0,width:635})}h.show()};AJS.bind("sidebar-before-enter-configure-mode",function(){AJS.bind("deferred.spaceia.open.configure.space",function(e){AJS.Meta.get("space-key")==
"~"+AJS.Meta.get("remote-user")?n():require(["confluence-space-ia/avatar-picker/avatar-picker-dialog"],m);e.preventDefault();return!1})});Confluence.Sidebar.Configure.Logo.unbind=function(){b("#inline-dialog-space-logo-config .cancel").click();b(".acs-side-bar-space-info").off("click.configurelogo");AJS.unbind("deferred.spaceia.open.configure.space")}});
}catch(e){WRMCB(e)};