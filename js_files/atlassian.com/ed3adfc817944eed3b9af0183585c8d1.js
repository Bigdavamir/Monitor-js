import{r as ne,j as re}from"./jsx-runtime-DNGZQ4GM.js";import{r as ae}from"./index-C75_h0qM.js";import{c as oe,g as ie}from"./_commonjsHelpers-BosuxZz1.js";import{a as $}from"./index-DRH4qILr.js";const J={dependency:"dependency",dependency_disable:"dependency.disable",dependency_enable:"dependency.enable",dependency_toggle:"dependency.toggle",dependency_based_on_value:"dependency.value",filters_block:"filters.block",filters_counter:"filters.counter",filters_tags:"filters.tags",filters_update:"filters.update",form:"form",form_change:"form.change",form_revert:"form.revert",infinitescroll:"infinitescroll",modal:"modal",modal_open:"modal.open",modal_close:"modal.close",modal_destroy:"modal.destroy",modal_update:"modal.update",notifications_change:"notifications.change",page_addfiledialog:"page.addfiledialog",page_addhtmlpost:"page.addhtmlpost",page_addpost:"page.addpost",page_cancelinsert:"page.cancelinsert",page_componentcreated:"page.componentcreated",page_componentupdated:"page.componentupdated",page_componentselected:"page.componentselected",page_deselectcomponent:"page.deselectcomponent",page_disableadd:"page.disableadd",page_filechange:"page.filechange",page_fileadded:"page.fileadded",page_handleaddhtmlpost:"page.handleaddhtmlpost",page_handleaddfile:"page.handleaddfile",page_handleaddpost:"page.handleaddpost",page_handleaddurl:"page.handleaddurl",page_changesaved:"page.saved",page_changeunsaved:"page.unsaved",page_setpostfocus:"page.setpostfocus",page_selectcomponent:"page.selectcomponent",page_selectsibling:"page.selectsibling",page_removesplitcontent:"page.removesplitcontent",page_urladded:"page.urladded",remove_item:"remove.item",remove_start:"remove.start",remove_success:"remove.success",select_change:"select.change",sortable:"sortable",sortable_choose:"sortable.choose",sortable_error:"sortable.error",sortable_start:"sortable.start",sortable_success:"sortable.success",update_content:"update.content",uploadfile:"uploadfile",uploadfile_added:"uploadfile.added",uploadfile_change:"uploadfile.change",uploadfile_delete:"uploadfile.delete",uploadfile_error:"uploadfile.error",uploadfile_processing:"uploadfile.processing",uploadfile_start:"uploadfile.start",youtube_loaded:"youtube.loaded"};var X={exports:{}};(function(F,I){(function(A,_){F.exports=_(ne)})(oe,function(A){return function(_){function v(s){if(g[s])return g[s].exports;var a=g[s]={i:s,l:!1,exports:{}};return _[s].call(a.exports,a,a.exports,v),a.l=!0,a.exports}var g={};return v.m=_,v.c=g,v.i=function(s){return s},v.d=function(s,a,k){v.o(s,a)||Object.defineProperty(s,a,{configurable:!1,enumerable:!0,get:k})},v.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return v.d(a,"a",a),a},v.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},v.p="/",v(v.s=8)}([function(_,v){_.exports=A},function(_,v,g){_.exports=g(13)()},function(_,v,g){function s(n){return n&&n.__esModule?n:{default:n}}function a(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?n:t}function k(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function m(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(v,"__esModule",{value:!0});var w=function(){function n(t,e){for(var r=0;r<e.length;r++){var f=e[r];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(t,f.key,f)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),y=g(0),l=s(y),C=g(1),h=s(C),U=g(7),p=s(U),o=g(4),E=s(o),i=g(6),d=s(i),u=g(5),c=s(u),x=function(){function n(){m(this,n)}return w(n,[{key:"onPaste",value:function(t){this.onPasteCallback=t}},{key:"pasteTriggered",value:function(t){this.onPasteCallback&&this.onPasteCallback(t)}}]),n}(),T=function(n){function t(e){m(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.pasteHandler=new x,r.state={asHTML:r.props.asHTML,asMarkdown:r.props.asMarkdown,content:r.props.content,contentHistory:{past:[],future:[]},htmlContent:"",toolbarOptions:r.props.toolbarOptions||["preview-as-html","code","link","headers","italic","quote","unordered-list","ordered-list"]},r.toolbarButtons=[{id:"code",icon:"embed2",callback:r.appendCodeBlock.bind(r),tooltip:"Format as code block"},{id:"link",icon:"link",callback:r.handleLinkButton.bind(r),tooltip:"Format as link"},{id:"headers",icon:"headers",tooltip:"Choose header size",dropdownOptions:[{onClick:r.handleHeader.bind(r,"## "),className:"react-md-header-2",text:"Header"},{onClick:r.handleHeader.bind(r,"### "),className:"react-md-header-3",text:"Header"}]},{id:"bold",icon:"bold",callback:r.handleBoldButton.bind(r),tooltip:"Bold text"},{id:"italic",icon:"italic",callback:r.handleItalicButton.bind(r),tooltip:"Italicised text"},{id:"quote",icon:"quotes-left",callback:r.handleQuoteButton.bind(r),tooltip:"Format as quote"},{id:"unordered-list",icon:"list2",callback:r.handleUnorderedList.bind(r),tooltip:"Format as unordered list"},{id:"ordered-list",icon:"list-numbered",callback:r.handleOrderedList.bind(r),tooltip:"Format as ordered list"}],r}return k(t,n),w(t,[{key:"appendCodeBlock",value:function(){this.applyTag("\n```\n","\n```")}},{key:"applyTag",value:function(e){var r=this,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.addTextAreaHistory(this.state.content);var M=b.applyAtLineStart,O=M!==void 0&&M,L=b.applyMultiline,B=L!==void 0&&L,N=b.toggle,ee=N!==void 0&&N,Y=b.selectionEndOffset,Z=Y===void 0?null:Y,Q=b.selectionLength,V=Q===void 0?null:Q,S=this.refs.textArea.selectionStart,R=this.state.content,te=this.refs.textArea.scrollTop,z="",K=!1,P=R.slice(0,S),j=R.substr(S,this.refs.textArea.selectionEnd-S),q=this.refs.textArea.selectionEnd;if(j.match(/\n$/gi)&&(j=j.replace(/\n$/gi,""),q-=1),ee&&R.substr(S-e.length,e.length)==e&&R.substr(q,f.length)==f)P=P.substr(0,P.length-e.length),q+=f.length,z=j,K=!0;else if(O){var H="";if(S>0&&R.substr(S-1,1)!=`
`){var G=P.lastIndexOf(`
`);P=G>-1?R.slice(0,G+1):"",H=R.slice(G+1,S)+j}else H=j;z=B&&H.length>0&&(H.match(/\n/g)||[]).length>=1?H.split(`
`).map(function(D){return e+D+f}).join(`
`):e+H+f}else z=e+j+f;this.setState({content:P+z+R.substr(q)},function(){if(r.refs.textArea.focus(),r.refs.textArea.scrollTop=te,j.length==0)r.refs.textArea.selectionEnd=P.length+e.length;else{var D=P.length+(K?0:e.length),W=P.length+z.length-(K?0:f.length);Z&&V&&(D=W+Z,W=D+V),r.refs.textArea.selectionStart=D,r.refs.textArea.selectionEnd=W}})}},{key:"handleFileUpload",value:function(e,r,f){f.split("/")[0]=="image"?this.applyTag("!["+r+"]("+e+")"):this.applyTag("["+r+"]("+e+")")}},{key:"handleLinkButton",value:function(){this.applyTag("[","](url)",{selectionEndOffset:2,selectionLength:3})}},{key:"handleBoldButton",value:function(){this.applyTag("**","**",{toggle:!0})}},{key:"handleHeader",value:function(e){this.applyTag(e,"",{applyAtLineStart:!0,toggle:!1})}},{key:"handleItalicButton",value:function(){this.applyTag("_","_",{toggle:!0})}},{key:"handleQuoteButton",value:function(){this.applyTag("> ","",{applyAtLineStart:!0,applyMultiline:!0})}},{key:"handleUnorderedList",value:function(){this.applyTag("- ","",{applyAtLineStart:!0,applyMultiline:!0})}},{key:"handleOrderedList",value:function(){this.applyTag("1. ","",{applyAtLineStart:!0,applyMultiline:!0})}},{key:"handleKeyDown",value:function(e){e.which===90&&e.shiftKey&&(e.ctrlKey||e.altKey||e.metaKey)?(e.preventDefault(),this.handleRedo()):e.which===90&&(e.ctrlKey||e.altKey||e.metaKey)?(e.preventDefault(),this.handleUndo()):e.which===66&&(e.ctrlKey||e.metaKey)?(e.preventDefault(),this.handleBoldButton()):e.which===73&&(e.ctrlKey||e.metaKey)?(e.preventDefault(),this.handleItalicButton()):e.which===75&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.handleLinkButton())}},{key:"handlePaste",value:function(e){this.pasteHandler.pasteTriggered(e)}},{key:"handleUndo",value:function(){if(this.state.contentHistory.past.length!==0){var e=this.state.contentHistory,r=e.past,f=e.future;f.unshift(this.state.content);var b={content:r.pop(),contentHistory:{past:r,future:f}};this.setState(b)}}},{key:"handleRedo",value:function(){if(this.state.contentHistory.future.length!==0){var e=this.state.contentHistory,r=e.past,f=e.future;r.push(this.state.content);var b={content:f.shift(),contentHistory:{past:r,future:f}};this.setState(b)}}},{key:"componentDidMount",value:function(){this.refs.textArea.addEventListener("keydown",this.handleKeyDown.bind(this)),this.refs.textArea.addEventListener("paste",this.handlePaste.bind(this))}},{key:"componentWillUnmount",value:function(){this.refs.textArea.removeEventListener("keydown",this.handleKeyDown.bind(this)),this.refs.textArea.removeEventListener("paste",this.handlePaste.bind(this))}},{key:"onTextAreaChange",value:function(e){this.setState({content:e.target.value}),(this.lastRegisteredHistory===void 0||this.lastRegisteredHistory<Date.now()-3e3)&&this.addTextAreaHistory(this.state.content)}},{key:"addTextAreaHistory",value:function(e){this.lastRegisteredHistory=Date.now();var r=this.state.contentHistory.past.slice(Math.max(this.state.contentHistory.past.length-10,0)).concat([e]);this.setState({contentHistory:{past:r,future:[]}})}},{key:"render",value:function(){var e=this,r=this.state,f=r.asHTML,b=r.asMarkdown,M=r.content;return l.default.createElement("div",{className:"react-md-container"},l.default.createElement(d.default,null),l.default.createElement(p.default,{isPreview:!b,showMarkdown:function(O){return e.setState({asMarkdown:O})},handleCheck:function(){return e.setState({asHTML:!e.state.asHTML})},toolbarButtons:this.toolbarButtons,toolbarOptions:this.state.toolbarOptions,asHTML:f}),b&&l.default.createElement(c.default,{markdown:this.state.content,previewClass:this.props.previewClass,converter:this.props.converter,asHTML:f}),l.default.createElement(E.default,{pasteHandler:this.pasteHandler,hidden:b,markdownGuideUrl:this.props.markdownGuideUrl,showUploadMessage:this.props.showUploadMessage,showUploadedFiles:this.props.showUploadedFiles,onFileUpload:function(O,L){return e.props.onFileUpload(O,L)},onFileRemoved:function(O){return e.props.onFileRemoved(O)},onUploadComplete:function(O,L,B){return e.handleFileUpload(O,L,B)}},l.default.createElement("textarea",{hidden:b,ref:"textArea",className:"react-md-textarea",onChange:function(O){return e.onTextAreaChange(O)},value:M})),l.default.createElement("textarea",{readOnly:!0,id:this.props.elementId,name:this.props.elementName,hidden:!0,value:M}))}}]),t}(y.Component);v.default=T,T.defaultProps={content:"",elementId:"",elementName:"",asMarkdown:!1,asHTML:!1,previewClass:"",showUploadMessage:!0,showUploadedFiles:!0,markdownGuideUrl:"https://daringfireball.net/projects/markdown/syntax"},T.propTypes={content:h.default.string,previewClass:h.default.string,markdownGuideUrl:h.default.string,showUploadMessage:h.default.bool,asMarkdown:h.default.bool,showUploadedFiles:h.default.bool,elementId:h.default.string,elementName:h.default.string,toolbarOptions:h.default.arrayOf(h.default.string),onFileRemoved:h.default.func,onFileUpload:h.default.func.isRequired,converter:h.default.func.isRequired}},function(_,v,g){var s=g(9);typeof s=="string"&&(s=[[_.i,s,""]]);var a={};a.transform=void 0,g(15)(s,a),s.locals&&(_.exports=s.locals)},function(_,v,g){function s(i){if(Array.isArray(i)){for(var d=0,u=Array(i.length);d<i.length;d++)u[d]=i[d];return u}return Array.from(i)}function a(i,d){if(!(i instanceof d))throw new TypeError("Cannot call a class as a function")}function k(i,d){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||typeof d!="object"&&typeof d!="function"?i:d}function m(i,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);i.prototype=Object.create(d&&d.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(i,d):i.__proto__=d)}Object.defineProperty(v,"__esModule",{value:!0});var w=function(){function i(d,u){for(var c=0;c<u.length;c++){var x=u[c];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(d,x.key,x)}}return function(d,u,c){return u&&i(d.prototype,u),c&&i(d,c),d}}(),y=g(0),l=function(i){return i&&i.__esModule?i:{default:i}}(y),C=function(i){i.target.classList.remove("react-md-textarea-drag")},h=function(i){i.stopPropagation(),i.preventDefault()},U=function(i){h(i),i.target.classList.add("react-md-textarea-drag")},p=function(i){h(i),C(i)},o=function(i){h(i)},E=function(i){function d(u){a(this,d);var c=k(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,u));return c.state={uploadedFiles:[],uploadingFiles:[]},c.addFile=c.addFile.bind(c),c.removeFile=c.removeFile.bind(c),c.fileId=0,c}return m(d,i),w(d,[{key:"componentDidMount",value:function(){var u=this;this.props.pasteHandler.onPaste(function(c){var x=c.clipboardData||window.clipboardData;x&&x.files.length>0&&u.uploadFileList(x.files)})}},{key:"addFile",value:function(u){this.state.uploadedFiles.find(function(c){return c===u})||this.setState({uploadedFiles:[].concat(s(this.state.uploadedFiles),[u])})}},{key:"removeFile",value:function(u){var c=this;this.props.onFileRemoved(u).then(function(x){if(x.status===200){var T=c.state.uploadedFiles.findIndex(function(n){return u===n});c.setState({uploadedFiles:[].concat(s(c.state.uploadedFiles.slice(0,T)),s(c.state.uploadedFiles.slice(T+1)))})}}).catch(function(x){return c.setError(x)})}},{key:"handleDrop",value:function(u,c){h(u);var x=u.dataTransfer.files;C(u),this.uploadFileList(x)}},{key:"uploadFileList",value:function(u){var c=this;this.fileId++;var x=this.fileId;this.uploadProgressUpdate(x,0,u[0].name),this.props.onFileUpload(u,this.uploadProgressUpdate.bind(this,x)).then(function(T){if(c.markUploadAsStopped(x),T.data){var n=T.data.replace(/"/g,"");c.addFile(n),c.props.onUploadComplete(n,u[0].name,u[0].type)}else{var t=T.replace(/"/g,"");c.addFile(t),c.props.onUploadComplete(t,u[0].name,u[0].type)}}).catch(function(T){c.markUploadAsStopped(x),c.setError(T)})}},{key:"markUploadAsStopped",value:function(u){var c=this.state.uploadingFiles;this.setState({uploadingFiles:c.filter(function(x){return x.id!=u})})}},{key:"uploadProgressUpdate",value:function(u,c){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,T=this.state.uploadingFiles,n=T.find(function(t){return t.id==u});n?n.progress=c:T.push({id:u,name:x,progress:c}),this.setState({uploadingFiles:T})}},{key:"setError",value:function(u){var c=this;this.setState({error:u.toString().replace(/error: /i,"")}),setTimeout(function(){return c.setState({error:null})},15e3)}},{key:"onFileUploadedFromDialog",value:function(u){this.uploadFileList(u.target.files)}},{key:"showFileUploadDialog",value:function(){this.refs.fileInput.click()}},{key:"render",value:function(){var u,c,x=this,T=this.props,n=T.hidden,t=T.children,e=T.showUploadedFiles,r=T.onFileRemoved,f=T.markdownGuideUrl,b=T.showUploadMessage;return u=e?this.state.uploadedFiles.map(function(M,O){return l.default.createElement("li",{key:O},M," ",r&&l.default.createElement("span",{className:"react-md-remove-btn",onClick:function(){return x.removeFile(M)}},"remove"))}):[],c=this.state.uploadingFiles.map(function(M,O){return l.default.createElement("li",{key:O},"Uploading ",M.name,l.default.createElement("span",{className:"react-md-progress"},l.default.createElement("span",{className:"react-md-progress-value",style:{width:M.progress+"%"}})),M.progress,"%")}),l.default.createElement("div",{className:"react-md-dropzone-wrap"},l.default.createElement("input",{type:"file",ref:"fileInput",onChange:this.onFileUploadedFromDialog.bind(this),style:{display:"none"}}),l.default.createElement("div",{onDragEnter:U,onDragLeave:p,onDragOver:o,onDrop:function(M){return x.handleDrop(M)}},t),l.default.createElement("div",{className:"react-md-dropzone-info",style:{display:n?"none":"inherit"}},l.default.createElement("div",{className:"react-md-info-text"},b&&l.default.createElement("span",{className:"react-md-file-guide"},"Add files by dragging and dropping onto the editor, ",l.default.createElement("a",{href:"#",onClick:this.showFileUploadDialog.bind(this)},"selecting a file")," or pasting from the clipboard."),l.default.createElement("a",{className:"react-md-markdown-guide",href:f,target:"_blank"},"markdown guide")),c&&c.length>0&&l.default.createElement("ul",null,c),e&&e.length>0&&l.default.createElement("ul",null,u),this.state.error&&l.default.createElement("div",{className:"react-md-error"},"Error: ",this.state.error)))}}]),d}(y.Component);v.default=E},function(_,v,g){function s(p){return p&&p.__esModule?p:{default:p}}function a(p,o){if(!(p instanceof o))throw new TypeError("Cannot call a class as a function")}function k(p,o){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||typeof o!="object"&&typeof o!="function"?p:o}function m(p,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);p.prototype=Object.create(o&&o.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(p,o):p.__proto__=o)}Object.defineProperty(v,"__esModule",{value:!0});var w=function(){function p(o,E){for(var i=0;i<E.length;i++){var d=E[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(o,d.key,d)}}return function(o,E,i){return E&&p(o.prototype,E),i&&p(o,i),o}}(),y=g(0),l=s(y),C=g(1),h=s(C),U=function(p){function o(E){a(this,o);var i=k(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,E));return i.state={html:"",loaded:!1},i}return m(o,p),w(o,[{key:"componentDidMount",value:function(){var E=this;this.props.converter(this.props.markdown).then(function(i){return E.setState({html:i,loaded:!0})}).catch(function(i){return E.setState({html:"Error: "+i.toString()})})}},{key:"render",value:function(){return this.state.loaded===!1?l.default.createElement("div",{className:"react-md-preview-area "+this.props.previewClass},l.default.createElement("div",{className:"react-md-loader"},"Loading preview...")):this.props.asHTML?l.default.createElement("div",{className:"react-md-preview-area "+this.props.previewClass},this.state.html):l.default.createElement("div",{className:"react-md-preview-area "+this.props.previewClass,dangerouslySetInnerHTML:{__html:this.state.html}})}}]),o}(y.Component);v.default=U,U.defaultProps={markdown:"",asHTML:!1,previewClass:""},U.propTypes={markdown:h.default.string.isRequired,converter:h.default.func.isRequired,asHTML:h.default.bool.isRequired}},function(_,v,g){Object.defineProperty(v,"__esModule",{value:!0});var s=g(0),a=function(m){return m&&m.__esModule?m:{default:m}}(s),k=function(){return a.default.createElement("svg",{style:{position:"absolute",width:0,height:0,overflow:"hidden"},version:"1.1",xmlns:"http://www.w3.org/2000/svg"},a.default.createElement("defs",null,a.default.createElement("symbol",{id:"react-md-icon-quotes-left",viewBox:"0 0 32 32"},a.default.createElement("title",null,"quotes-left"),a.default.createElement("path",{d:"M7.031 14c3.866 0 7 3.134 7 7s-3.134 7-7 7-7-3.134-7-7l-0.031-1c0-7.732 6.268-14 14-14v4c-2.671 0-5.182 1.040-7.071 2.929-0.364 0.364-0.695 0.751-0.995 1.157 0.357-0.056 0.724-0.086 1.097-0.086zM25.031 14c3.866 0 7 3.134 7 7s-3.134 7-7 7-7-3.134-7-7l-0.031-1c0-7.732 6.268-14 14-14v4c-2.671 0-5.182 1.040-7.071 2.929-0.364 0.364-0.695 0.751-0.995 1.157 0.358-0.056 0.724-0.086 1.097-0.086z"})),a.default.createElement("symbol",{id:"react-md-icon-list-numbered",viewBox:"0 0 32 32"},a.default.createElement("title",null,"list-numbered"),a.default.createElement("path",{d:"M12 26h20v4h-20zM12 14h20v4h-20zM12 2h20v4h-20zM6 0v8h-2v-6h-2v-2zM4 16.438v1.563h4v2h-6v-4.563l4-1.875v-1.563h-4v-2h6v4.563zM8 22v10h-6v-2h4v-2h-4v-2h4v-2h-4v-2z"})),a.default.createElement("symbol",{id:"react-md-icon-list2",viewBox:"0 0 32 32"},a.default.createElement("title",null,"list2"),a.default.createElement("path",{d:"M12 2h20v4h-20v-4zM12 14h20v4h-20v-4zM12 26h20v4h-20v-4zM0 4c0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.209-1.791 4-4 4s-4-1.791-4-4zM0 16c0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.209-1.791 4-4 4s-4-1.791-4-4zM0 28c0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.209-1.791 4-4 4s-4-1.791-4-4z"})),a.default.createElement("symbol",{id:"react-md-icon-link",viewBox:"0 0 32 32"},a.default.createElement("title",null,"link"),a.default.createElement("path",{d:"M13.757 19.868c-0.416 0-0.832-0.159-1.149-0.476-2.973-2.973-2.973-7.81 0-10.783l6-6c1.44-1.44 3.355-2.233 5.392-2.233s3.951 0.793 5.392 2.233c2.973 2.973 2.973 7.81 0 10.783l-2.743 2.743c-0.635 0.635-1.663 0.635-2.298 0s-0.635-1.663 0-2.298l2.743-2.743c1.706-1.706 1.706-4.481 0-6.187-0.826-0.826-1.925-1.281-3.094-1.281s-2.267 0.455-3.094 1.281l-6 6c-1.706 1.706-1.706 4.481 0 6.187 0.635 0.635 0.635 1.663 0 2.298-0.317 0.317-0.733 0.476-1.149 0.476z"}),a.default.createElement("path",{d:"M8 31.625c-2.037 0-3.952-0.793-5.392-2.233-2.973-2.973-2.973-7.81 0-10.783l2.743-2.743c0.635-0.635 1.664-0.635 2.298 0s0.635 1.663 0 2.298l-2.743 2.743c-1.706 1.706-1.706 4.481 0 6.187 0.826 0.826 1.925 1.281 3.094 1.281s2.267-0.455 3.094-1.281l6-6c1.706-1.706 1.706-4.481 0-6.187-0.635-0.635-0.635-1.663 0-2.298s1.663-0.635 2.298 0c2.973 2.973 2.973 7.81 0 10.783l-6 6c-1.44 1.44-3.355 2.233-5.392 2.233z"})),a.default.createElement("symbol",{id:"react-md-icon-bold",viewBox:"0 0 32 32"},a.default.createElement("title",null,"bold"),a.default.createElement("path",{d:"M22.121 15.145c1.172-1.392 1.879-3.188 1.879-5.145 0-4.411-3.589-8-8-8h-10v28h12c4.411 0 8-3.589 8-8 0-2.905-1.556-5.453-3.879-6.855zM12 6h3.172c1.749 0 3.172 1.794 3.172 4s-1.423 4-3.172 4h-3.172v-8zM16.969 26h-4.969v-8h4.969c1.827 0 3.313 1.794 3.313 4s-1.486 4-3.313 4z"})),a.default.createElement("symbol",{id:"react-md-icon-italic",viewBox:"0 0 32 32"},a.default.createElement("title",null,"italic"),a.default.createElement("path",{d:"M28 2v2h-4l-10 24h4v2h-14v-2h4l10-24h-4v-2z"})),a.default.createElement("symbol",{id:"react-md-icon-embed2",viewBox:"0 0 40 32"},a.default.createElement("title",null,"embed2"),a.default.createElement("path",{d:"M26 23l3 3 10-10-10-10-3 3 7 7z"}),a.default.createElement("path",{d:"M14 9l-3-3-10 10 10 10 3-3-7-7z"}),a.default.createElement("path",{d:"M21.916 4.704l2.171 0.592-6 22.001-2.171-0.592 6-22.001z"})),a.default.createElement("symbol",{id:"react-md-icon-headers",viewBox:"0 0 18 16"},a.default.createElement("path",{fillRule:"evenodd",d:"M13.62 9.08L12.1 3.66h-.06l-1.5 5.42h3.08zM5.7 10.13S4.68 6.52 4.53 6.02h-.08l-1.13 4.11H5.7zM17.31 14h-2.25l-.95-3.25h-4.07L9.09 14H6.84l-.69-2.33H2.87L2.17 14H0l3.3-9.59h2.5l2.17 6.34L10.86 2h2.52l3.94 12h-.01z"}))))};v.default=k},function(_,v,g){function s(p){return p&&p.__esModule?p:{default:p}}function a(p,o){if(!(p instanceof o))throw new TypeError("Cannot call a class as a function")}function k(p,o){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||typeof o!="object"&&typeof o!="function"?p:o}function m(p,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);p.prototype=Object.create(o&&o.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(p,o):p.__proto__=o)}Object.defineProperty(v,"__esModule",{value:!0});var w=function(){function p(o,E){for(var i=0;i<E.length;i++){var d=E[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(o,d.key,d)}}return function(o,E,i){return E&&p(o.prototype,E),i&&p(o,i),o}}(),y=g(0),l=s(y),C=g(1),h=s(C),U=function(p){function o(){return a(this,o),k(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return m(o,p),w(o,[{key:"handleDropdown",value:function(E,i){var d=this.refs["dropdown-"+i.id];if(d.style.display!="block"){d.style.display="block",d.style.left=E.offsetLeft+parseInt(E.offsetWidth/2)-parseInt(d.offsetWidth/2)+"px",d.style.top=E.offsetTop+E.offsetHeight+"px";var u=function c(x){d.style.display="none",document.removeEventListener("click",c)};document.addEventListener("click",u)}else d.style.display="none"}},{key:"render",value:function(){var E=this,i=this.props.toolbarButtons.filter(function(u){return E.props.toolbarOptions.indexOf(u.id)>-1}).map(function(u,c){return l.default.createElement("button",{key:c,type:"button",title:u.tooltip,onClick:function(x){u.dropdownOptions?E.handleDropdown(x.currentTarget,u):u.callback()},className:"react-md-toolbar-button"+(u.dropdownOptions?" react-md-toolbar-dropdown-button":"")},l.default.createElement("svg",{className:"react-md-icon react-md-icon-"+u.icon},l.default.createElement("use",{xlinkHref:"#react-md-icon-"+u.icon})),u.dropdownOptions&&l.default.createElement("span",{className:"react-md-toolbar-caret"}))}),d=this.props.toolbarButtons.filter(function(u){return u.dropdownOptions}).map(function(u,c){var x=u.dropdownOptions.map(function(T,n){return l.default.createElement("li",{key:n,onClick:T.onClick,className:"react-md-dropdown-option "+T.className},T.text)});return l.default.createElement("div",{key:c,ref:"dropdown-"+u.id,className:"react-md-dropdown"},l.default.createElement("ul",null,x))});return l.default.createElement("nav",{className:"react-md-toolbar"},l.default.createElement("div",{className:"react-md-tab"},l.default.createElement("button",{type:"button",className:this.props.isPreview?"react-md-tablinks active":"react-md-tablinks",onClick:function(){return E.props.showMarkdown(!1)}},"Write"),l.default.createElement("button",{type:"button",className:this.props.isPreview?"react-md-tablinks":"react-md-tablinks active",onClick:function(){return E.props.showMarkdown(!0)}},"Preview")),this.props.toolbarOptions.indexOf("preview-as-html")>-1&&l.default.createElement("span",null,l.default.createElement("input",{name:"Preview as HTML",type:"checkbox",checked:this.props.asHTML,onChange:this.props.handleCheck}),l.default.createElement("span",{className:"react-md-toolbar-item"},"Preview as HTML")),this.props.isPreview&&i,this.props.isPreview&&d)}}]),o}(l.default.Component);U.propTypes={showMarkdown:h.default.func.isRequired,handleCheck:h.default.func.isRequired,toolbarButtons:h.default.arrayOf(h.default.shape({icon:h.default.string.isRequired,tooltip:h.default.string})),asHTML:h.default.bool.isRequired,isPreview:h.default.bool.isRequired},v.default=U},function(_,v,g){Object.defineProperty(v,"__esModule",{value:!0});var s=g(2),a=function(k){return k&&k.__esModule?k:{default:k}}(s);g(3),v.default=a.default},function(_,v,g){v=_.exports=g(10)(!1),v.push([_.i,'.react-md-textarea{box-sizing:border-box;max-width:100%;resize:none;margin:0;padding:1em;width:100%;height:25em;border:1px solid #ddd;border-top:none;border-radius:2px}.react-md-textarea-drag{border:2px dashed #8ed091;background:#f0f8ff}.react-md-toolbar{font-size:9pt;height:29px;margin-bottom:0;border-bottom:1px solid #ddd}div.react-md-tab{background:#fff}div.react-md-tab button{margin:2px;margin-top:0;margin-bottom:0;border-top-left-radius:2px;border-top-right-radius:2px;border:none;border-bottom:1px solid #ddd;background:inherit;float:left;outline:none;cursor:pointer;height:30px;min-width:5em}div.react-md-tab button:first-child{margin-left:0}div.react-md-tab button.active{border:1px solid #ddd;border-bottom:none}.react-md-toolbar-item{line-height:30px}.react-md-toolbar-button{width:25px;border:none;background:inherit;cursor:pointer;padding:4px;margin-left:7px;border-radius:2px;margin-top:2px}.react-md-toolbar-button:hover{box-shadow:0 1px 10px #ddd}.react-md-preview-area{border:1px solid #ddd;border-top:none;min-height:15em;padding:1em;position:relative}.react-md-preview-area img{max-width:100%}.react-md-dropzone-wrap .react-md-remove-btn{cursor:pointer;color:#2196f3}.react-md-dropzone-wrap .react-md-dropzone-info{background:#f7f7f7;color:#92a1ad;font-size:12px;margin-top:-4px;padding:.5rem;border-bottom:1px solid #ddd;border-left:1px solid #ddd;border-right:1px solid #ddd}.react-md-info-text{display:flex;flex-direction:row}.react-md-file-guide{order:0;flex-basis:100%}.react-md-markdown-guide{order:1;margin-left:10px;flex-basis:auto;flex-shrink:0}.react-md-icon{display:inline-block;width:1.3em;height:1.3em;stroke-width:0;stroke:#545454;fill:#545454}.react-md-toolbar-dropdown-button{padding:4px 0;width:28px}.react-md-toolbar-caret{display:inline-block;width:0;height:0;vertical-align:middle;content:"";border:4px solid;border-right-color:transparent;border-bottom-color:transparent;border-left-color:transparent}.react-md-dropdown{display:none;position:absolute;top:100%;left:0;z-index:100;padding:10px 16px;margin-top:2px;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid rgba(27,31,35,.15);border-radius:4px;box-shadow:0 3px 12px rgba(27,31,35,.15)}.react-md-dropdown ul{margin:0;padding:0;list-style-type:none}.react-md-dropdown-option{cursor:pointer}.react-md-dropdown-option:hover{color:#020298}.react-md-header-1{font-weight:700;font-size:22px}.react-md-header-2{font-weight:700;font-size:18px}.react-md-header-3{font-weight:700;font-size:15px}.react-md-error{color:red;font-weight:700}.react-md-loader,.react-md-loader:after{border-radius:50%;width:3em;height:3em}.react-md-loader{margin:30px auto;font-size:10px;position:relative;text-indent:-9999em;border-top:.8em solid rgba(0,17,22,.2);border-right:.8em solid rgba(0,17,22,.2);border-bottom:.8em solid rgba(0,17,22,.2);border-left:.8em solid #001116;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);-webkit-animation:load8 1.1s infinite linear;animation:load8 1.1s infinite linear}@-webkit-keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.react-md-progress{display:inline-block;width:150px;height:7px;background-color:#ddd;margin:0 4px 0 6px}.react-md-progress-value{display:block;height:100%;background-color:#666}',""])},function(_,v){function g(a,k){var m=a[1]||"",w=a[3];if(!w)return m;if(k&&typeof btoa=="function"){var y=s(w);return[m].concat(w.sources.map(function(l){return"/*# sourceURL="+w.sourceRoot+l+" */"})).concat([y]).join(`
`)}return[m].join(`
`)}function s(a){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"}_.exports=function(a){var k=[];return k.toString=function(){return this.map(function(m){var w=g(m,a);return m[2]?"@media "+m[2]+"{"+w+"}":w}).join("")},k.i=function(m,w){typeof m=="string"&&(m=[[null,m,""]]);for(var y={},l=0;l<this.length;l++){var C=this[l][0];typeof C=="number"&&(y[C]=!0)}for(l=0;l<m.length;l++){var h=m[l];typeof h[0]=="number"&&y[h[0]]||(w&&!h[2]?h[2]=w:w&&(h[2]="("+h[2]+") and ("+w+")"),k.push(h))}},k}},function(_,v,g){function s(k){return function(){return k}}var a=function(){};a.thatReturns=s,a.thatReturnsFalse=s(!1),a.thatReturnsTrue=s(!0),a.thatReturnsNull=s(null),a.thatReturnsThis=function(){return this},a.thatReturnsArgument=function(k){return k},_.exports=a},function(_,v,g){function s(a,k,m,w,y,l,C,h){if(!a){var U;if(k===void 0)U=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[m,w,y,l,C,h],o=0;U=new Error(k.replace(/%s/g,function(){return p[o++]})),U.name="Invariant Violation"}throw U.framesToPop=1,U}}_.exports=s},function(_,v,g){var s=g(11),a=g(12),k=g(14);_.exports=function(){function m(l,C,h,U,p,o){o!==k&&a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function w(){return m}m.isRequired=m;var y={array:m,bool:m,func:m,number:m,object:m,string:m,symbol:m,any:m,arrayOf:w,element:m,instanceOf:w,node:m,objectOf:w,oneOf:w,oneOfType:w,shape:w,exact:w};return y.checkPropTypes=s,y.PropTypes=y,y}},function(_,v,g){_.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(_,v,g){function s(n,t){for(var e=0;e<n.length;e++){var r=n[e],f=o[r.id];if(f){f.refs++;for(var b=0;b<f.parts.length;b++)f.parts[b](r.parts[b]);for(;b<r.parts.length;b++)f.parts.push(C(r.parts[b],t))}else{for(var M=[],b=0;b<r.parts.length;b++)M.push(C(r.parts[b],t));o[r.id]={id:r.id,refs:1,parts:M}}}}function a(n,t){for(var e=[],r={},f=0;f<n.length;f++){var b=n[f],M=t.base?b[0]+t.base:b[0],O=b[1],L=b[2],B=b[3],N={css:O,media:L,sourceMap:B};r[M]?r[M].parts.push(N):e.push(r[M]={id:M,parts:[N]})}return e}function k(n,t){var e=i(n.insertInto);if(!e)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if(n.insertAt==="top")r?r.nextSibling?e.insertBefore(t,r.nextSibling):e.appendChild(t):e.insertBefore(t,e.firstChild),c.push(t);else{if(n.insertAt!=="bottom")throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");e.appendChild(t)}}function m(n){if(n.parentNode===null)return!1;n.parentNode.removeChild(n);var t=c.indexOf(n);t>=0&&c.splice(t,1)}function w(n){var t=document.createElement("style");return n.attrs.type="text/css",l(t,n.attrs),k(n,t),t}function y(n){var t=document.createElement("link");return n.attrs.type="text/css",n.attrs.rel="stylesheet",l(t,n.attrs),k(n,t),t}function l(n,t){Object.keys(t).forEach(function(e){n.setAttribute(e,t[e])})}function C(n,t){var e,r,f,b;if(t.transform&&n.css){if(!(b=t.transform(n.css)))return function(){};n.css=b}if(t.singleton){var M=u++;e=d||(d=w(t)),r=h.bind(null,e,M,!1),f=h.bind(null,e,M,!0)}else n.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(e=y(t),r=p.bind(null,e,t),f=function(){m(e),e.href&&URL.revokeObjectURL(e.href)}):(e=w(t),r=U.bind(null,e),f=function(){m(e)});return r(n),function(O){if(O){if(O.css===n.css&&O.media===n.media&&O.sourceMap===n.sourceMap)return;r(n=O)}else f()}}function h(n,t,e,r){var f=e?"":r.css;if(n.styleSheet)n.styleSheet.cssText=T(t,f);else{var b=document.createTextNode(f),M=n.childNodes;M[t]&&n.removeChild(M[t]),M.length?n.insertBefore(b,M[t]):n.appendChild(b)}}function U(n,t){var e=t.css,r=t.media;if(r&&n.setAttribute("media",r),n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}function p(n,t,e){var r=e.css,f=e.sourceMap,b=t.convertToAbsoluteUrls===void 0&&f;(t.convertToAbsoluteUrls||b)&&(r=x(r)),f&&(r+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(f))))+" */");var M=new Blob([r],{type:"text/css"}),O=n.href;n.href=URL.createObjectURL(M),O&&URL.revokeObjectURL(O)}var o={},E=function(n){var t;return function(){return t===void 0&&(t=n.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),i=function(n){var t={};return function(e){return t[e]===void 0&&(t[e]=n.call(this,e)),t[e]}}(function(n){return document.querySelector(n)}),d=null,u=0,c=[],x=g(16);_.exports=function(n,t){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs=typeof t.attrs=="object"?t.attrs:{},t.singleton||(t.singleton=E()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var e=a(n,t);return s(e,t),function(r){for(var f=[],b=0;b<e.length;b++){var M=e[b],O=o[M.id];O.refs--,f.push(O)}r&&s(a(r,t),t);for(var b=0;b<f.length;b++){var O=f[b];if(O.refs===0){for(var L=0;L<O.parts.length;L++)O.parts[L]();delete o[O.id]}}}};var T=function(){var n=[];return function(t,e){return n[t]=e,n.filter(Boolean).join(`
`)}}()},function(_,v){_.exports=function(g){var s=typeof window<"u"&&window.location;if(!s)throw new Error("fixUrls requires window.location");if(!g||typeof g!="string")return g;var a=s.protocol+"//"+s.host,k=a+s.pathname.replace(/\/[^\/]*$/,"/");return g.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(m,w){var y=w.trim().replace(/^"(.*)"$/,function(C,h){return h}).replace(/^'(.*)'$/,function(C,h){return h});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(y))return m;var l;return l=y.indexOf("//")===0?y:y.indexOf("/")===0?a+y:k+y.replace(/^\.\//,""),"url("+JSON.stringify(l)+")"})}}])})})(X);var le=X.exports;const se=ie(le);function de(F,I,A){window.initMarkdownEditor=de,I=I||!1,A=A||!1;const _=F.getAttribute("data-signing-url"),v=F.getAttribute("data-preview-url"),g=F.getAttribute("data-authenticity-token"),s=F.textContent,a=F.getAttribute("data-content-element-id"),k=F.getAttribute("data-content-element-name"),m=document.getElementById("activity_form");let w=s,y;F.textContent="",I&&(m.on("ajax:success",(l,C)=>{y||(y=document.getElementById("course_content")),w=y.value}),window.onbeforeunload=function(l){if(y||(y=document.getElementById("course_content")),w!=y.value)return l.returnValue="",""}),m&&m.parentElement.classList.contains("modal__content")&&PubSub.subscribe(J.modal_close,(l,C)=>{l===J.modal_close&&(y||(y=document.getElementById("course_content")),PubSub.publish(J.form_change,{hasChanged:w!=y.value,formId:"activity_form"}))}),ae.render(re.jsx(se,{toolbarOptions:["bold","link","headers","italic","quote","unordered-list","ordered-list"],elementId:a,elementName:k,content:s,previewClass:"postcontent",showUploadedFiles:!1,showUploadMessage:A,markdownGuideUrl:"https://experience.intellum.com/student/page/454110",converter:l=>new Promise((C,h)=>{$.post(v,{markdown:l,authenticity_token:g}).then(U=>{C(U.data)}).catch(U=>h(U))}),onFileUpload:(l,C)=>new Promise((h,U)=>{const p=l[0];if(p.type.split("/")[0]!="image"){U("Your file must be an image.");return}if(p.size>200*1024*1024){U("Your file must be smaller than 200Mb.");return}$.get(_,{params:{name:p.name,content_type:p.type}}).then(o=>{const E={headers:{"Content-Type":p.type},onUploadProgress(i){if(i.lengthComputable==!0){const d=Math.round(100*i.loaded/i.total);C(d)}}};$.put(o.data.put,p,E).then(i=>{h(o.data.get)}).catch(i=>U(i))}).catch(o=>U(o))})}),F)}export{de as i,J as p};
//# sourceMappingURL=initMarkdownEditor-Cqtth1Dn.js.map
