(a=>{a.widget("evergreen.q4Analysts",{options:{url:"",useJSONP:!1,languageId:null,groupWorkflowId:null,chunkCount:1,contentTpl:'{{#.}}{{#groupName}}<h4 class="evergreen-analysts-group-name">{{{groupName}}}</h4>{{/groupName}}<table class="evergreen-table evergreen-analysts-table" aria-label="Analysts table"><thead class="evergreen-table-header evergreen-analysts-table-header"><tr class="evergreen-table-row evergreen-analysts-table-header-row"><th class="evergreen-analysts-table-name">Name</th> <th class="evergreen-analysts-table-firm">Firm</th></tr></thead><tbody class="evergreen-table-body">{{#analysts}}<tr class="evergreen-table-row evergreen-analysts-table-body-row"><th class="evergreen-analysts-table-name">{{{name}}}</th><td class="evergreen-analysts-table-firm">{{{firm}}}</td></tr>{{/analysts}}</tbody></table>{{#groupDisclaimer}}<div class="evergreen-analysts-group-disclaimer">{{{groupDisclaimer}}}</div>{{/groupDisclaimer}}{{/.}}',beforeRender:function(e,t){},complete:function(e){}},_create:function(){this._getAnalystGroupData()},_buildParams:function(){var e=this.options;return{LanguageId:e.languageId||("function"==typeof GetLanguageId?GetLanguageId():1)}},_normalizeGroupData:function(e){var t=this.options;return e?e.find(function(e){return e.WorkflowId===t.groupWorkflowId}):null},_normalizeData:function(e,t=[]){var n=this.options,a=t.map(function(e,t){return{name:e.Name,firm:e.Firm,jobTitle:e.JobTitle,phone:e.Phone,email:e.Email,location:e.Location,url:e.Url,rating:e.Rating,reportingDate:e.ReportingDate,targetPrice:e.TargetPrice,index:t}}),t=n.chunkCount<1?1:n.chunkCount,t=n.chunkCount>a.length?a.length:t,r=Math.ceil(a.length/t),n=Array.from({length:t},function(e,t){return a.slice(t*r,t*r+r)});return{groupName:e.Name,groupDisclaimer:e.Disclaimer,analysts:a,chunks:n}},_getAnalystGroupData:function(){var t=this;t._callApi("/feed/Analyst.svc/GetAnalystGroupList",t._buildParams()).done(function(e){e=t._normalizeGroupData(e.GetAnalystGroupListResult);e?t._getAnalystsData(e):t._render({analysts:[]})})},_getAnalystsData:function(t){var n=this,e=this.options;n._callApi("/feed/Analyst.svc/GetAnalystList",a.extend(n._buildParams(),{analystGroupWorkflowId:e.groupWorkflowId})).done(function(e){n._render(n._normalizeData(t,e.GetAnalystListResult)),n._trigger("complete")})},_render:function(e){var t=this.options,n=this.element;a(n).html(Mustache.render(t.contentTpl,{...e,even:function(){return function(e,t){return(this.index+1)%2==0?t(e):null}},odd:function(){return function(e,t){return(this.index+1)%2!=0?t(e):null}}}))},_callApi:function(e,t){var n=this.options;return a.ajax({type:"GET",url:n.url+e,data:t,contentType:"application/json; charset=utf-8",dataType:n.useJSONP?"jsonp":"json"})},destroy:function(){this.element.html("")},_setOption:function(){this._superApply(arguments)}})})($tudio);