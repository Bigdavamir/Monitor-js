(window.atlassianWebpackJsonpe19a4f58490c3d96a3072d1e47cd0e73=window.atlassianWebpackJsonpe19a4f58490c3d96a3072d1e47cd0e73||[]).push([["deprecated-dialog"],{458:function(e,t,n){"use strict";n.r(t);var a=n(35),i=n(18),o=n.n(i);const r="next",l="prev";let d,c,s,u;function p(e){e.children[0].focus()}function b(e,t){let n=d.indexOf(e);t===r?n=n===d.length-1?0:n+1:t===l&&(n=0===n?d.length-1:n-1),p(d[n])}function g(e,t,n){const a=e.children[0];n?(a.setAttribute("aria-selected",!0),a.removeAttribute("tabindex")):(a.setAttribute("aria-selected",!1),a.tabIndex=-1)}function f(e){for(let t=0;t<d.length;t+=1){const n=d[t];g(n,0,e&&e===n)}}function m(e){const t=e.currentTarget;function n(t){t(),e.stopPropagation()}switch(e.key){case"ArrowUp":n(()=>b(t,l));break;case"ArrowDown":n(()=>b(t,r));break;case"Home":n(()=>p(s));break;case"End":n(()=>p(u));break;case"Enter":case" ":n(()=>f(t))}}function h(e){f(e.currentTarget)}function y(e){const t=e.popup.element,a=t&&t[0].querySelector(".dialog-page-menu");a&&(n(43).debug("bind tablist events",a),d=Array.prototype.slice.call(a.querySelectorAll(".page-menu-item")),c=Array.prototype.slice.call(t[0].querySelectorAll(".dialog-panel-body")),[s]=d,u=d[d.length-1],function(e){e.setAttribute("role","tablist"),e.setAttribute("aria-orientation","vertical"),d.forEach((e,t)=>{const n=e.querySelector("button"),a=c[t],i=n.id||"dialog-tab-"+t,o=a.id||"dialog-tabpanel-"+t;n.setAttribute("id",i),n.setAttribute("role","tab"),n.setAttribute("aria-controls",o),a.setAttribute("id",o),a.setAttribute("role","tabpanel"),a.setAttribute("aria-labelledby",i),g(e,0,e.classList.contains("selected"))})}(a),d.forEach(e=>{e.addEventListener("keydown",m),e.addEventListener("click",h)}))}let k=null;const v=e=>{if("Tab"!==e.key)return;const t=k.find('button, \n            input:not([type="hidden"]), \n            select, \n            textarea, \n            [href]:not([tabindex="-1"]), \n            [role="button"], \n            [tabindex]:not([tabindex="-1"])').filter(":visible"),n=o()(e.target);e.shiftKey?(n.is(k)||n.is(t.first()))&&(e.preventDefault(),t.last().focus()):n.is(t.last())&&(e.preventDefault(),t.first().focus())};function A(){AJS.bind("show.dialog",(e,t)=>{const n=AJS.Meta.get("page-id"),a=AJS.Meta.get("space-key"),i=AJS.Meta.get("editor-mode"),o=AJS.Meta.get("new-page");AJS.EventQueue=AJS.EventQueue||[],AJS.EventQueue.push({name:t.dialog.id,properties:function(){const e={};return n&&(e.pageid=n),a&&(e.spacekey=a),i&&(e.editormode=i),o&&(e.newpage=o),e}()});const r=t.dialog.popup.element;if(!r)return;const{dialog:l}=t;if(null==l||!l.page.length)return;l.page.forEach((e,t)=>{var n,a;const i=e.element;let o=null!==(n=null==i?void 0:i.attr("id"))&&void 0!==n?n:`${l.id||"dialog-title"}-${t}`;o+="-label",null===(a=e.header)||void 0===a||a.attr("id",o)});const d=l.page[l.curpage],c=d.header.attr("id");c&&r.attr("aria-labelledby",c),r.attr("role","dialog"),r.attr("aria-modal",!0),r.attr("aria-hidden",!1),k=d.element,k.attr("tabindex","0"),k.find("input[type=hidden]").attr("tabindex","-1"),k.find(".hidden").attr("tabindex","-1");r.find(".button-panel-cancel-link").attr("role","button").attr("tabindex","0"),r[0].addEventListener("keydown",v)});o()(document).bind("showLayer",(e,t,n)=>{Confluence.runBinderComponents(),"popup"===t&&n&&function(e){const t=o()(e);let n;if(t.attr("data-lasttab-override"))return;t.attr("data-tab-default")&&(n=t.attr("data-tab-default"));const a=Confluence.storageManager(t.attr("id")),i=a.getItem("last-tab"),r=null!=i?i:n;r&&o()(`.page-menu-item:visible:eq(${r}) button`,t).click(),t.attr("data-lasttab-bound")||(o()(".page-menu-item",t).each((e,t)=>{o()(t).click(()=>{a.setItem("last-tab",e)})}),t.attr("data-lasttab-bound","true"))}(n.element)}),AJS.Dialog.prototype.overrideLastTab=function(){o()(this.popup.element).attr("data-lasttab-override","true")},AJS.Dialog.prototype.addHelpText=function(e,t){if(!e)return;let n=e;t&&(n=AJS.template(e).fill(t).toString());const a=this.page[this.curpage];a.buttonpanel||a.addButtonPanel();const i=o()("<div class='dialog-tip'></div>").html(n);a.buttonpanel.append(i),o()("a",i).click((function(){const e=window.open(this.href,"_blank");return e.focus(),e.opener=null,!1}))},AJS.Dialog.prototype.getTitle=function(){return o()(`#${this.id} .dialog-components:visible h2`).text()},AJS.Dialog.prototype.isVisible=function(){return o()("#"+this.id).is(":visible")}}function w(e,...t){let a;return"object"!=typeof(e=e||{})||(e=o.a.extend({},{keypressListener(t){if(27===t.keyCode)n(43).debug("dialog.js: escape keydown caught"),o()(".aui-dropdown",a.popup.element).is(":visible")||("function"==typeof e.onCancel?e.onCancel():a.hide());else if(13===t.keyCode&&(n(43).debug("dialog.js: enter keydown caught"),!o()(".aui-dropdown",a.popup.element).is(":visible"))){const n=t.target.nodeName&&t.target.nodeName.toLowerCase();["a","button","textarea"].includes(n)||"function"!=typeof e.onSubmit||setTimeout(e.onSubmit)}},width:865,height:530},e)),a=new AJS.Dialog(e,...t),o()(document).bind("hideLayer",(t,n,i)=>{"popup"===n&&i===a&&"function"==typeof e.onCancel&&(e.onCancel(),d.forEach(e=>{e.removeEventListener("keydown",m),e.removeEventListener("click",h)}))}),a}function S(e,...t){const n=w(e,...t);return setTimeout(()=>{A(),y(n)},0),n}Object(a.a)("confluence/dialog",()=>({component:w,confluenceDialog:S,initialiser:A}))}},[[458,"manifest","vendors~backbone~color-scheme~copy-heading-link~date-time~deprecated-dialog~form-state-control~inlin~b2589942","vendors~backbone~copy-heading-link~date-time~deprecated-dialog~form-state-control~inline-dialog~jque~28f2adbc","copy-heading-link~date-time~deprecated-dialog~form-state-control~inline-dialog~locale~skip-links~tab~827d69cb","deprecated-dialog~inline-dialog~skip-links","deprecated-dialog~inline-dialog~jquery-selection-plugin"]]]);