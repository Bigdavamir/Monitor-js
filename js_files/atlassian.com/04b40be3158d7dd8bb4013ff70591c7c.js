import{i as ws,p as y}from"./initMarkdownEditor-Cqtth1Dn.js";import{q as he}from"./index-DgbZe0ek.js";import{a as _e}from"./index-DRH4qILr.js";import{c as ri,g as Ni}from"./_commonjsHelpers-BosuxZz1.js";import{b as Te}from"./index-ClYKNXIe.js";var Rt={exports:{}};(function(r,e){(function(t,i){var s={};t.PubSub?(s=t.PubSub,console.warn("PubSub already loaded, using existing version")):(t.PubSub=s,i(s)),r!==void 0&&r.exports&&(e=r.exports=s),e.PubSub=s,r.exports=e=s})(typeof window=="object"&&window||ri||ri,function(t){var i={},s=-1,n="*";function l(u){var g;for(g in u)if(Object.prototype.hasOwnProperty.call(u,g))return!0;return!1}function a(u){return function(){throw u}}function o(u,g,_){try{u(g,_)}catch(C){setTimeout(a(C),0)}}function d(u,g,_){u(g,_)}function c(u,g,_,C){var I=i[g],O=C?d:o,M;if(Object.prototype.hasOwnProperty.call(i,g))for(M in I)Object.prototype.hasOwnProperty.call(I,M)&&O(I[M],u,_)}function h(u,g,_){return function(){var I=String(u),O=I.lastIndexOf(".");for(c(u,u,g,_);O!==-1;)I=I.substr(0,O),O=I.lastIndexOf("."),c(u,I,g,_);c(u,n,g,_)}}function f(u){var g=String(u),_=!!(Object.prototype.hasOwnProperty.call(i,g)&&l(i[g]));return _}function b(u){for(var g=String(u),_=f(g)||f(n),C=g.lastIndexOf(".");!_&&C!==-1;)g=g.substr(0,C),C=g.lastIndexOf("."),_=f(g);return _}function m(u,g,_,C){u=typeof u=="symbol"?u.toString():u;var I=h(u,g,C),O=b(u);return O?(_===!0?I():setTimeout(I,0),!0):!1}t.publish=function(u,g){return m(u,g,!1,t.immediateExceptions)},t.publishSync=function(u,g){return m(u,g,!0,t.immediateExceptions)},t.subscribe=function(u,g){if(typeof g!="function")return!1;u=typeof u=="symbol"?u.toString():u,Object.prototype.hasOwnProperty.call(i,u)||(i[u]={});var _="uid_"+String(++s);return i[u][_]=g,_},t.subscribeAll=function(u){return t.subscribe(n,u)},t.subscribeOnce=function(u,g){var _=t.subscribe(u,function(){t.unsubscribe(_),g.apply(this,arguments)});return t},t.clearAllSubscriptions=function(){i={}},t.clearSubscriptions=function(g){var _;for(_ in i)Object.prototype.hasOwnProperty.call(i,_)&&_.indexOf(g)===0&&delete i[_]},t.countSubscriptions=function(g){var _,C,I=0;for(_ in i)if(Object.prototype.hasOwnProperty.call(i,_)&&_.indexOf(g)===0){for(C in i[_])I++;break}return I},t.getSubscriptions=function(g){var _,C=[];for(_ in i)Object.prototype.hasOwnProperty.call(i,_)&&_.indexOf(g)===0&&C.push(_);return C},t.unsubscribe=function(u){var g=function(ue){var B;for(B in i)if(Object.prototype.hasOwnProperty.call(i,B)&&B.indexOf(ue)===0)return!0;return!1},_=typeof u=="string"&&(Object.prototype.hasOwnProperty.call(i,u)||g(u)),C=!_&&typeof u=="string",I=typeof u=="function",O=!1,M,H,W;if(_){t.clearSubscriptions(u);return}for(M in i)if(Object.prototype.hasOwnProperty.call(i,M)){if(H=i[M],C&&H[u]){delete H[u],O=u;break}if(I)for(W in H)Object.prototype.hasOwnProperty.call(H,W)&&H[W]===u&&(delete H[W],O=!0)}return O}})})(Rt,Rt.exports);var Is=Rt.exports;const v=Ni(Is),Et=function(r){let e={};r.target.dataset.preventDefault&&r.preventDefault();try{e=JSON.parse(r.target.dataset.triggerData)}catch{e={}}e.triggerTarget=r.target.dataset.triggerTarget,e.triggerValue=r.target.value,v.publish(r.target.dataset.trigger,e)};document.body.addEventListener("click",r=>{r.target.matches("[data-trigger]")&&!r.target.matches("[data-trigger-event]")&&r.target.dataset.trigger&&Et(r)});document.body.addEventListener("keydown",r=>{r.key==="Enter"&&r.target.matches("[data-trigger]")&&!r.target.matches("[data-trigger-event]")&&r.target.dataset.trigger&&Et(r)});const Fi=function(r,e){return r.target&&r.target.matches("[data-trigger-event]")&&r.target.dataset.trigger&&r.target.dataset.triggerEvent===e};document.body.addEventListener("input",r=>{Fi(r,"input")&&Et(r)});document.body.addEventListener("change",r=>{Fi(r,"change")&&Et(r)});/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/window.JSCompiler_renameProperty=function(r,e){return r};/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let As=/(url\()([^)]*)(\))/g,Ts=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/,et,K;function Ve(r,e){if(r&&Ts.test(r)||r==="//")return r;if(et===void 0){et=!1;try{const t=new URL("b","http://a");t.pathname="c%20d",et=t.href==="http://a/c%20d"}catch{}}if(e||(e=document.baseURI||window.location.href),et)try{return new URL(r,e).href}catch{return r}return K||(K=document.implementation.createHTMLDocument("temp"),K.base=K.createElement("base"),K.head.appendChild(K.base),K.anchor=K.createElement("a"),K.body.appendChild(K.anchor)),K.base.href=e,K.anchor.href=r,K.anchor.href||r}function Wt(r,e){return r.replace(As,function(t,i,s,n){return i+"'"+Ve(s.replace(/["']/g,""),e)+"'"+n})}function Xt(r){return r.substring(0,r.lastIndexOf("/")+1)}/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const Ps=!window.ShadyDOM||!window.ShadyDOM.inUse;!window.ShadyCSS||window.ShadyCSS.nativeCss;const Os=Ps&&"adoptedStyleSheets"in Document.prototype&&"replaceSync"in CSSStyleSheet.prototype&&(()=>{try{const r=new CSSStyleSheet;r.replaceSync("");const e=document.createElement("div");return e.attachShadow({mode:"open"}),e.shadowRoot.adoptedStyleSheets=[r],e.shadowRoot.adoptedStyleSheets[0]===r}catch{return!1}})();let ks=window.Polymer&&window.Polymer.rootPath||Xt(document.baseURI||window.location.href),ut=window.Polymer&&window.Polymer.sanitizeDOMValue||void 0;window.Polymer&&window.Polymer.setPassiveTouchGestures;let qt=window.Polymer&&window.Polymer.strictTemplatePolicy||!1,xs=window.Polymer&&window.Polymer.allowTemplateFromDomModule||!1,Ls=window.Polymer&&window.Polymer.legacyOptimizations||!1,Ds=window.Polymer&&window.Polymer.legacyWarnings||!1,Ns=window.Polymer&&window.Polymer.syncInitialRender||!1,Ut=window.Polymer&&window.Polymer.legacyUndefined||!1,Fs=window.Polymer&&window.Polymer.orderedComputed||!1,ni=window.Polymer&&window.Polymer.removeNestedTemplates||!1,Ms=window.Polymer&&window.Polymer.fastDomIf||!1;window.Polymer&&window.Polymer.suppressTemplateNotifications;window.Polymer&&window.Polymer.legacyNoObservedAttributes;let Hs=window.Polymer&&window.Polymer.useAdoptedStyleSheetsWithBuiltCSS||!1;/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let Bs=0;const Oe=function(r){let e=r.__mixinApplications;e||(e=new WeakMap,r.__mixinApplications=e);let t=Bs++;function i(s){let n=s.__mixinSet;if(n&&n[t])return s;let l=e,a=l.get(s);if(!a){a=r(s),l.set(s,a);let o=Object.create(a.__mixinSet||n||null);o[t]=!0,a.__mixinSet=o}return a}return i};/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let Jt={},Mi={};function li(r,e){Jt[r]=Mi[r.toLowerCase()]=e}function ai(r){return Jt[r]||Mi[r.toLowerCase()]}function Rs(r){r.querySelector("style")&&console.warn("dom-module %s has style outside template",r.id)}class Ye extends HTMLElement{static get observedAttributes(){return["id"]}static import(e,t){if(e){let i=ai(e);return i&&t?i.querySelector(t):i}return null}attributeChangedCallback(e,t,i,s){t!==i&&this.register()}get assetpath(){if(!this.__assetpath){const e=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,t=Ve(this.getAttribute("assetpath")||"",e.baseURI);this.__assetpath=Xt(t)}return this.__assetpath}register(e){if(e=e||this.id,e){if(qt&&ai(e)!==void 0)throw li(e,null),new Error(`strictTemplatePolicy: dom-module ${e} re-registered`);this.id=e,li(e,this),Rs(this)}}}Ye.prototype.modules=Jt;customElements.define("dom-module",Ye);/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const qs="link[rel=import][type~=css]",Us="include",oi="shady-unscoped";function Hi(r){return Ye.import(r)}function di(r){let e=r.body?r.body:r;const t=Wt(e.textContent,r.baseURI),i=document.createElement("style");return i.textContent=t,i}function Vs(r){const e=r.trim().split(/\s+/),t=[];for(let i=0;i<e.length;i++)t.push(...js(e[i]));return t}function js(r){const e=Hi(r);if(!e)return console.warn("Could not find style data in module named",r),[];if(e._styles===void 0){const t=[];t.push(...Ri(e));const i=e.querySelector("template");i&&t.push(...Bi(i,e.assetpath)),e._styles=t}return e._styles}function Bi(r,e){if(!r._styles){const t=[],i=r.content.querySelectorAll("style");for(let s=0;s<i.length;s++){let n=i[s],l=n.getAttribute(Us);l&&t.push(...Vs(l).filter(function(a,o,d){return d.indexOf(a)===o})),e&&(n.textContent=Wt(n.textContent,e)),t.push(n)}r._styles=t}return r._styles}function zs(r){let e=Hi(r);return e?Ri(e):[]}function Ri(r){const e=[],t=r.querySelectorAll(qs);for(let i=0;i<t.length;i++){let s=t[i];if(s.import){const n=s.import,l=s.hasAttribute(oi);if(l&&!n._unscopedStyle){const a=di(n);a.setAttribute(oi,""),n._unscopedStyle=a}else n._style||(n._style=di(n));e.push(l?n._unscopedStyle:n._style)}}return e}/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const be=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?r=>ShadyDOM.patch(r):r=>r;/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function Vt(r){return r.indexOf(".")>=0}function ye(r){let e=r.indexOf(".");return e===-1?r:r.slice(0,e)}function $s(r,e){return r.indexOf(e+".")===0}function pt(r,e){return e.indexOf(r+".")===0}function ft(r,e,t){return e+t.slice(r.length)}function He(r){if(Array.isArray(r)){let e=[];for(let t=0;t<r.length;t++){let i=r[t].toString().split(".");for(let s=0;s<i.length;s++)e.push(i[s])}return e.join(".")}else return r}function qi(r){return Array.isArray(r)?He(r).split("."):r.toString().split(".")}function j(r,e,t){let i=r,s=qi(e);for(let n=0;n<s.length;n++){if(!i)return;let l=s[n];i=i[l]}return t&&(t.path=s.join(".")),i}function ci(r,e,t){let i=r,s=qi(e),n=s[s.length-1];if(s.length>1){for(let l=0;l<s.length-1;l++){let a=s[l];if(i=i[a],!i)return}i[n]=t}else i[e]=t;return s.join(".")}/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const mt={},Ks=/-[a-z]/g,Gs=/([A-Z])/g;function Ui(r){return mt[r]||(mt[r]=r.indexOf("-")<0?r:r.replace(Ks,e=>e[1].toUpperCase()))}function St(r){return mt[r]||(mt[r]=r.replace(Gs,"-$1").toLowerCase())}/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let Ys=0,Vi=0,Ie=[],Ws=0,jt=!1,ji=document.createTextNode("");new window.MutationObserver(Xs).observe(ji,{characterData:!0});function Xs(){jt=!1;const r=Ie.length;for(let e=0;e<r;e++){let t=Ie[e];if(t)try{t()}catch(i){setTimeout(()=>{throw i})}}Ie.splice(0,r),Vi+=r}const Js={run(r){return jt||(jt=!0,ji.textContent=Ws++),Ie.push(r),Ys++},cancel(r){const e=r-Vi;if(e>=0){if(!Ie[e])throw new Error("invalid async handle: "+r);Ie[e]=null}}};/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const Qs=Js,zi=Oe(r=>{class e extends r{static createProperties(i){const s=this.prototype;for(let n in i)n in s||s._createPropertyAccessor(n)}static attributeNameForProperty(i){return i.toLowerCase()}static typeForProperty(i){}_createPropertyAccessor(i,s){this._addPropertyToAttributeMap(i),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[i]||(this.__dataHasAccessor[i]=!0,this._definePropertyAccessor(i,s))}_addPropertyToAttributeMap(i){this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes));let s=this.__dataAttributes[i];return s||(s=this.constructor.attributeNameForProperty(i),this.__dataAttributes[s]=i),s}_definePropertyAccessor(i,s){Object.defineProperty(this,i,{get(){return this.__data[i]},set:s?function(){}:function(n){this._setPendingProperty(i,n,!0)&&this._invalidateProperties()}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__dataCounter=0,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let i in this.__dataHasAccessor)this.hasOwnProperty(i)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[i]=this[i],delete this[i])}_initializeInstanceProperties(i){Object.assign(this,i)}_setProperty(i,s){this._setPendingProperty(i,s)&&this._invalidateProperties()}_getProperty(i){return this.__data[i]}_setPendingProperty(i,s,n){let l=this.__data[i],a=this._shouldPropertyChange(i,s,l);return a&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(i in this.__dataOld)&&(this.__dataOld[i]=l),this.__data[i]=s,this.__dataPending[i]=s),a}_isPropertyPending(i){return!!(this.__dataPending&&this.__dataPending.hasOwnProperty(i))}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,Qs.run(()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())}))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){this.__dataCounter++;const i=this.__data,s=this.__dataPending,n=this.__dataOld;this._shouldPropertiesChange(i,s,n)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(i,s,n)),this.__dataCounter--}_shouldPropertiesChange(i,s,n){return!!s}_propertiesChanged(i,s,n){}_shouldPropertyChange(i,s,n){return n!==s&&(n===n||s===s)}attributeChangedCallback(i,s,n,l){s!==n&&this._attributeToProperty(i,n),super.attributeChangedCallback&&super.attributeChangedCallback(i,s,n,l)}_attributeToProperty(i,s,n){if(!this.__serializing){const l=this.__dataAttributes,a=l&&l[i]||i;this[a]=this._deserializeValue(s,n||this.constructor.typeForProperty(a))}}_propertyToAttribute(i,s,n){this.__serializing=!0,n=arguments.length<3?this[i]:n,this._valueToNodeAttribute(this,n,s||this.constructor.attributeNameForProperty(i)),this.__serializing=!1}_valueToNodeAttribute(i,s,n){const l=this._serializeValue(s);(n==="class"||n==="name"||n==="slot")&&(i=be(i)),l===void 0?i.removeAttribute(n):i.setAttribute(n,l)}_serializeValue(i){switch(typeof i){case"boolean":return i?"":void 0;default:return i!=null?i.toString():void 0}}_deserializeValue(i,s){switch(s){case Boolean:return i!==null;case Number:return Number(i);default:return i}}}return e});/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const $i={};let tt=HTMLElement.prototype;for(;tt;){let r=Object.getOwnPropertyNames(tt);for(let e=0;e<r.length;e++)$i[r[e]]=!0;tt=Object.getPrototypeOf(tt)}function Zs(r,e){if(!$i[e]){let t=r[e];t!==void 0&&(r.__data?r._setPendingProperty(e,t):(r.__dataProto?r.hasOwnProperty(JSCompiler_renameProperty("__dataProto",r))||(r.__dataProto=Object.create(r.__dataProto)):r.__dataProto={},r.__dataProto[e]=t))}}const er=Oe(r=>{const e=zi(r);class t extends e{static createPropertiesForAttributes(){let s=this.observedAttributes;for(let n=0;n<s.length;n++)this.prototype._createPropertyAccessor(Ui(s[n]))}static attributeNameForProperty(s){return St(s)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(s){for(let n in s)this._setProperty(n,s[n])}_ensureAttribute(s,n){const l=this;l.hasAttribute(s)||this._valueToNodeAttribute(l,n,s)}_serializeValue(s){switch(typeof s){case"object":if(s instanceof Date)return s.toString();if(s)try{return JSON.stringify(s)}catch{return""}default:return super._serializeValue(s)}}_deserializeValue(s,n){let l;switch(n){case Object:try{l=JSON.parse(s)}catch{l=s}break;case Array:try{l=JSON.parse(s)}catch{l=null,console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${s}`)}break;case Date:l=isNaN(s)?String(s):Number(s),l=new Date(l);break;default:l=super._deserializeValue(s,n);break}return l}_definePropertyAccessor(s,n){Zs(this,s),super._definePropertyAccessor(s,n)}_hasAccessor(s){return this.__dataHasAccessor&&this.__dataHasAccessor[s]}_isPropertyPending(s){return!!(this.__dataPending&&s in this.__dataPending)}}return t});/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const tr={"dom-if":!0,"dom-repeat":!0};let hi=!1,ui=!1;function ir(){if(!hi){hi=!0;const r=document.createElement("textarea");r.placeholder="a",ui=r.placeholder===r.textContent}return ui}function sr(r){ir()&&r.localName==="textarea"&&r.placeholder&&r.placeholder===r.textContent&&(r.textContent=null)}function rr(r){let e=r.getAttribute("is");if(e&&tr[e]){let t=r;for(t.removeAttribute("is"),r=t.ownerDocument.createElement(e),t.parentNode.replaceChild(r,t),r.appendChild(t);t.attributes.length;)r.setAttribute(t.attributes[0].name,t.attributes[0].value),t.removeAttribute(t.attributes[0].name)}return r}function Ki(r,e){let t=e.parentInfo&&Ki(r,e.parentInfo);if(t){for(let i=t.firstChild,s=0;i;i=i.nextSibling)if(e.parentIndex===s++)return i}else return r}function nr(r,e,t,i){i.id&&(e[i.id]=t)}function lr(r,e,t){if(t.events&&t.events.length)for(let i=0,s=t.events,n;i<s.length&&(n=s[i]);i++)r._addMethodEventListenerToNode(e,n.name,n.value,r)}function ar(r,e,t,i){t.templateInfo&&(e._templateInfo=t.templateInfo,e._parentTemplateInfo=i)}function or(r,e,t){return r=r._methodHost||r,function(s){r[t]?r[t](s,s.detail):console.warn("listener method `"+t+"` not defined")}}const dr=Oe(r=>{class e extends r{static _parseTemplate(i,s){if(!i._templateInfo){let n=i._templateInfo={};n.nodeInfoList=[],n.nestedTemplate=!!s,n.stripWhiteSpace=s&&s.stripWhiteSpace||i.hasAttribute("strip-whitespace"),this._parseTemplateContent(i,n,{parent:null})}return i._templateInfo}static _parseTemplateContent(i,s,n){return this._parseTemplateNode(i.content,s,n)}static _parseTemplateNode(i,s,n){let l=!1,a=i;return a.localName=="template"&&!a.hasAttribute("preserve-content")?l=this._parseTemplateNestedTemplate(a,s,n)||l:a.localName==="slot"&&(s.hasInsertionPoint=!0),sr(a),a.firstChild&&this._parseTemplateChildNodes(a,s,n),a.hasAttributes&&a.hasAttributes()&&(l=this._parseTemplateNodeAttributes(a,s,n)||l),l||n.noted}static _parseTemplateChildNodes(i,s,n){if(!(i.localName==="script"||i.localName==="style"))for(let l=i.firstChild,a=0,o;l;l=o){if(l.localName=="template"&&(l=rr(l)),o=l.nextSibling,l.nodeType===Node.TEXT_NODE){let c=o;for(;c&&c.nodeType===Node.TEXT_NODE;)l.textContent+=c.textContent,o=c.nextSibling,i.removeChild(c),c=o;if(s.stripWhiteSpace&&!l.textContent.trim()){i.removeChild(l);continue}}let d={parentIndex:a,parentInfo:n};this._parseTemplateNode(l,s,d)&&(d.infoIndex=s.nodeInfoList.push(d)-1),l.parentNode&&a++}}static _parseTemplateNestedTemplate(i,s,n){let l=i,a=this._parseTemplate(l,s);return(a.content=l.content.ownerDocument.createDocumentFragment()).appendChild(l.content),n.templateInfo=a,!0}static _parseTemplateNodeAttributes(i,s,n){let l=!1,a=Array.from(i.attributes);for(let o=a.length-1,d;d=a[o];o--)l=this._parseTemplateNodeAttribute(i,s,n,d.name,d.value)||l;return l}static _parseTemplateNodeAttribute(i,s,n,l,a){return l.slice(0,3)==="on-"?(i.removeAttribute(l),n.events=n.events||[],n.events.push({name:l.slice(3),value:a}),!0):l==="id"?(n.id=a,!0):!1}static _contentForTemplate(i){let s=i._templateInfo;return s&&s.content||i.content}_stampTemplate(i,s){i&&!i.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(i),s=s||this.constructor._parseTemplate(i);let n=s.nodeInfoList,l=s.content||i.content,a=document.importNode(l,!0);a.__noInsertionPoint=!s.hasInsertionPoint;let o=a.nodeList=new Array(n.length);a.$={};for(let d=0,c=n.length,h;d<c&&(h=n[d]);d++){let f=o[d]=Ki(a,h);nr(this,a.$,f,h),ar(this,f,h,s),lr(this,f,h)}return a=a,a}_addMethodEventListenerToNode(i,s,n,l){l=l||i;let a=or(l,s,n);return this._addEventListenerToNode(i,s,a),a}_addEventListenerToNode(i,s,n){i.addEventListener(s,n)}_removeEventListenerFromNode(i,s,n){i.removeEventListener(s,n)}}return e});/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */let We=0;const Xe=[],P={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},Gi="__computeInfo",cr=/[A-Z]/;function At(r,e,t){let i=r[e];if(!i)i=r[e]={};else if(!r.hasOwnProperty(e)&&(i=r[e]=Object.create(r[e]),t))for(let s in i){let n=i[s],l=i[s]=Array(n.length);for(let a=0;a<n.length;a++)l[a]=n[a]}return i}function Be(r,e,t,i,s,n){if(e){let l=!1;const a=We++;for(let o in t){let d=s?ye(o):o,c=e[d];if(c)for(let h=0,f=c.length,b;h<f&&(b=c[h]);h++)(!b.info||b.info.lastRun!==a)&&(!s||Qt(o,b.trigger))&&(b.info&&(b.info.lastRun=a),b.fn(r,o,t,i,b.info,s,n),l=!0)}return l}return!1}function hr(r,e,t,i,s,n,l,a){let o=!1,d=l?ye(i):i,c=e[d];if(c)for(let h=0,f=c.length,b;h<f&&(b=c[h]);h++)(!b.info||b.info.lastRun!==t)&&(!l||Qt(i,b.trigger))&&(b.info&&(b.info.lastRun=t),b.fn(r,i,s,n,b.info,l,a),o=!0);return o}function Qt(r,e){if(e){let t=e.name;return t==r||!!(e.structured&&$s(t,r))||!!(e.wildcard&&pt(t,r))}else return!0}function pi(r,e,t,i,s){let n=typeof s.method=="string"?r[s.method]:s.method,l=s.property;n?n.call(r,r.__data[l],i[l]):s.dynamicFn||console.warn("observer method `"+s.method+"` not defined")}function ur(r,e,t,i,s){let n=r[P.NOTIFY],l,a=We++;for(let d in e)e[d]&&(n&&hr(r,n,a,d,t,i,s)||s&&pr(r,d,t))&&(l=!0);let o;l&&(o=r.__dataHost)&&o._invalidateProperties&&o._invalidateProperties()}function pr(r,e,t){let i=ye(e);if(i!==e){let s=St(i)+"-changed";return Yi(r,s,t[e],e),!0}return!1}function Yi(r,e,t,i){let s={value:t,queueProperty:!0};i&&(s.path=i),be(r).dispatchEvent(new CustomEvent(e,{detail:s}))}function fr(r,e,t,i,s,n){let a=(n?ye(e):e)!=e?e:null,o=a?j(r,a):r.__data[e];a&&o===void 0&&(o=t[e]),Yi(r,s.eventName,o,a)}function mr(r,e,t,i,s){let n,l=r.detail,a=l&&l.path;a?(i=ft(t,i,a),n=l&&l.value):n=r.currentTarget[t],n=s?!n:n,(!e[P.READ_ONLY]||!e[P.READ_ONLY][i])&&e._setPendingPropertyOrPath(i,n,!0,!!a)&&(!l||!l.queueProperty)&&e._invalidateProperties()}function gr(r,e,t,i,s){let n=r.__data[e];ut&&(n=ut(n,s.attrName,"attribute",r)),r._propertyToAttribute(e,s.attrName,n)}function br(r,e,t,i){let s=r[P.COMPUTE];if(s)if(Fs){We++;const n=yr(r),l=[];for(let o in e)fi(o,s,l,n,i);let a;for(;a=l.shift();)Wi(r,"",e,t,a)&&fi(a.methodInfo,s,l,n,i);Object.assign(t,r.__dataOld),Object.assign(e,r.__dataPending),r.__dataPending=null}else{let n=e;for(;Be(r,s,n,t,i);)Object.assign(t,r.__dataOld),Object.assign(e,r.__dataPending),n=r.__dataPending,r.__dataPending=null}}const _r=(r,e,t)=>{let i=0,s=e.length-1,n=-1;for(;i<=s;){const l=i+s>>1,a=t.get(e[l].methodInfo)-t.get(r.methodInfo);if(a<0)i=l+1;else if(a>0)s=l-1;else{n=l;break}}n<0&&(n=s+1),e.splice(n,0,r)},fi=(r,e,t,i,s)=>{const n=s?ye(r):r,l=e[n];if(l)for(let a=0;a<l.length;a++){const o=l[a];o.info.lastRun!==We&&(!s||Qt(r,o.trigger))&&(o.info.lastRun=We,_r(o.info,t,i))}};function yr(r){let e=r.constructor.__orderedComputedDeps;if(!e){e=new Map;const t=r[P.COMPUTE];let{counts:i,ready:s,total:n}=vr(r),l;for(;l=s.shift();){e.set(l,e.size);const a=t[l];a&&a.forEach(o=>{const d=o.info.methodInfo;--n,--i[d]===0&&s.push(d)})}n!==0&&console.warn(`Computed graph for ${r.localName} incomplete; circular?`),r.constructor.__orderedComputedDeps=e}return e}function vr(r){const e=r[Gi],t={},i=r[P.COMPUTE],s=[];let n=0;for(let l in e){const a=e[l];n+=t[l]=a.args.filter(o=>!o.literal).length+(a.dynamicFn?1:0)}for(let l in i)e[l]||s.push(l);return{counts:t,ready:s,total:n}}function Wi(r,e,t,i,s){let n=zt(r,e,t,i,s);if(n===Xe)return!1;let l=s.methodInfo;return r.__dataHasAccessor&&r.__dataHasAccessor[l]?r._setPendingProperty(l,n,!0):(r[l]=n,!1)}function Er(r,e,t){let i=r.__dataLinkedPaths;if(i){let s;for(let n in i){let l=i[n];pt(n,e)?(s=ft(n,l,e),r._setPendingPropertyOrPath(s,t,!0,!0)):pt(l,e)&&(s=ft(l,n,e),r._setPendingPropertyOrPath(s,t,!0,!0))}}}function Tt(r,e,t,i,s,n,l){t.bindings=t.bindings||[];let a={kind:i,target:s,parts:n,literal:l,isCompound:n.length!==1};if(t.bindings.push(a),Ar(a)){let{event:d,negate:c}=a.parts[0];a.listenerEvent=d||St(s)+"-changed",a.listenerNegate=c}let o=e.nodeInfoList.length;for(let d=0;d<a.parts.length;d++){let c=a.parts[d];c.compoundIndex=d,Sr(r,e,a,c,o)}}function Sr(r,e,t,i,s){if(!i.literal)if(t.kind==="attribute"&&t.target[0]==="-")console.warn("Cannot set attribute "+t.target+' because "-" is not a valid attribute starting character');else{let n=i.dependencies,l={index:s,binding:t,part:i,evaluator:r};for(let a=0;a<n.length;a++){let o=n[a];typeof o=="string"&&(o=Ji(o),o.wildcard=!0),r._addTemplatePropertyEffect(e,o.rootProperty,{fn:Cr,info:l,trigger:o})}}}function Cr(r,e,t,i,s,n,l){let a=l[s.index],o=s.binding,d=s.part;if(n&&d.source&&e.length>d.source.length&&o.kind=="property"&&!o.isCompound&&a.__isPropertyEffectsClient&&a.__dataHasAccessor&&a.__dataHasAccessor[o.target]){let c=t[e];e=ft(d.source,o.target,e),a._setPendingPropertyOrPath(e,c,!1,!0)&&r._enqueueClient(a)}else{let c=s.evaluator._evaluateBinding(r,d,e,t,i,n);c!==Xe&&wr(r,a,o,d,c)}}function wr(r,e,t,i,s){if(s=Ir(e,s,t,i),ut&&(s=ut(s,t.target,t.kind,e)),t.kind=="attribute")r._valueToNodeAttribute(e,s,t.target);else{let n=t.target;e.__isPropertyEffectsClient&&e.__dataHasAccessor&&e.__dataHasAccessor[n]?(!e[P.READ_ONLY]||!e[P.READ_ONLY][n])&&e._setPendingProperty(n,s)&&r._enqueueClient(e):r._setUnmanagedPropertyToNode(e,n,s)}}function Ir(r,e,t,i){if(t.isCompound){let s=r.__dataCompoundStorage[t.target];s[i.compoundIndex]=e,e=s.join("")}return t.kind!=="attribute"&&(t.target==="textContent"||t.target==="value"&&(r.localName==="input"||r.localName==="textarea"))&&(e=e??""),e}function Ar(r){return!!r.target&&r.kind!="attribute"&&r.kind!="text"&&!r.isCompound&&r.parts[0].mode==="{"}function Tr(r,e){let{nodeList:t,nodeInfoList:i}=e;if(i.length)for(let s=0;s<i.length;s++){let n=i[s],l=t[s],a=n.bindings;if(a)for(let o=0;o<a.length;o++){let d=a[o];Pr(l,d),Or(l,r,d)}l.__dataHost=r}}function Pr(r,e){if(e.isCompound){let t=r.__dataCompoundStorage||(r.__dataCompoundStorage={}),i=e.parts,s=new Array(i.length);for(let l=0;l<i.length;l++)s[l]=i[l].literal;let n=e.target;t[n]=s,e.literal&&e.kind=="property"&&(n==="className"&&(r=be(r)),r[n]=e.literal)}}function Or(r,e,t){if(t.listenerEvent){let i=t.parts[0];r.addEventListener(t.listenerEvent,function(s){mr(s,e,t.target,i.source,i.negate)})}}function mi(r,e,t,i,s,n){n=e.static||n&&(typeof n!="object"||n[e.methodName]);let l={methodName:e.methodName,args:e.args,methodInfo:s,dynamicFn:n};for(let a=0,o;a<e.args.length&&(o=e.args[a]);a++)o.literal||r._addPropertyEffect(o.rootProperty,t,{fn:i,info:l,trigger:o});return n&&r._addPropertyEffect(e.methodName,t,{fn:i,info:l}),l}function zt(r,e,t,i,s){let n=r._methodHost||r,l=n[s.methodName];if(l){let a=r._marshalArgs(s.args,e,t);return a===Xe?Xe:l.apply(n,a)}else s.dynamicFn||console.warn("method `"+s.methodName+"` not defined")}const kr=[],Xi="(?:[a-zA-Z_$][\\w.:$\\-*]*)",xr="(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)",Lr="(?:'(?:[^'\\\\]|\\\\.)*')",Dr='(?:"(?:[^"\\\\]|\\\\.)*")',Nr="(?:"+Lr+"|"+Dr+")",gi="(?:("+Xi+"|"+xr+"|"+Nr+")\\s*)",Fr="(?:"+gi+"(?:,\\s*"+gi+")*)",Mr="(?:\\(\\s*(?:"+Fr+"?)\\)\\s*)",Hr="("+Xi+"\\s*"+Mr+"?)",Br="(\\[\\[|{{)\\s*",Rr="(?:]]|}})",qr="(?:(!)\\s*)?",Ur=Br+qr+Hr+Rr,bi=new RegExp(Ur,"g");function _i(r){let e="";for(let t=0;t<r.length;t++){let i=r[t].literal;e+=i||""}return e}function Pt(r){let e=r.match(/([^\s]+?)\(([\s\S]*)\)/);if(e){let i={methodName:e[1],static:!0,args:kr};if(e[2].trim()){let s=e[2].replace(/\\,/g,"&comma;").split(",");return Vr(s,i)}else return i}return null}function Vr(r,e){return e.args=r.map(function(t){let i=Ji(t);return i.literal||(e.static=!1),i},this),e}function Ji(r){let e=r.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),t={name:e,value:"",literal:!1},i=e[0];switch(i==="-"&&(i=e[1]),i>="0"&&i<="9"&&(i="#"),i){case"'":case'"':t.value=e.slice(1,-1),t.literal=!0;break;case"#":t.value=Number(e),t.literal=!0;break}return t.literal||(t.rootProperty=ye(e),t.structured=Vt(e),t.structured&&(t.wildcard=e.slice(-2)==".*",t.wildcard&&(t.name=e.slice(0,-2)))),t}function yi(r,e,t){let i=j(r,t);return i===void 0&&(i=e[t]),i}function Qi(r,e,t,i){const s={indexSplices:i};Ut&&!r._overrideLegacyUndefined&&(e.splices=s),r.notifyPath(t+".splices",s),r.notifyPath(t+".length",e.length),Ut&&!r._overrideLegacyUndefined&&(s.indexSplices=[])}function Ne(r,e,t,i,s,n){Qi(r,e,t,[{index:i,addedCount:s,removed:n,object:e,type:"splice"}])}function jr(r){return r[0].toUpperCase()+r.substring(1)}const zr=Oe(r=>{const e=dr(er(r));class t extends e{constructor(){super(),this.__isPropertyEffectsClient=!0,this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__computeInfo,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__templateInfo,this._overrideLegacyUndefined}get PROPERTY_EFFECT_TYPES(){return P}_initializeProperties(){super._initializeProperties(),this._registerHost(),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_registerHost(){if(Fe.length){let s=Fe[Fe.length-1];s._enqueueClient(this),this.__dataHost=s}}_initializeProtoProperties(s){this.__data=Object.create(s),this.__dataPending=Object.create(s),this.__dataOld={}}_initializeInstanceProperties(s){let n=this[P.READ_ONLY];for(let l in s)(!n||!n[l])&&(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[l]=this.__dataPending[l]=s[l])}_addPropertyEffect(s,n,l){this._createPropertyAccessor(s,n==P.READ_ONLY);let a=At(this,n,!0)[s];a||(a=this[n][s]=[]),a.push(l)}_removePropertyEffect(s,n,l){let a=At(this,n,!0)[s],o=a.indexOf(l);o>=0&&a.splice(o,1)}_hasPropertyEffect(s,n){let l=this[n];return!!(l&&l[s])}_hasReadOnlyEffect(s){return this._hasPropertyEffect(s,P.READ_ONLY)}_hasNotifyEffect(s){return this._hasPropertyEffect(s,P.NOTIFY)}_hasReflectEffect(s){return this._hasPropertyEffect(s,P.REFLECT)}_hasComputedEffect(s){return this._hasPropertyEffect(s,P.COMPUTE)}_setPendingPropertyOrPath(s,n,l,a){if(a||ye(Array.isArray(s)?s[0]:s)!==s){if(!a){let o=j(this,s);if(s=ci(this,s,n),!s||!super._shouldPropertyChange(s,n,o))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(s,n,l))return Er(this,s,n),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[s])return this._setPendingProperty(s,n,l);this[s]=n}return!1}_setUnmanagedPropertyToNode(s,n,l){(l!==s[n]||typeof l=="object")&&(n==="className"&&(s=be(s)),s[n]=l)}_setPendingProperty(s,n,l){let a=this.__dataHasPaths&&Vt(s),o=a?this.__dataTemp:this.__data;return this._shouldPropertyChange(s,n,o[s])?(this.__dataPending||(this.__dataPending={},this.__dataOld={}),s in this.__dataOld||(this.__dataOld[s]=this.__data[s]),a?this.__dataTemp[s]=n:this.__data[s]=n,this.__dataPending[s]=n,(a||this[P.NOTIFY]&&this[P.NOTIFY][s])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[s]=l),!0):!1}_setProperty(s,n){this._setPendingProperty(s,n,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(s){this.__dataPendingClients=this.__dataPendingClients||[],s!==this&&this.__dataPendingClients.push(s)}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let s=this.__dataPendingClients;if(s){this.__dataPendingClients=null;for(let n=0;n<s.length;n++){let l=s[n];l.__dataEnabled?l.__dataPending&&l._flushProperties():l._enableProperties()}}}_readyClients(){this.__enableOrFlushClients()}setProperties(s,n){for(let l in s)(n||!this[P.READ_ONLY]||!this[P.READ_ONLY][l])&&this._setPendingPropertyOrPath(l,s[l],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(s,n,l){let a=this.__dataHasPaths;this.__dataHasPaths=!1;let o;br(this,n,l,a),o=this.__dataToNotify,this.__dataToNotify=null,this._propagatePropertyChanges(n,l,a),this._flushClients(),Be(this,this[P.REFLECT],n,l,a),Be(this,this[P.OBSERVE],n,l,a),o&&ur(this,o,n,l,a),this.__dataCounter==1&&(this.__dataTemp={})}_propagatePropertyChanges(s,n,l){this[P.PROPAGATE]&&Be(this,this[P.PROPAGATE],s,n,l),this.__templateInfo&&this._runEffectsForTemplate(this.__templateInfo,s,n,l)}_runEffectsForTemplate(s,n,l,a){const o=(d,c)=>{Be(this,s.propertyEffects,d,l,c,s.nodeList);for(let h=s.firstChild;h;h=h.nextSibling)this._runEffectsForTemplate(h,d,l,c)};s.runEffects?s.runEffects(o,n,a):o(n,a)}linkPaths(s,n){s=He(s),n=He(n),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[s]=n}unlinkPaths(s){s=He(s),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[s]}notifySplices(s,n){let l={path:""},a=j(this,s,l);Qi(this,a,l.path,n)}get(s,n){return j(n||this,s)}set(s,n,l){l?ci(l,s,n):(!this[P.READ_ONLY]||!this[P.READ_ONLY][s])&&this._setPendingPropertyOrPath(s,n,!0)&&this._invalidateProperties()}push(s,...n){let l={path:""},a=j(this,s,l),o=a.length,d=a.push(...n);return n.length&&Ne(this,a,l.path,o,n.length,[]),d}pop(s){let n={path:""},l=j(this,s,n),a=!!l.length,o=l.pop();return a&&Ne(this,l,n.path,l.length,0,[o]),o}splice(s,n,l,...a){let o={path:""},d=j(this,s,o);n<0?n=d.length-Math.floor(-n):n&&(n=Math.floor(n));let c;return arguments.length===2?c=d.splice(n):c=d.splice(n,l,...a),(a.length||c.length)&&Ne(this,d,o.path,n,a.length,c),c}shift(s){let n={path:""},l=j(this,s,n),a=!!l.length,o=l.shift();return a&&Ne(this,l,n.path,0,0,[o]),o}unshift(s,...n){let l={path:""},a=j(this,s,l),o=a.unshift(...n);return n.length&&Ne(this,a,l.path,0,n.length,[]),o}notifyPath(s,n){let l;if(arguments.length==1){let a={path:""};n=j(this,s,a),l=a.path}else Array.isArray(s)?l=He(s):l=s;this._setPendingPropertyOrPath(l,n,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(s,n){this._addPropertyEffect(s,P.READ_ONLY),n&&(this["_set"+jr(s)]=function(l){this._setProperty(s,l)})}_createPropertyObserver(s,n,l){let a={property:s,method:n,dynamicFn:!!l};this._addPropertyEffect(s,P.OBSERVE,{fn:pi,info:a,trigger:{name:s}}),l&&this._addPropertyEffect(n,P.OBSERVE,{fn:pi,info:a,trigger:{name:n}})}_createMethodObserver(s,n){let l=Pt(s);if(!l)throw new Error("Malformed observer expression '"+s+"'");mi(this,l,P.OBSERVE,zt,null,n)}_createNotifyingProperty(s){this._addPropertyEffect(s,P.NOTIFY,{fn:fr,info:{eventName:St(s)+"-changed",property:s}})}_createReflectedProperty(s){let n=this.constructor.attributeNameForProperty(s);n[0]==="-"?console.warn("Property "+s+" cannot be reflected to attribute "+n+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(s,P.REFLECT,{fn:gr,info:{attrName:n}})}_createComputedProperty(s,n,l){let a=Pt(n);if(!a)throw new Error("Malformed computed expression '"+n+"'");const o=mi(this,a,P.COMPUTE,Wi,s,l);At(this,Gi)[s]=o}_marshalArgs(s,n,l){const a=this.__data,o=[];for(let d=0,c=s.length;d<c;d++){let{name:h,structured:f,wildcard:b,value:m,literal:u}=s[d];if(!u)if(b){const g=pt(h,n),_=yi(a,l,g?n:h);m={path:g?n:h,value:_,base:g?j(a,h):_}}else m=f?yi(a,l,h):a[h];if(Ut&&!this._overrideLegacyUndefined&&m===void 0&&s.length>1)return Xe;o[d]=m}return o}static addPropertyEffect(s,n,l){this.prototype._addPropertyEffect(s,n,l)}static createPropertyObserver(s,n,l){this.prototype._createPropertyObserver(s,n,l)}static createMethodObserver(s,n){this.prototype._createMethodObserver(s,n)}static createNotifyingProperty(s){this.prototype._createNotifyingProperty(s)}static createReadOnlyProperty(s,n){this.prototype._createReadOnlyProperty(s,n)}static createReflectedProperty(s){this.prototype._createReflectedProperty(s)}static createComputedProperty(s,n,l){this.prototype._createComputedProperty(s,n,l)}static bindTemplate(s){return this.prototype._bindTemplate(s)}_bindTemplate(s,n){let l=this.constructor._parseTemplate(s),a=this.__preBoundTemplateInfo==l;if(!a)for(let o in l.propertyEffects)this._createPropertyAccessor(o);if(n)if(l=Object.create(l),l.wasPreBound=a,!this.__templateInfo)this.__templateInfo=l;else{const o=s._parentTemplateInfo||this.__templateInfo,d=o.lastChild;l.parent=o,o.lastChild=l,l.previousSibling=d,d?d.nextSibling=l:o.firstChild=l}else this.__preBoundTemplateInfo=l;return l}static _addTemplatePropertyEffect(s,n,l){let a=s.hostProps=s.hostProps||{};a[n]=!0;let o=s.propertyEffects=s.propertyEffects||{};(o[n]=o[n]||[]).push(l)}_stampTemplate(s,n){n=n||this._bindTemplate(s,!0),Fe.push(this);let l=super._stampTemplate(s,n);if(Fe.pop(),n.nodeList=l.nodeList,!n.wasPreBound){let a=n.childNodes=[];for(let o=l.firstChild;o;o=o.nextSibling)a.push(o)}return l.templateInfo=n,Tr(this,n),this.__dataClientsReady&&(this._runEffectsForTemplate(n,this.__data,null,!1),this._flushClients()),l}_removeBoundDom(s){const n=s.templateInfo,{previousSibling:l,nextSibling:a,parent:o}=n;l?l.nextSibling=a:o&&(o.firstChild=a),a?a.previousSibling=l:o&&(o.lastChild=l),n.nextSibling=n.previousSibling=null;let d=n.childNodes;for(let c=0;c<d.length;c++){let h=d[c];be(be(h).parentNode).removeChild(h)}}static _parseTemplateNode(s,n,l){let a=e._parseTemplateNode.call(this,s,n,l);if(s.nodeType===Node.TEXT_NODE){let o=this._parseBindings(s.textContent,n);o&&(s.textContent=_i(o)||" ",Tt(this,n,l,"text","textContent",o),a=!0)}return a}static _parseTemplateNodeAttribute(s,n,l,a,o){let d=this._parseBindings(o,n);if(d){let c=a,h="property";cr.test(a)?h="attribute":a[a.length-1]=="$"&&(a=a.slice(0,-1),h="attribute");let f=_i(d);return f&&h=="attribute"&&(a=="class"&&s.hasAttribute("class")&&(f+=" "+s.getAttribute(a)),s.setAttribute(a,f)),h=="attribute"&&c=="disable-upgrade$"&&s.setAttribute(a,""),s.localName==="input"&&c==="value"&&s.setAttribute(c,""),s.removeAttribute(c),h==="property"&&(a=Ui(a)),Tt(this,n,l,h,a,d,f),!0}else return e._parseTemplateNodeAttribute.call(this,s,n,l,a,o)}static _parseTemplateNestedTemplate(s,n,l){let a=e._parseTemplateNestedTemplate.call(this,s,n,l);const o=s.parentNode,d=l.templateInfo,c=o.localName==="dom-if",h=o.localName==="dom-repeat";ni&&(c||h)&&(o.removeChild(s),l=l.parentInfo,l.templateInfo=d,l.noted=!0,a=!1);let f=d.hostProps;if(Ms&&c)f&&(n.hostProps=Object.assign(n.hostProps||{},f),ni||(l.parentInfo.noted=!0));else{let b="{";for(let m in f){let u=[{mode:b,source:m,dependencies:[m],hostProp:!0}];Tt(this,n,l,"property","_host_"+m,u)}}return a}static _parseBindings(s,n){let l=[],a=0,o;for(;(o=bi.exec(s))!==null;){o.index>a&&l.push({literal:s.slice(a,o.index)});let d=o[1][0],c=!!o[2],h=o[3].trim(),f=!1,b="",m=-1;d=="{"&&(m=h.indexOf("::"))>0&&(b=h.substring(m+2),h=h.substring(0,m),f=!0);let u=Pt(h),g=[];if(u){let{args:_,methodName:C}=u;for(let O=0;O<_.length;O++){let M=_[O];M.literal||g.push(M)}let I=n.dynamicFns;(I&&I[C]||u.static)&&(g.push(C),u.dynamicFn=!0)}else g.push(h);l.push({source:h,mode:d,negate:c,customEvent:f,signature:u,dependencies:g,event:b}),a=bi.lastIndex}if(a&&a<s.length){let d=s.substring(a);d&&l.push({literal:d})}return l.length?l:null}static _evaluateBinding(s,n,l,a,o,d){let c;return n.signature?c=zt(s,l,a,o,n.signature):l!=n.source?c=j(s,n.source):d&&Vt(l)?c=j(s,l):c=s.__data[l],n.negate&&(c=!c),c}}return t}),Fe=[];/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*//**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function $r(r){const e={};for(let t in r){const i=r[t];e[t]=typeof i=="function"?{type:i}:i}return e}const Kr=Oe(r=>{const e=zi(r);function t(n){const l=Object.getPrototypeOf(n);return l.prototype instanceof s?l:null}function i(n){if(!n.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",n))){let l=null;if(n.hasOwnProperty(JSCompiler_renameProperty("properties",n))){const a=n.properties;a&&(l=$r(a))}n.__ownProperties=l}return n.__ownProperties}class s extends e{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){this.prototype;const l=this._properties;this.__observedAttributes=l?Object.keys(l).map(a=>this.prototype._addPropertyToAttributeMap(a)):[]}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const l=t(this);l&&l.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const l=i(this);l&&this.createProperties(l)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const l=t(this);this.__properties=Object.assign({},l&&l._properties,i(this))}return this.__properties}static typeForProperty(l){const a=this._properties[l];return a&&a.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return s});/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */const Gr="3.4.1",vi=window.ShadyCSS&&window.ShadyCSS.cssBuild,Yr=Oe(r=>{const e=Kr(zr(r));function t(o){if(!o.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",o))){o.__propertyDefaults=null;let d=o._properties;for(let c in d){let h=d[c];"value"in h&&(o.__propertyDefaults=o.__propertyDefaults||{},o.__propertyDefaults[c]=h)}}return o.__propertyDefaults}function i(o){return o.hasOwnProperty(JSCompiler_renameProperty("__ownObservers",o))||(o.__ownObservers=o.hasOwnProperty(JSCompiler_renameProperty("observers",o))?o.observers:null),o.__ownObservers}function s(o,d,c,h){c.computed&&(c.readOnly=!0),c.computed&&(o._hasReadOnlyEffect(d)?console.warn(`Cannot redefine computed property '${d}'.`):o._createComputedProperty(d,c.computed,h)),c.readOnly&&!o._hasReadOnlyEffect(d)?o._createReadOnlyProperty(d,!c.computed):c.readOnly===!1&&o._hasReadOnlyEffect(d)&&console.warn(`Cannot make readOnly property '${d}' non-readOnly.`),c.reflectToAttribute&&!o._hasReflectEffect(d)?o._createReflectedProperty(d):c.reflectToAttribute===!1&&o._hasReflectEffect(d)&&console.warn(`Cannot make reflected property '${d}' non-reflected.`),c.notify&&!o._hasNotifyEffect(d)?o._createNotifyingProperty(d):c.notify===!1&&o._hasNotifyEffect(d)&&console.warn(`Cannot make notify property '${d}' non-notify.`),c.observer&&o._createPropertyObserver(d,c.observer,h[c.observer]),o._addPropertyToAttributeMap(d)}function n(o,d,c,h){if(!vi){const f=d.content.querySelectorAll("style"),b=Bi(d),m=zs(c),u=d.content.firstElementChild;for(let _=0;_<m.length;_++){let C=m[_];C.textContent=o._processStyleText(C.textContent,h),d.content.insertBefore(C,u)}let g=0;for(let _=0;_<b.length;_++){let C=b[_],I=f[g];I!==C?(C=C.cloneNode(!0),I.parentNode.insertBefore(C,I)):g++,C.textContent=o._processStyleText(C.textContent,h)}}if(window.ShadyCSS&&window.ShadyCSS.prepareTemplate(d,c),Hs&&vi&&Os){const f=d.content.querySelectorAll("style");if(f){let b="";Array.from(f).forEach(m=>{b+=m.textContent,m.parentNode.removeChild(m)}),o._styleSheet=new CSSStyleSheet,o._styleSheet.replaceSync(b)}}}function l(o){let d=null;if(o&&(!qt||xs)&&(d=Ye.import(o,"template"),qt&&!d))throw new Error(`strictTemplatePolicy: expecting dom-module or null template for ${o}`);return d}class a extends e{static get polymerElementVersion(){return Gr}static _finalizeClass(){e._finalizeClass.call(this);const d=i(this);d&&this.createObservers(d,this._properties),this._prepareTemplate()}static _prepareTemplate(){let d=this.template;d&&(typeof d=="string"?(console.error("template getter must return HTMLTemplateElement"),d=null):Ls||(d=d.cloneNode(!0))),this.prototype._template=d}static createProperties(d){for(let c in d)s(this.prototype,c,d[c],d)}static createObservers(d,c){const h=this.prototype;for(let f=0;f<d.length;f++)h._createMethodObserver(d[f],c)}static get template(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_template",this))){const d=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:void 0;this._template=d!==void 0?d:this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&l(this.is)||Object.getPrototypeOf(this.prototype).constructor.template}return this._template}static set template(d){this._template=d}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const d=this.importMeta;if(d)this._importPath=Xt(d.url);else{const c=Ye.import(this.is);this._importPath=c&&c.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=ks,this.importPath=this.constructor.importPath;let d=t(this.constructor);if(d)for(let c in d){let h=d[c];if(this._canApplyPropertyDefault(c)){let f=typeof h.value=="function"?h.value.call(this):h.value;this._hasAccessor(c)?this._setPendingProperty(c,f,!0):this[c]=f}}}_canApplyPropertyDefault(d){return!this.hasOwnProperty(d)}static _processStyleText(d,c){return Wt(d,c)}static _finalizeTemplate(d){const c=this.prototype._template;if(c&&!c.__polymerFinalized){c.__polymerFinalized=!0;const h=this.importPath,f=h?Ve(h):"";n(this,c,d,f),this.prototype._bindTemplate(c)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(d){const c=be(this);if(c.attachShadow)return d?(c.shadowRoot||(c.attachShadow({mode:"open",shadyUpgradeFragment:d}),c.shadowRoot.appendChild(d),this.constructor._styleSheet&&(c.shadowRoot.adoptedStyleSheets=[this.constructor._styleSheet])),Ns&&window.ShadyDOM&&window.ShadyDOM.flushInitial(c.shadowRoot),c.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(d){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,d)}resolveUrl(d,c){return!c&&this.importPath&&(c=Ve(this.importPath)),Ve(d,c)}static _parseTemplateContent(d,c,h){return c.dynamicFns=c.dynamicFns||this._properties,e._parseTemplateContent.call(this,d,c,h)}static _addTemplatePropertyEffect(d,c,h){return Ds&&!(c in this._properties)&&!(h.info.part.signature&&h.info.part.signature.static)&&!h.info.part.hostProp&&!d.nestedTemplate&&console.warn(`Property '${c}' used in template but not declared in 'properties'; attribute will not be observed.`),e._addTemplatePropertyEffect.call(this,d,c,h)}}return a});/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const D=Yr(HTMLElement);var Wr=/^(?:submit|button|image|reset|file)$/i,Xr=/^(?:input|select|textarea|keygen)/i,Zi=/(\[[^\[\]]*\])/g;function Jr(r,e){typeof e!="object"?e={hash:!!e}:e.hash===void 0&&(e.hash=!0);for(var t=e.hash?{}:"",i=e.serializer||(e.hash?Zr:en),s=r&&r.elements?r.elements:[],n=Object.create(null),l=0;l<s.length;++l){var a=s[l];if(!(!e.disabled&&a.disabled||!a.name)&&!(!Xr.test(a.nodeName)||Wr.test(a.type))){var o=a.name,d=a.value;if((a.type==="checkbox"||a.type==="radio")&&!a.checked&&(d=void 0),e.empty){if(a.type==="checkbox"&&!a.checked&&(d=""),a.type==="radio"&&(!n[a.name]&&!a.checked?n[a.name]=!1:a.checked&&(n[a.name]=!0)),d==null&&a.type=="radio")continue}else if(!d)continue;if(a.type==="select-multiple"){d=[];for(var c=a.options,h=!1,f=0;f<c.length;++f){var b=c[f],m=e.empty&&!b.value,u=b.value||m;b.selected&&u&&(h=!0,e.hash&&o.slice(o.length-2)!=="[]"?t=i(t,o+"[]",b.value):t=i(t,o,b.value))}!h&&e.empty&&(t=i(t,o,""));continue}t=i(t,o,d)}}if(e.empty)for(var o in n)n[o]||(t=i(t,o,""));return t}function Qr(r){var e=[],t=/^([^\[\]]*)/,i=new RegExp(Zi),s=t.exec(r);for(s[1]&&e.push(s[1]);(s=i.exec(r))!==null;)e.push(s[1]);return e}function Se(r,e,t){if(e.length===0)return r=t,r;var i=e.shift(),s=i.match(/^\[(.+?)\]$/);if(i==="[]")return r=r||[],Array.isArray(r)?r.push(Se(null,e,t)):(r._values=r._values||[],r._values.push(Se(null,e,t))),r;if(!s)r[i]=Se(r[i],e,t);else{var n=s[1],l=+n;isNaN(l)?(r=r||{},r[n]=Se(r[n],e,t)):(r=r||[],r[l]=Se(r[l],e,t))}return r}function Zr(r,e,t){var i=e.match(Zi);if(i){var s=Qr(e);Se(r,s,t)}else{var n=r[e];n?(Array.isArray(n)||(r[e]=[n]),r[e].push(t)):r[e]=t}return r}function en(r,e,t){return t=t.replace(/(\r)?\n/g,`\r
`),t=encodeURIComponent(t),t=t.replace(/%20/g,"+"),r+(r?"&":"")+encodeURIComponent(e)+"="+t}var tn=Jr;const Ei=Ni(tn),sn=(r,e)=>{const t=document.createDocumentFragment(),i=document.createElement("div");return i.innerHTML=r,t.appendChild(i),t.querySelector(e)},it={rgbArrayFromHexValue:r=>{if(r.length==4){let e=r.substring(1).split();r="#",e.forEach(t=>{r+=t+t})}return r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,i,s)=>"#"+t+t+i+i+s+s).substring(1).match(/.{2}/g).map(e=>parseInt(e,16))},rgbArrayFromRgbValue:r=>r.substring(4).split(", "),isNearlyWhiteColor:r=>{let e=252;for(var t=0;t<3;t++)if(parseInt(r[t])<e)return!1;return!0}};class rn extends D{static get is(){return"exceed-color-input"}isHexValueForNearlyWhiteColor(e){return it.isNearlyWhiteColor(it.rgbArrayFromHexValue(e))}isRgbValueForNearlyWhiteColor(e){return it.isNearlyWhiteColor(it.rgbArrayFromRgbValue(e))}ensureHexFormat(){this.input.value.length&&this.input.value.indexOf("#")!=0&&(this.input.value="#"+this.input.value)}hasValidHexValue(){let e=this.input.value;return e.length==7?/^#[0-9A-F]{6}$/i.test(e):e.length==4?/^#[0-9A-F]{3}$/i.test(e):!1}updateSwatch(){this.swatch.classList.remove("colorinput__swatch--invalid"),this.swatch.classList.remove("colorinput__swatch--light"),this.ensureHexFormat(),this.hasValidHexValue()?(this.swatch.style.backgroundColor=this.input.value,this.isHexValueForNearlyWhiteColor(this.input.value)&&this.swatch.classList.add("colorinput__swatch--light")):this.input.value.length?this.swatch.classList.add("colorinput__swatch--invalid"):this.swatch.style.removeProperty("background-color")}init(){this.input=this.querySelector(".colorinput__input"),this.swatch=this.querySelector(".colorinput__swatch"),this.input.addEventListener("input",()=>{this.updateSwatch()}),this.isRgbValueForNearlyWhiteColor(window.getComputedStyle(this.swatch).backgroundColor)&&this.swatch.classList.add("colorinput__swatch--light")}connectedCallback(){super.connectedCallback(),this.init()}}customElements.define("exceed-color-input",rn);const nn=(r,e)=>{let t,i,s,n,l,a,o=null;const d=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not(.hidden)',"select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed",'*[tabindex="0"]',"*[contenteditable]"].join(", "),c=()=>{t.removeEventListener("transitionend",c),typeof e.focus=="function"&&e.focus()},h=m=>m?window.getComputedStyle(m).display==="none"?!1:h(m.parentElement):!0,f=()=>o.filter(h),b=(m,u)=>{const g=f();if(u.key==="Tab"){let _=g.indexOf(document.activeElement);o.length>0&&!m.contains(document.activeElement)?g[0].focus():u.shiftKey?_===0&&(g.at(-1).focus(),u.preventDefault()):_===g.length-1&&(g[0].focus(),u.preventDefault())}};if(o=Array.from(r.querySelectorAll(d)),e=e||document.activeElement&&r.contains(document.activeElement)||o.length>0&&f()[0],i=window.getComputedStyle(r),s=i.getPropertyValue("transition-duration"),n=s&&s.split(",").some(function(m){return m&&window.parseInt(m)!==0}),l=i.getPropertyValue("transition-delay"),a=l&&l.split(",").some(function(m){return m&&window.parseInt(m)!==0}),n||a)return t=r,!0;if(e&&(t&&document.body.style.transition!=="undefined"?t.addEventListener("transitionend",c):typeof e.focus=="function"&&e.focus()),o.length>0){let m=b.bind(void 0,r);return document.addEventListener("keydown",m),{boundTabKeydownHandler:m}}return{}},ln=(r,e)=>{e&&document.removeEventListener("keydown",e),r&&r.focus&&r.focus()};class an extends D{static get properties(){return{openClass:{type:String,value:"modal--open"},visibleClass:{type:String,value:"modal--visible"},isOpen:{type:Boolean,value:!1,observer:"handleAria"},transitionTime:{type:Number,value:250},bodyFreezeClass:{type:String,value:"body--noscroll"},preserveOnClose:{type:Boolean,value:!1},checkFormOnClose:{type:Boolean,value:!1},updateUrl:{type:String,value:""},openerModal:{type:String,value:""},inhibitHashChange:{type:Boolean,value:!1}}}static get is(){return"exceed-modal"}isEventForThisDialog(e){return!e||!e.triggerTarget?!1:e.triggerTarget===this.id}handleAria(e){const t="aria-hidden";e?this.setAttribute(t,"false"):this.setAttribute(t,"true")}getScrollbarWidth(){const e=window.innerWidth-document.body.clientWidth;if(e!=0)return e+"px"}doModalOpen(e){this._modalTriggerEl=document.activeElement,document.body.style.marginRight=this.getScrollbarWidth(),document.body.classList.add(this.bodyFreezeClass),this.classList.add(this.openClass),this.offsetWidth,this.classList.add(this.visibleClass),this.isOpen=!0,e||window.location.hash.substring(1)!==this.id&&(window.location.hash="#"+this.id),this._modalTriggerEl&&this._modalTriggerEl.focus(),this._boundTabKeydownHandler=nn(this).boundTabKeydownHandler,document.addEventListener("keydown",this._boundEscKeydownHandler);var t=document.getElementById("post_editor")||document.getElementById("catalog-section-markdown-editor");t&&ws(t)}doModalClose(e){if(this.isOpen){if(this.classList.remove(this.visibleClass),setTimeout(()=>{this.classList.remove(this.openClass),this.openerModal||(document.body.style.marginRight="",document.body.classList.remove(this.bodyFreezeClass))},this.transitionTime),!e){let t=this.openerModal?"#"+this.openerModal:"";history.pushState("",document.title,window.location.pathname+t+window.location.search)}this.isOpen=!1,ln(this._modalTriggerEl,this._boundTabKeydownHandler),document.removeEventListener("keydown",this._boundEscKeydownHandler)}}doModalDestroy(){this.parentNode&&setTimeout(()=>{this.parentNode&&this.parentNode.removeChild(this)},this.transitionTime)}openModal(){this.doModalOpen(this.inhibitHashChange)}closeModal(){if(this.preserveOnClose)this.doModalClose();else{let e=()=>{if(this._formHasChanged){let t=document.getElementById(this.id+"-dialog");t.dispatchEvent(new CustomEvent("show.dialog",{detail:{trigger:null}})),document.removeEventListener("keydown",this._boundEscKeydownHandler),t.addEventListener("hide.dialog",()=>{document.addEventListener("keydown",this._boundEscKeydownHandler)})}else this.doModalClose(),this.doModalDestroy()};if(this.checkFormOnClose){let t=()=>{setTimeout(()=>{this._formWasChecked?e():t()},20)};t()}else e()}}destroyModal(){this.doModalClose(),this.doModalDestroy()}listenToEventBus(){this._modalEventSubscriber=v.subscribe(y.modal,(e,t)=>{this.isEventForThisDialog(t)&&(e===y.modal_open?this.openModal():e===y.modal_close?this.closeModal():e===y.modal_destroy&&this.destroyModal())})}initFormListener(){this._formHasChanged=!1,this.preserveOnClose||v.subscribe(y.form,(e,t)=>{e===y.form_change&&(t.hasChanged&&t.formId&&this.querySelector("#"+t.formId)?this._formHasChanged=!0:this._formHasChanged=!1,this.checkFormOnClose&&this.querySelector("#"+t.formId)&&(this._formWasChecked=!0))})}openModalMatchingHash(){const e=window.location.hash.substring(1);e?e===this.id?this.parentElement&&!this.isOpen&&this.doModalOpen(!0):e==this.openerModal&&this.doModalClose(!0):this.doModalClose(!0)}handleHistoryEvents(){window.addEventListener("hashchange",()=>{this.openModalMatchingHash()})}escKeydownHandler(e){if(this.isOpen&&(e.key==="Escape"||e.key==="Esc"||e.key===27)){var t=y.modal_close;v.publish(t,{triggerTarget:this.id})}}connectedCallback(){super.connectedCallback(),this._modalTriggerEl=null,this._boundTabKeydownHandler=null,this._boundEscKeydownHandler=this.escKeydownHandler.bind(this),this.initFormListener(),this.listenToEventBus(),this.handleHistoryEvents()}disconnectedCallback(){super.disconnectedCallback(),v.unsubscribe(this._modalEventSubscriber),this.preserveOnClose||v.unsubscribe(y.form_change),window.removeEventListener("hashchange",this.openModalMatchingHash)}constructor(){super()}}customElements.define("exceed-modal",an);class on extends D{static get is(){return"exceed-dependency-toggle"}static get properties(){return{trigger:{type:String,value:""},doDisable:{type:Boolean,value:!1},doHide:{type:Boolean,value:!1}}}enableElementOrGroupOfElements(e){e.removeAttribute("disabled"),e.querySelectorAll("input, textarea, select, button").forEach(t=>{t.removeAttribute("disabled")})}disableElementOrGroupOfElements(e){e.setAttribute("disabled","disabled"),e.querySelectorAll("input, textarea, select, button").forEach(t=>{t.setAttribute("disabled","disabled")})}isEventForThisDependencyToggle(e){return!e||!e.triggerTarget?!1:e.triggerTarget===this.id&&this.trigger.length&&(e.trigger==this.trigger||this.trigger.split(" ").includes(e.trigger))}listenToEventBus(){v.subscribe(y.dependency,(e,t)=>{this.isEventForThisDependencyToggle(t)&&(e===y.dependency_enable?this.enableDependency():e===y.dependency_disable?this.disableDependency():e===y.dependency_toggle?this.toggleDependency():e===y.dependency_based_on_value&&t["enabling-values"]?this.enableDependencyBasedOnValue(t):e===y.dependency_based_on_value&&this.enableDependencyIfValueExists(t))})}disableDependency(){this.doDisable&&this.targetEls.forEach(e=>{this.disableElementOrGroupOfElements(e)}),this.doHide&&this.setAttribute("hidden","hidden")}enableDependency(){this.doDisable&&this.targetEls.forEach(e=>{this.enableElementOrGroupOfElements(e)}),this.doHide&&this.removeAttribute("hidden")}toggleDependency(){this.doDisable&&this.targetEls.forEach(e=>{e.hasAttribute("disabled")?this.enableElementOrGroupOfElements(e):this.disableElementOrGroupOfElements(e)}),this.doHide&&(this.hasAttribute("hidden")?this.removeAttribute("hidden"):this.setAttribute("hidden","hidden"))}enableDependencyBasedOnValue(e){if(e["enabling-values"]==null||e.triggerValue==null)return;let t;typeof e["enabling-values"]=="string"?document.getElementById(e["enabling-values"])&&(t=JSON.parse(document.getElementById(e["enabling-values"]).getAttribute("data-enabling-values"))):t=e["enabling-values"];let i=!1;this.targetEls.forEach(s=>{Object.keys(t).includes(s.id)&&(t[s.id].includes(e.triggerValue)?(i=!0,this.doDisable&&this.enableElementOrGroupOfElements(s),this.doHide&&(s.parentElement.removeAttribute("hidden"),this.setAriaExpandedOnEnablingValue(e.triggerValue,t[s.id]))):(this.doDisable&&this.disableElementOrGroupOfElements(s),this.doHide&&s.parentElement.setAttribute("hidden","hidden")))}),i||this.setAriaExpandedOnEnablingValue(e.triggerValue)}setAriaExpandedOnEnablingValue(e,t=[]){let i=document.getElementById(this.trigger);if(i){let s=i.querySelector(`[value="${e}"]`);if(s){let n,l;s.getAttribute("type")==="radio"?n='[type="radio"]':s.tagName==="OPTION"&&(n="option"),l=i.querySelectorAll(n),l.forEach(a=>{a.hasAttribute("aria-expanded")&&(t.includes(a.value)?a.setAttribute("aria-expanded","true"):a.setAttribute("aria-expanded","false"))})}}}enableDependencyIfValueExists(e){e.triggerValue!=null&&(e.triggerValue.length?(this.doDisable&&this.targetEls.forEach(t=>{this.enableElementOrGroupOfElements(t)}),this.doHide&&this.removeAttribute("hidden")):(this.doDisable&&this.targetEls.forEach(t=>{this.disableElementOrGroupOfElements(t)}),this.doHide&&this.setAttribute("hidden","hidden")))}initElements(){this.targetEls=this.querySelectorAll('input:not([type="hidden"]), textarea, select, button, [data-target-input-holder]')}connectedCallback(){super.connectedCallback(),this.initElements(),this.listenToEventBus()}}customElements.define("exceed-dependency-toggle",on);class dn extends D{static get is(){return"exceed-filter-block"}static get properties(){return{filterName:{type:String,value:""},filterValues:{type:Array,value:[]},inputSelector:{type:String,value:"input[type=checkbox]"},inputsToUpdateId:{type:String,value:""},limitToOneFilter:{type:Boolean,value:!1},useArrayParams:{type:Boolean,value:!1},submitButtonEl:{type:String,value:""}}}limitCheckedInputs(e){this.limitToOneFilter&&this.querySelectorAll(`${this.inputSelector}:checked`).forEach(t=>{t!=e&&(t.checked=!1)})}setValues(){if(this.filterValues=this.useArrayParams?[]:null,this.querySelectorAll(`${this.inputSelector}:checked`).forEach(e=>{Array.isArray(this.filterValues)?this.filterValues.push(e.value):this.filterValues=e.value}),this.inputsToUpdateEl){let e=`[name="${this.filterName}"]`,t=this.inputsToUpdateEl.querySelectorAll(e);t.length&&t.forEach(i=>{i.value=this.filterValues})}}sendUpdateEvent(e){v.publish(y.filters_block,{filterName:this.filterName,filterValues:this.filterValues,isOnPageLoad:e})}bindCheckboxes(){this.querySelectorAll(this.inputSelector).forEach(e=>{e.addEventListener("click",t=>{this.limitCheckedInputs(t.target),this._submitButtonEl||(this.setValues(),this.sendUpdateEvent())})})}bindSubmitButton(){this._submitButtonEl&&this._submitButtonEl.addEventListener("click",e=>{this.setValues(),this.sendUpdateEvent()})}bindToEvents(){v.subscribe(y.filters_tags,(e,t)=>{t.filterName==this.filterName&&this.querySelectorAll(`${this.inputSelector}`).forEach(i=>{let s;Array.isArray(t.filterValues)?s=t.filterValues.includes(i.value):s=t.filterValues==i.value,s?i.checked=!0:i.checked=!1})})}updateViaUrl(){let t=he.parse(location.search,{arrayFormat:"bracket"})[this.filterName];this.filterValues=t||[],this.applyFilterValuesToCheckboxes(),setTimeout(()=>{this.sendUpdateEvent(!0)},50)}applyFilterValuesToCheckboxes(){this.querySelectorAll(this.inputSelector).forEach(e=>{Array.isArray(this.filterValues)?e.checked=this.filterValues.indexOf(e.value)>-1:e.checked=e.value==this.filterValues})}handleHistoryBack(){window.addEventListener("popstate",()=>{this.updateViaUrl()})}initComponent(){this._submitButtonEl=this.submitButtonEl.length?document.querySelector(this.submitButtonEl):null,this.inputsToUpdateEl=document.getElementById(this.inputsToUpdateId),this.bindCheckboxes(),this.bindSubmitButton(),this.bindToEvents()}connectedCallback(){super.connectedCallback(),this.initComponent(),this.updateViaUrl(),this.handleHistoryBack()}}customElements.define("exceed-filter-block",dn);class cn extends D{static get is(){return"exceed-filter-collector"}static get properties(){return{filterBlocksSelector:{type:String,value:"exceed-filter-block"},filters:{type:Object,value:{}},urlParams:{type:Array,value:[]}}}sendUpdateEvent(e){if(!e){let t=location.href.split("?")[0]+"?"+decodeURIComponent(he.stringify(this.filters,{arrayFormat:"bracket"}));location.href!=t&&history.pushState({path:t},"",t)}v.publish(y.filters_update,{urlParams:this.urlParams,isOnPageLoad:e})}updateFilters(e){let t;if(!e||!e.filterName)return!1;e.filterValues&&e.filterValues.length?this.filters[e.filterName]=e.filterValues:this.filters[e.filterName]&&delete this.filters[e.filterName],t=he.parse(location.search,{arrayFormat:"bracket"}),this.urlParams.forEach(i=>{this.filters[i]=t[i]}),this.sendUpdateEvent(e.isOnPageLoad)}bindToFilterBlocks(){v.subscribe(y.filters_block,(e,t)=>{this.updateFilters(t)}),v.subscribe(y.filters_tags,(e,t)=>{this.updateFilters(t)})}connectedCallback(){super.connectedCallback(),this.bindToFilterBlocks()}}customElements.define("exceed-filter-collector",cn);const Si="filtercontent--fadetransition",Ci="filtercontent--fadedin";class es extends D{static get is(){return"exceed-filter-content"}static get properties(){return{currentFilters:{type:Object,value:{}},xhrUrl:{type:String,value:""},xhrErrorText:{type:String,value:"The search was not successful."},counterSelector:{type:String,value:"[data-counter-text]"},applyFiltersOnLoad:{type:Boolean,value:!1}}}applyFilters(){let e=window.location.search.substring(1);if(e===this._previousSearch){window.dispatchEvent(new Event("filterContent.loaded"));return}this.currentFilters=he.parse(location.search,{arrayFormat:"bracket"}),this.xhrUrl.length&&this.currentFilters&&(this.applyFadeOut(),_e.get(this.xhrUrl,{params:this.currentFilters}).then(t=>{this.innerHTML=t.data,this.sendUpdateCounterEvent(),this.applyFadeIn(),Intellum&&Intellum.lazyload&&Intellum.lazyload.observe()}).catch(()=>{this.innerHTML=`<p>${this.xhrErrorText}</p>`}).finally(()=>{window.dispatchEvent(new Event("filterContent.loaded")),this._previousSearch=e}))}sendUpdateCounterEvent(){let e=this.querySelector(this.counterSelector);e&&v.publish(y.filters_counter,{counterText:e.dataset.counterText,counterA11yText:e.dataset.counterA11yText})}applyFadeIn(){this.classList.contains(Si)&&this.classList.add(Ci)}applyFadeOut(){this.classList.contains(Si)&&this.classList.remove(Ci)}bindToEvents(){v.subscribe(y.filters_update,(e,t)=>{if(!this.applyFiltersOnLoad&&t&&t.isOnPageLoad)return this._previousSearch=window.location.search.substring(1),!1;this.applyFilters(t)}),window.addEventListener("popstate",()=>{this.applyFilters()})}handleInitialFiltering(){this.applyFiltersOnLoad?this.applyFilters():(this._previousSearch=window.location.search.substring(1),this.applyFadeIn())}connectedCallback(){super.connectedCallback(),this.bindToEvents(),this.handleInitialFiltering()}}customElements.define("exceed-filter-content",es);class hn extends es{static get is(){return"exceed-filter-content-show-hide"}static get properties(){return{contentGroupsSelector:{type:String,value:"section"},contentItemsSelector:{type:String,value:"li"},hideItemsClass:{type:String,value:""},hideGroupsClass:{type:String,value:""},filteredEmptyAttribute:{type:String,value:"data-filtered-empty"},attributePrefix:{type:String,value:"data-"},filteredItemsObservableString:{type:String,value:""}}}matchedElementsForFilter(e,t,i){let s=[];return e=decodeURIComponent(e).split("[]")[0],i.forEach(n=>{let l=n.getAttribute(`${this.attributePrefix}${e}`),a,o;if(l)a=l.split(",");else return;Array.isArray(t)?o=t.find(d=>a.indexOf(d)>-1):o=a.indexOf(t)>-1,o&&s.push(n)}),s}toggleEmptyContainerIndicator(e,t){t?e.parentNode.setAttribute(this.filteredEmptyAttribute,!0):e.parentNode.removeAttribute(this.filteredEmptyAttribute)}applyShowHideFilters(){let e=this.querySelectorAll(this.contentGroupsSelector),t=this.querySelectorAll(this.contentItemsSelector),i=this.querySelector(".noresults"),s=[],n="",l=Object.keys(this.currentFilters);e.length&&this.hideGroupsClass.length&&e.forEach(a=>{a.classList.remove(this.hideGroupsClass)}),t.forEach(a=>{a.classList.add(this.hideItemsClass),this.toggleEmptyContainerIndicator(a,!0)}),l.length?l.forEach(a=>{let o=this.matchedElementsForFilter(a,this.currentFilters[a],t);s=s.concat(o)}):s=t,Object.keys(s).length?(s.forEach((a,o)=>{a.classList.remove(this.hideItemsClass),this.toggleEmptyContainerIndicator(a,!1),n+=o+"."}),i&&i.classList.add("noresults--hidden")):(e.length&&this.hideGroupsClass.length&&e.forEach(a=>{a.classList.add(this.hideGroupsClass)}),i&&i.classList.remove("noresults--hidden")),this.filteredItemsObservableString=n}setCurrentFilters(e){let t=he.parse(location.search);e=e||[],Object.keys(t).forEach(i=>{(!t[i]||e.indexOf(i)>-1)&&delete t[i]}),this.currentFilters=t}applyFilters(e){e=e||{},this.applyFadeIn(),this.setCurrentFilters(e.urlParams),this.applyShowHideFilters()}connectedCallback(){super.connectedCallback()}}customElements.define("exceed-filter-content-show-hide",hn);const Ct=["Down","ArrowDown"],wt=["Up","ArrowUp"],un=[...Ct,"Right","ArrowRight"],pn=[...wt,"Left","ArrowLeft"],fn=["Home","End"],mn=["PageUp","PageDown"],gn=[...un,...pn,...fn,...mn],bn=["Meta","Shift","CapsLock","Alt","Control"],ul=[...gn,...bn,"Escape"];class ts extends D{static get is(){return"exceed-simple-select"}static get properties(){return{selectOptionSelector:{type:String,value:".menulist__option"},triggerContentSelector:{type:String,value:".menulist__trigger .menulist__optionname"},selectContentSelector:{type:String,value:".menulist__listbox"},selectedValue:{type:String,value:null,observer:"applySelectedValue"},optionValueAttribute:{type:String,value:"data-option-value"},optionValueTextAttribute:{type:String,value:"data-option-text"},optionsVisibleClass:{type:String,value:"menulist__listbox--visible"},isOpen:{type:Boolean,value:!1,observer:"showHideOptions"},inputElSelector:{type:String,value:"input[type=hidden]"},disabled:{type:Boolean,value:!1,observer:"disableTrigger"},disabledClass:{type:String,value:"menulist__trigger--disabled"},isMenuOnly:{type:Boolean,value:!1},triggerElSelector:{type:String,value:".menulist__trigger"},updateMessage:{type:String,value:""},updateMessageId:{type:String,value:"select-update-message"}}}setFocus(e){e.focus(),this.selectContentEl.setAttribute("aria-activedescendant",e.id)}showHideOptions(e){let t;if(!this.selectContentEl)return!1;e?(this.selectContentEl.classList.add(this.optionsVisibleClass),this.triggerEl&&this.triggerEl.setAttribute("aria-expanded","true"),t=this.querySelector('[aria-selected="true"]')||this.selectOptions[0],t&&t.focus&&this.setFocus(t)):(this.selectContentEl.classList.remove(this.optionsVisibleClass),this.triggerEl&&this.triggerEl.setAttribute("aria-expanded","false"))}applySelectedValue(e){this.selectedValueEl&&(this.selectedValueEl.innerHTML=this.querySelector(`[${this.optionValueAttribute}="${e}"]`).innerText)}disableTrigger(e){if(!this.selectedValueEl)return!1;let t=this.selectedValueEl.parentNode;e?t.classList.add(this.disabledClass):t.classList.remove(this.disabledClass)}setUpdateMessage(e){if(!this.isMenuOnly&&this.updateMessage.length&&e&&e.length){let t=document.getElementById(this.updateMessageId);t&&(t.innerText=this.updateMessage.replace("{{PARAM}}",e))}}setValue(e,t){this.selectedValue=e,this.selectInputEl&&(this.selectInputEl.value=this.selectedValue,this.selectInputEl.dispatchEvent(new Event("change")),window.jQuery&&jQuery(this.selectInputEl).trigger("change")),this.selectOptions.forEach(i=>{i.getAttribute(this.optionValueAttribute)==e?i.setAttribute("aria-selected","true"):i.setAttribute("aria-selected","false")}),this.moveFocusToTrigger(),this.setUpdateMessage(t),v.publish(y.select_change)}moveFocusToTrigger(){this.triggerEl&&this.triggerEl.focus&&this.triggerEl.focus()}moveDown(e){let t;e.matches(this.selectOptionSelector)&&(t=this.selectOptions[this.selectOptions.indexOf(e)+1]),t&&t.focus&&this.setFocus(t)}moveUp(e){let t;e.matches(this.selectOptionSelector)&&(t=this.selectOptions[this.selectOptions.indexOf(e)-1]),t&&t.focus&&this.setFocus(t)}handleHomeAndEnd(e){let t;if(this.selectOptions.length)e==="home"?t=this.selectOptions[0]:t=this.selectOptions[this.selectOptions.length-1];else return;t&&this.setFocus(t)}handleEnter(e){if(this.isMenuOnly){if(event.target.dataset.href&&event.target.dataset.href.length){const{href:t,target:i="_self"}=e.dataset;t!=null&&t.length&&window.open(t,i)}}else e.matches(this.selectOptionSelector)&&this.setValue(e.getAttribute(this.optionValueAttribute),e.getAttribute(this.optionValueTextAttribute))}handleKeyboardEvents(e){["Escape","Tab"].indexOf(e.key)>-1?(this.isOpen=!1,this.moveFocusToTrigger()):wt.indexOf(e.key)>-1?(e.stopPropagation(),e.preventDefault(),this.moveUp(e.target)):Ct.indexOf(e.key)>-1?(e.stopPropagation(),e.preventDefault(),this.moveDown(e.target)):e.key==="Enter"?this.handleEnter(e.target):e.key==="Home"?(e.stopPropagation(),e.preventDefault(),this.handleHomeAndEnd("home")):e.key==="End"&&(e.stopPropagation(),e.preventDefault(),this.handleHomeAndEnd("end"))}bindKeyboardEvents(){this._boundKeyboardEventHandler=this.handleKeyboardEvents.bind(this),this.addEventListener("keydown",this._boundKeyboardEventHandler)}handleSelectedOption(e){this.disabled||this.setValue(e.currentTarget.closest('[role="option"]').getAttribute(this.optionValueAttribute),e.currentTarget.closest('[role="option"]').getAttribute(this.optionValueTextAttribute))}bindSelectOptions(){this._boundSelectOptionHandler=this.handleSelectedOption.bind(this),this._selectOptions=this.querySelectorAll(this.selectOptionSelector),this._selectOptions.forEach(e=>{e.addEventListener("click",this._boundSelectOptionHandler),this._elementEventBindings.push({element:e,eventType:"click",handler:this._boundSelectOptionHandler})})}handleClickOnElement(e){if(!this.disabled)if(this.selectContentEl.contains(e.target)){const t=e.target.closest('[role="option"]');if(this.isMenuOnly){if(t&&t.dataset.href&&t.dataset.href.length){const{href:i,target:s="_self"}=t.dataset;i!=null&&i.length&&window.open(i,s)}}else this.selectContentEl.contains(t)?this.isOpen=!this.isOpen:e.stopPropagation()}else this.isOpen=!this.isOpen}handleClickOnDocument(e){this.isOpen&&!this.contains(e.target)&&(this.isOpen=!1)}bindTriggers(){this._boundElementClickHandler=this.handleClickOnElement.bind(this),this.addEventListener("click",this.handleClickOnElement),this._boundDocumentClickHandler=this.handleClickOnDocument.bind(this),document.addEventListener("click",this._boundDocumentClickHandler)}unbindAllEvents(){this.removeEventListener("keydown",this._boundKeyboardEventHandler),this.removeEventListener("click",this._boundElementClickHandler),document.removeEventListener("click",this._boundDocumentClickHandler),this._elementEventBindings.forEach(e=>{e.element.removeEventListener(e.eventType,e.handler)})}bindRemoteFormFeedback(){if(window.jQuery&&this.selectInputEl&&window.Intellum&&window.Intellum.flashnotice){const e=this.selectInputEl,t=e.dataset.successMessage,i=e.dataset.errorMessage;t&&jQuery(this.selectInputEl).on("ajax:success",()=>{Intellum.flashnotice.show(t)}),i&&jQuery(this.selectInputEl).on("ajax:error",()=>{Intellum.flashnotice.show(i,"warning")})}}init(){this._elementEventBindings=[],this.selectInputEl=this.querySelector(this.inputElSelector),this.selectContentEl=this.querySelector(this.selectContentSelector),this.selectedValueEl=this.querySelector(this.triggerContentSelector),this.triggerEl=this.querySelector(this.triggerElSelector),this.selectOptions=Array.from(this.querySelectorAll(this.selectOptionSelector)),this.selectContentEl&&this.selectedValueEl&&(this.triggerEl&&this.triggerEl.setAttribute("role","button"),this.bindTriggers(),this.bindKeyboardEvents(),this.isMenuOnly||(this.bindSelectOptions(),this.bindRemoteFormFeedback()),this.disableTrigger(this.disabled))}connectedCallback(){super.connectedCallback(),this.init()}disconnectedCallback(){super.disconnectedCallback(),this.unbindAllEvents()}}customElements.define("exceed-simple-select",ts);class _n extends ts{static get is(){return"exceed-filter-select"}static get properties(){return{filterName:{type:String,value:""},updateOnLoad:{type:Boolean,value:!1},urlParams:{type:Array,value:[]},useArrayParams:{type:Boolean,value:!1},inputsToUpdateId:{type:String,value:""}}}setValue(e,t){this.selectedValue=e;let i=he.parse(location.search,{arrayFormat:"bracket"}),s;if(this.useArrayParams?(i[this.filterName]=[e],s=location.href.split("?")[0]+"?"+decodeURIComponent(he.stringify(i,{arrayFormat:"bracket"}))):(i[this.filterName]=e,s=location.href.split("?")[0]+"?"+he.stringify(i,{arrayFormat:"bracket"})),history.pushState({path:s},"",s),this.selectOptions.forEach(n=>{n.getAttribute(this.optionValueAttribute)==e?n.setAttribute("aria-selected","true"):n.setAttribute("aria-selected","false")}),this.inputsToUpdateEl){let n=`[name="${this.filterName}"]`,l=this.inputsToUpdateEl.querySelectorAll(n);l.length&&l.forEach(a=>{a.value=e})}this.moveFocusToTrigger(),this.sendUpdateEvent(),this.setUpdateMessage(t)}sendUpdateEvent(){v.publish(y.filters_update,{urlParams:this.urlParams})}updateFiltersOnLoad(){this.updateOnLoad&&setTimeout(()=>{this.sendUpdateEvent()},50)}connectedCallback(){super.connectedCallback(),this.inputsToUpdateEl=document.getElementById(this.inputsToUpdateId),this.updateFiltersOnLoad()}}customElements.define("exceed-filter-select",_n);class yn extends D{static get properties(){return{isAlwaysEnabled:{type:Boolean,value:!1},buttonSelector:{type:String,value:'button[type="submit"]'},dependencyToggleTrigger:{type:String,value:""},hasFileRequirement:{type:Boolean,value:!1},requiredFileStateSelector:{type:String,value:'input[name="has_file"]'}}}static get is(){return"exceed-form-submit"}doesInputHaveValue(e){let t;return e.getAttribute("type")==="radio"?(t=this._formEl.querySelectorAll(`[name="${e.getAttribute("name")}"]`),Array.from(t).some(i=>i.checked)):e.getAttribute("type")==="checkbox"?e.checked:!!e.value}doesInputHaveSpecifiedValue(e){return new RegExp(e.getAttribute("pattern")).test(e.value)}checkRequiredFileState(e,t){e[0].target.getAttribute("value")==="false"&&this.setDisabled(null,!0)}setDisabled(e,t=!1){let i;t?i=!1:this._requiredInputEls&&this._requiredInputEls.length?(i=!0,Array.from(this._requiredInputEls).some(s=>{if(this.doesInputHaveValue(s))s.hasAttribute("pattern")&&!this.doesInputHaveSpecifiedValue(s)&&(i=!1);else{i=!1;return}})):(i=!1,Array.from(this._formInputEls).some(s=>{if(this.doesInputHaveValue(s)){i=!0;return}})),i?this._submitButtonEl.removeAttribute("disabled"):this._submitButtonEl.setAttribute("disabled","true")}bindFormElementEvents(){this._boundEventHandlers=[],this._formInputEls.forEach(e=>{let t=this.setDisabled.bind(this),i="input";["checkbox","radio","hidden","select"].indexOf(e.getAttribute("type"))>-1&&(i="change"),e.addEventListener(i,t),this._boundEventHandlers.push({element:e,eventType:i,handler:t})})}bindObserver(){this._boundRequiredFileStateChangeHandler=this.checkRequiredFileState.bind(this),this._requiredFileStateChangeObserver=new MutationObserver(this._boundRequiredFileStateChangeHandler),this._requiredFileStateChangeObserver.observe(this._requiredFileStateElement,{attributeFilter:["value"]})}bindToDependencyToggle(){this._dependencyBinding=v.subscribe(y.dependency,(e,t)=>{t.trigger===this.dependencyToggleTrigger&&(this._requiredInputEls=this._formEl.querySelectorAll(this._requiredFieldsSelector),this.setDisabled())})}unbindFormElementEvents(){this._boundEventHandlers.forEach(e=>{e.element.removeEventListener(e.eventType,e.handler)})}unbindObserver(){this._requiredFileStateChangeObserver.disconnect()}init(){this._submitButtonEl=this.querySelector(this.buttonSelector),this._formEl=this.closest("form"),this._requiredFieldsSelector="*[required]:not([disabled])",this._submitButtonEl&&this._formEl?(this._formInputEls=this._formEl.querySelectorAll("input:not([type=hidden]), textarea, input[type=hidden][required], select"),this._requiredInputEls=this._formEl.querySelectorAll(this._requiredFieldsSelector),this.hasFileRequirement&&(this._requiredFileStateElement=this._formEl.querySelector(this.requiredFileStateSelector),this._requiredFileStateElement&&(this._requiredFileStateElement.getAttribute("value")==="false"&&this.setDisabled(null,!0),this.bindObserver())),this.isAlwaysEnabled||(this.setDisabled(),this.bindFormElementEvents(),this.dependencyToggleTrigger&&this.bindToDependencyToggle()),this._formEl.addEventListener("submit",()=>{this._submitButtonEl.setAttribute("disabled","true")})):this._openModalSubscription=v.subscribe(y.modal_open,()=>{this.init()})}connectedCallback(){super.connectedCallback(),this.init()}disconnectedCallback(){super.disconnectedCallback(),this._formInputEls&&this._formInputEls.length&&this.unbindFormElementEvents(),this._requiredFileStateChangeObserver&&this.unbindObserver(),this._openModalSubscription&&v.unsubscribe(this._subscribeToSavedEvent),this._dependencyBinding&&v.unsubscribe(this._dependencyBinding)}constructor(){super()}}customElements.define("exceed-form-submit",yn);class is extends D{static get is(){return"exceed-remoteform-replace"}static get properties(){return{htmlKey:{type:String,value:"newSectionHtml"},isToggleButton:{type:Boolean,value:!1},isReplacement:{type:Boolean,value:!1},isResponseHtml:{type:Boolean,value:!1},isRedirectOnSuccess:{type:Boolean,value:!1},isCloseModalOnSuccess:{type:Boolean,value:!1},replaceElementSelector:{type:String,value:""},sendUpdateContentMessage:{type:Boolean,value:!1}}}replaceContent(e){let t=jQuery(this.replaceElementSelector);t.length||(t=jQuery(this)),this.isResponseHtml?t.replaceWith(e):t.replaceWith(e[this.htmlKey]),window.Intellum&&Intellum.util&&Intellum.util.reinitialize&&Intellum.util.reinitialize.trigger()}disableSubmitOnFileUpload(e){this._submitButtonEls.forEach(t=>{t.dataset.uploadField=e.uploadField,t.setAttribute("disabled",!0)})}enableSubmitAfterFileUpload(e){this._submitButtonEls.forEach(t=>{t.dataset.uploadField===e.uploadField&&(t.removeAttribute("disabled"),t.dataset.uploadField="")})}handleButtonToggle(){if(!this.isToggleButton||!this.isReplacement)return!1;this.firstElementChild.style.pointerEvents="none",this.addEventListener("mouseout",()=>{setTimeout(()=>{this.firstElementChild.style.pointerEvents="auto"},500)})}setupRemoteEl(){let e=jQuery(this.querySelectorAll('[data-remote="true"]'));e.on("submit",t=>{jQuery('input[type="file"]',this).each(function(){jQuery(this).prop("name")||jQuery(this).remove()})}),e.on("ajax:success",(t,i)=>{e[0]==t.target&&(this.isRedirectOnSuccess&&i.redirectUrl&&!this._isRedirecting?(window.location=i.redirectUrl,this._isRedirecting=!0):this.isCloseModalOnSuccess&&i.updateModalId?v.publish(y.modal_update,{triggerTarget:i.updateModalId,triggerSource:i.closeModalId}):this.isCloseModalOnSuccess&&i.closeModalId?(i.publishEvent&&v.publish(i.publishEvent,i.eventData),v.publish(y.modal_destroy,{triggerTarget:i.closeModalId})):this.replaceContent(i),this.sendUpdateContentMessage&&v.publish(y.update_content,{source:this.id}))}),e.on("ajax:error",(t,i)=>{this.replaceContent(i)})}listenToEventBus(){this._modalEventSubscriber=v.subscribe(y.uploadfile,(e,t)=>{e===y.uploadfile_start?this.disableSubmitOnFileUpload(t):(e===y.uploadfile_change||e===y.uploadfile_error)&&this.enableSubmitAfterFileUpload(t)})}connectedCallback(){super.connectedCallback(),this._isRedirecting=!1,this._submitButtonEls=this.querySelectorAll('[type="submit"]'),this.listenToEventBus(),this.setupRemoteEl(),this.handleButtonToggle()}disconnectedCallback(){super.disconnectedCallback(),v.unsubscribe(this._modalEventSubscriber)}}customElements.define("exceed-remoteform-replace",is);class vn extends is{static get is(){return"exceed-magic-form"}static get properties(){return{isEditing:{type:Boolean,value:!1,observer:"setEditingState"},editingClass:{type:String,value:"magicform--editing"},publishIfEditing:{type:Boolean,value:!1},submitButtonSelector:{type:String,value:".button--primary"},cancelButtonSelector:{type:String,value:".button--aux"},formSelector:{type:String,value:"form"},confirmModalId:{type:String,value:""},confirmModalSubmitSelector:{type:String,value:".button--primary"},cancelUrl:{type:String,value:""}}}setEditingState(e){this.editingClass.length&&(e?this.classList.add(this.editingClass):this.classList.remove(this.editingClass)),this.publishIfEditing&&v.publish(y.form_change,{hasChanged:e,formId:this.id})}handleInputElementChange(){let e=Ei(this._formEl,{hash:!1,empty:!0});this.isEditing=this._initialFormState!==e}bindInputElements(){this.querySelectorAll("input, textarea, select").forEach(e=>{let t=this.handleInputElementChange.bind(this),i="change";e.type==="text"||e.type==="number"||e.type==="textarea"||e.type==="url"?i="input":(e.type==="checkbox"||e.type==="radio")&&(i="click"),e.addEventListener(i,t),this._eventBindings.push({element:e,eventType:i,handler:t})})}resetHiddenElements(){this._formEl.querySelectorAll("[hidden]").forEach(e=>{e.removeAttribute("hidden")}),this._initialHiddenEls.forEach(e=>{e.setAttribute("hidden","hidden")})}resetDisabledElements(){this._formEl.querySelectorAll("[disabled]").forEach(e=>{e.removeAttribute("disabled")}),this._initialDisabledEls.forEach(e=>{e.setAttribute("disabled","disabled")})}handleToggleTriggersOnReset(){let e={};this.querySelectorAll('[data-reset-value="true"]').forEach(t=>{try{e=JSON.parse(t.dataset.triggerData)}catch{e={}}e.triggerTarget=t.dataset.triggerTarget,e.triggerValue=t.value,v.publish(t.dataset.trigger,e)})}handleCancelEvent(e){this.cancelUrl.length?(e.preventDefault(),$.get(this.cancelUrl).done(t=>{this.replaceContent(t)}).fail(t=>{this.replaceContent(t)})):(e.preventDefault(),this.isEditing=!1,this._formEl.reset(),this.resetHiddenElements(),this.resetDisabledElements(),v.publish(y.form_revert),this.handleToggleTriggersOnReset())}handleFormSubmitEvent(e){if(this._requiresConfirm){e.preventDefault(),e.stopPropagation(),this._confirmModalEl&&this.showConfirmModal();return}this.querySelectorAll(this.submitButtonSelector).forEach(t=>{t.dataset.savingText&&(t.innerText=t.dataset.savingText,t.setAttribute("disabled",!0))})}bindFormEvents(){if(this.querySelectorAll(this.cancelButtonSelector).forEach(e=>{let t=this.handleCancelEvent.bind(this);e.addEventListener("click",t),this._eventBindings.push({element:e,eventType:"click",handler:t})}),this._formEl){let e=this.handleFormSubmitEvent.bind(this);this._formEl.addEventListener("submit",e),this._eventBindings.push({element:this._formEl,eventType:"submit",handler:e})}}showConfirmModal(){this._confirmModalEl.dispatchEvent(new window.CustomEvent("show.dialog"))}handleConfirmButton(e){e.preventDefault(),this._requiresConfirm=!1,this._confirmModalEl.dispatchEvent(new window.CustomEvent("hide.dialog")),this.querySelector(this.submitButtonSelector).click()}setupConfirmDialog(){if(this._requiresConfirm=!1,this._confirmButtonEl=this._confirmModalEl.querySelector(this.confirmModalSubmitSelector),this._confirmButtonEl){this._requiresConfirm=!0;let e=this.handleConfirmButton.bind(this);this._confirmButtonEl.addEventListener("click",e),this._eventBindings.push({element:this._confirmButtonEl,eventType:"click",handler:e})}}additionalFormChangeTriggerHandler(e){e.target.closest("[data-triggers-form-change]")&&(this.isEditing=!0)}setupAdditionalChangeEventHandling(){this._boundFormChangeTriggerHandler=this.additionalFormChangeTriggerHandler.bind(this),this._formEl.addEventListener("click",this._boundFormChangeTriggerHandler),this._eventBindings.push({element:this._formEl,eventType:"click",handler:this._boundFormChangeTriggerHandler})}unbindAllEvents(){this._eventBindings.forEach(e=>{e.element.removeEventListener(e.eventType,e.handler)})}init(){this._eventBindings=[],this._formEl=this.querySelector(this.formSelector),this._formEl&&(this._initialFormState=Ei(this._formEl,{hash:!1,empty:!0}),this._initialHiddenEls=this._formEl.querySelectorAll("[hidden]"),this._initialDisabledEls=this._formEl.querySelectorAll("[disabled]"),this.confirmModalId&&(this._confirmModalEl=document.getElementById(this.confirmModalId)),this.setupAdditionalChangeEventHandling(),this._confirmModalEl&&this.setupConfirmDialog())}connectedCallback(){super.connectedCallback(),this.init(),this.bindInputElements(),this.bindFormEvents()}disconnectedCallback(){super.disconnectedCallback(),this.unbindAllEvents()}ready(){super.ready()}}customElements.define("exceed-magic-form",vn);class En extends D{static get properties(){return{modalElementName:{type:String,value:"exceed-modal"}}}static get is(){return"exceed-modal-helper"}isNewXHRModalNeeded(e){return e&&e.url&&!(e.triggerTarget&&document.getElementById(e.triggerTarget))}createNewModal(e,t,i){let s;const n=document.createDocumentFragment(),l=document.createElement("div");let a=document.getElementById(i);l.innerHTML=e;for(let o of Array.from(l.childNodes))if(o.nodeName.toLowerCase()===this.modalElementName){n.appendChild(o);break}s=n.firstChild,s.setAttribute("update-url",t),i&&a?a.appendChild(s):this.appendChild(s),s.openModal(),this.reinitializeLegacyBindings()}reinitializeLegacyBindings(){window.Intellum&&Intellum.util&&Intellum.util.reinitialize&&Intellum.util.reinitialize.trigger()}updateModalContent(e){let t=this.querySelector("#"+e.triggerTarget);t&&t.updateUrl?_e.get(t.updateUrl).then(i=>{let s=t.querySelector(".modal__content");s.parentElement.replaceChild(sn(i.data,".modal__content"),s),e.triggerSource&&this.querySelector("#"+e.triggerSource)&&window.setTimeout(()=>{v.publish(y.modal_destroy,{triggerTarget:e.triggerSource})})}).catch(i=>{}):e.triggerSource&&this.querySelector("#"+e.triggerSource)&&v.publish(y.modal_destroy,{triggerTarget:e.triggerSource})}loadModalContentAndCreate(e){_e.get(e.url).then(t=>{this.createNewModal(t.data,e.url,e.modalContainerId)}).catch(t=>{})}listenToEventBus(){v.subscribe(y.modal_open,(e,t)=>{this.isNewXHRModalNeeded(t)&&this.loadModalContentAndCreate(t)}),v.subscribe(y.modal_update,(e,t)=>{this.updateModalContent(t)})}openModalFromUrl(){const e=window.location.hash.substring(1);let t;e&&!document.getElementById(e)&&(t=document.querySelector(`[data-trigger-target="${e}"]`),t&&t.click())}connectedCallback(){super.connectedCallback(),this.listenToEventBus(),this.openModalFromUrl()}}customElements.define("exceed-modal-helper",En);class Sn extends D{static get is(){return"exceed-nav-menu"}static get properties(){return{triggerElSelector:{type:String,value:".navmenu__trigger"},blurTriggerElSelector:{type:String,value:".navmenu__backdrop"},menuElSelector:{type:String,value:".navmenu__menu"},menuVisibleClass:{type:String,value:"navmenu__menu--visible"},triggerActiveClass:{type:String,value:""},optionElSelector:{type:String,value:"li"},focusElSelector:{type:String,value:"[data-is-menu-focus]"},dynamicContentContainerSelector:{type:String,value:""},dynamicContentEndpoint:{type:String,value:""},isDynamicContentDelayed:{type:Boolean,value:!1},isOpen:{type:Boolean,value:!1,observer:"showHideMenu"}}}getDynamicContent(){this._isDynamicContentLoaded||_e.get(this.dynamicContentEndpoint).then(e=>{this._dynamicContentEl.innerHTML=e.data,this._isDynamicContentLoaded=!0,this.bindBlurEvent()})}showHideMenu(e){if(this._triggerEl&&this._menuEl){if(e)this._hasDynamicContent&&this.isDynamicContentDelayed&&this.getDynamicContent(),this._menuEl.classList.add(this.menuVisibleClass),this._triggerEl.setAttribute("aria-expanded","true"),this.triggerActiveClass.length&&this._triggerEl.classList.add(this.triggerActiveClass),this._focusEl&&setTimeout(()=>{this._focusEl.focus()},50);else if(!this._triggerEl.hasAttribute("disabled")&&(this._menuEl.classList.remove(this.menuVisibleClass),this._triggerEl.setAttribute("aria-expanded","false"),this.triggerActiveClass.length&&this._triggerEl.classList.remove(this.triggerActiveClass),window.innerWidth>480)){const t=document.querySelectorAll(".categoriesmenu__aside--current");t&&window.setTimeout(()=>{t.forEach(i=>{i.classList.remove("categoriesmenu__aside--current"),i.setAttribute("aria-expanded","false"),i.setAttribute("aria-hidden","true")})},300)}}}handleHideMenuEvent(e){this.isOpen=!1,e.stopPropagation()}handleClickOnNavMenu(e){if(this._menuEl.contains(e.target)){let t=e.target.closest(this.optionElSelector);this._menuEl.contains(t)||e.stopPropagation()}else this.isOpen=!this.isOpen}handleClickOnDocument(e){this.isOpen&&(!this.contains(e.target)||this._blurTriggerEl&&this._blurTriggerEl.contains(e.target))&&(this.isOpen=!1)}handleBlurEvent(e){if(this.isOpen){let t=e.relatedTarget;window.MSInputMethodContext&&document.documentMode&&(t=document.activeElement),t&&!this.contains(t)&&(this.isOpen=!1)}}bindTriggers(){this._boundMenuClickHandler=this.handleClickOnNavMenu.bind(this),this.addEventListener("click",this._boundMenuClickHandler),this._boundDocumentClickHandler=this.handleClickOnDocument.bind(this),document.addEventListener("click",this._boundDocumentClickHandler),this._blurTriggerEl&&this._blurTriggerEl.addEventListener("click",this._boundDocumentClickHandler),this._boundHideMenuEventHandler=this.handleHideMenuEvent.bind(this),this.addEventListener("navmenu.hide",this._boundHideMenuEventHandler)}bindBlurEvent(){this._boundBlurEventHandler=this.handleBlurEvent.bind(this),this._focusableEventEls=[],this._menuEl.querySelectorAll('button, [href], [tabindex]:not([tabindex="-1"]), input').forEach(t=>{t.addEventListener("blur",this._boundBlurEventHandler),this._focusableEventEls.push(t)})}unbindAllEvents(){this.removeEventListener("click",this._boundMenuClickHandler),this.removeEventListener("click",this._boundTriggerClickHandler),document.removeEventListener("click",this._boundDocumentClickHandler),this._focusableEventEls.forEach(e=>{e.removeEventListener("blur",this._boundBlurEventHandler)}),this.removeEventListener("navmenu.hide",this._boundHideMenuEventHandler)}init(){this._triggerEl=this.querySelector(this.triggerElSelector),this._blurTriggerEl=this.querySelector(this.blurTriggerElSelector),this._menuEl=this.querySelector(this.menuElSelector),this._triggerEl&&this._menuEl&&(this.bindTriggers(),this.bindBlurEvent(),this._focusEl=this.querySelector(this.focusElSelector)),this.dynamicContentContainerSelector.length&&this.dynamicContentEndpoint.length&&(this._dynamicContentEl=this.querySelector(this.dynamicContentContainerSelector),this._dynamicContentEl&&(this._hasDynamicContent=!0,this.isDynamicContentDelayed||this.getDynamicContent()))}connectedCallback(){super.connectedCallback(),this.init()}disconnectedCallback(){super.disconnectedCallback(),this.unbindAllEvents()}}customElements.define("exceed-nav-menu",Sn);const Cn=function(r,e,t){let i,s,n,l,a;const o=function(){let d=Date.now()-l;d<e&&d>=0?i=setTimeout(o,e-d):(i=null,a=r.apply(n,s),i||(n=s=null))};return function(){return n=this,s=arguments,l=Date.now(),i||(i=setTimeout(o,e)),a}};/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function wi(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,i)}return t}function te(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wi(Object(t),!0).forEach(function(i){wn(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):wi(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function at(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?at=function(e){return typeof e}:at=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(r)}function wn(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function re(){return re=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},re.apply(this,arguments)}function In(r,e){if(r==null)return{};var t={},i=Object.keys(r),s,n;for(n=0;n<i.length;n++)s=i[n],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}function An(r,e){if(r==null)return{};var t=In(r,e),i,s;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(t[i]=r[i])}return t}var Tn="1.15.6";function se(r){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(r)}var ne=se(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Je=se(/Edge/i),Ii=se(/firefox/i),je=se(/safari/i)&&!se(/chrome/i)&&!se(/android/i),Zt=se(/iP(ad|od|hone)/i),ss=se(/chrome/i)&&se(/android/i),rs={capture:!1,passive:!1};function T(r,e,t){r.addEventListener(e,t,!ne&&rs)}function A(r,e,t){r.removeEventListener(e,t,!ne&&rs)}function gt(r,e){if(e){if(e[0]===">"&&(e=e.substring(1)),r)try{if(r.matches)return r.matches(e);if(r.msMatchesSelector)return r.msMatchesSelector(e);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(e)}catch{return!1}return!1}}function ns(r){return r.host&&r!==document&&r.host.nodeType?r.host:r.parentNode}function Q(r,e,t,i){if(r){t=t||document;do{if(e!=null&&(e[0]===">"?r.parentNode===t&&gt(r,e):gt(r,e))||i&&r===t)return r;if(r===t)break}while(r=ns(r))}return null}var Ai=/\s+/g;function G(r,e,t){if(r&&e)if(r.classList)r.classList[t?"add":"remove"](e);else{var i=(" "+r.className+" ").replace(Ai," ").replace(" "+e+" "," ");r.className=(i+(t?" "+e:"")).replace(Ai," ")}}function E(r,e,t){var i=r&&r.style;if(i){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(r,""):r.currentStyle&&(t=r.currentStyle),e===void 0?t:t[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=t+(typeof t=="string"?"":"px")}}function Ae(r,e){var t="";if(typeof r=="string")t=r;else do{var i=E(r,"transform");i&&i!=="none"&&(t=i+" "+t)}while(!e&&(r=r.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(t)}function ls(r,e,t){if(r){var i=r.getElementsByTagName(e),s=0,n=i.length;if(t)for(;s<n;s++)t(i[s],s);return i}return[]}function ee(){var r=document.scrollingElement;return r||document.documentElement}function F(r,e,t,i,s){if(!(!r.getBoundingClientRect&&r!==window)){var n,l,a,o,d,c,h;if(r!==window&&r.parentNode&&r!==ee()?(n=r.getBoundingClientRect(),l=n.top,a=n.left,o=n.bottom,d=n.right,c=n.height,h=n.width):(l=0,a=0,o=window.innerHeight,d=window.innerWidth,c=window.innerHeight,h=window.innerWidth),(e||t)&&r!==window&&(s=s||r.parentNode,!ne))do if(s&&s.getBoundingClientRect&&(E(s,"transform")!=="none"||t&&E(s,"position")!=="static")){var f=s.getBoundingClientRect();l-=f.top+parseInt(E(s,"border-top-width")),a-=f.left+parseInt(E(s,"border-left-width")),o=l+n.height,d=a+n.width;break}while(s=s.parentNode);if(i&&r!==window){var b=Ae(s||r),m=b&&b.a,u=b&&b.d;b&&(l/=u,a/=m,h/=m,c/=u,o=l+c,d=a+h)}return{top:l,left:a,bottom:o,right:d,width:h,height:c}}}function Ti(r,e,t){for(var i=ce(r,!0),s=F(r)[e];i;){var n=F(i)[t],l=void 0;if(l=s>=n,!l)return i;if(i===ee())break;i=ce(i,!1)}return!1}function Pe(r,e,t,i){for(var s=0,n=0,l=r.children;n<l.length;){if(l[n].style.display!=="none"&&l[n]!==S.ghost&&(i||l[n]!==S.dragged)&&Q(l[n],t.draggable,r,!1)){if(s===e)return l[n];s++}n++}return null}function ei(r,e){for(var t=r.lastElementChild;t&&(t===S.ghost||E(t,"display")==="none"||e&&!gt(t,e));)t=t.previousElementSibling;return t||null}function X(r,e){var t=0;if(!r||!r.parentNode)return-1;for(;r=r.previousElementSibling;)r.nodeName.toUpperCase()!=="TEMPLATE"&&r!==S.clone&&(!e||gt(r,e))&&t++;return t}function Pi(r){var e=0,t=0,i=ee();if(r)do{var s=Ae(r),n=s.a,l=s.d;e+=r.scrollLeft*n,t+=r.scrollTop*l}while(r!==i&&(r=r.parentNode));return[e,t]}function Pn(r,e){for(var t in r)if(r.hasOwnProperty(t)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===r[t][i])return Number(t)}return-1}function ce(r,e){if(!r||!r.getBoundingClientRect)return ee();var t=r,i=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var s=E(t);if(t.clientWidth<t.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return ee();if(i||e)return t;i=!0}}while(t=t.parentNode);return ee()}function On(r,e){if(r&&e)for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}function Ot(r,e){return Math.round(r.top)===Math.round(e.top)&&Math.round(r.left)===Math.round(e.left)&&Math.round(r.height)===Math.round(e.height)&&Math.round(r.width)===Math.round(e.width)}var ze;function as(r,e){return function(){if(!ze){var t=arguments,i=this;t.length===1?r.call(i,t[0]):r.apply(i,t),ze=setTimeout(function(){ze=void 0},e)}}}function kn(){clearTimeout(ze),ze=void 0}function os(r,e,t){r.scrollLeft+=e,r.scrollTop+=t}function ds(r){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(r).cloneNode(!0):t?t(r).clone(!0)[0]:r.cloneNode(!0)}function cs(r,e,t){var i={};return Array.from(r.children).forEach(function(s){var n,l,a,o;if(!(!Q(s,e.draggable,r,!1)||s.animated||s===t)){var d=F(s);i.left=Math.min((n=i.left)!==null&&n!==void 0?n:1/0,d.left),i.top=Math.min((l=i.top)!==null&&l!==void 0?l:1/0,d.top),i.right=Math.max((a=i.right)!==null&&a!==void 0?a:-1/0,d.right),i.bottom=Math.max((o=i.bottom)!==null&&o!==void 0?o:-1/0,d.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var z="Sortable"+new Date().getTime();function xn(){var r=[],e;return{captureAnimationState:function(){if(r=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(s){if(!(E(s,"display")==="none"||s===S.ghost)){r.push({target:s,rect:F(s)});var n=te({},r[r.length-1].rect);if(s.thisAnimationDuration){var l=Ae(s,!0);l&&(n.top-=l.f,n.left-=l.e)}s.fromRect=n}})}},addAnimationState:function(i){r.push(i)},removeAnimationState:function(i){r.splice(Pn(r,{target:i}),1)},animateAll:function(i){var s=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var n=!1,l=0;r.forEach(function(a){var o=0,d=a.target,c=d.fromRect,h=F(d),f=d.prevFromRect,b=d.prevToRect,m=a.rect,u=Ae(d,!0);u&&(h.top-=u.f,h.left-=u.e),d.toRect=h,d.thisAnimationDuration&&Ot(f,h)&&!Ot(c,h)&&(m.top-h.top)/(m.left-h.left)===(c.top-h.top)/(c.left-h.left)&&(o=Dn(m,f,b,s.options)),Ot(h,c)||(d.prevFromRect=c,d.prevToRect=h,o||(o=s.options.animation),s.animate(d,m,h,o)),o&&(n=!0,l=Math.max(l,o),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},o),d.thisAnimationDuration=o)}),clearTimeout(e),n?e=setTimeout(function(){typeof i=="function"&&i()},l):typeof i=="function"&&i(),r=[]},animate:function(i,s,n,l){if(l){E(i,"transition",""),E(i,"transform","");var a=Ae(this.el),o=a&&a.a,d=a&&a.d,c=(s.left-n.left)/(o||1),h=(s.top-n.top)/(d||1);i.animatingX=!!c,i.animatingY=!!h,E(i,"transform","translate3d("+c+"px,"+h+"px,0)"),this.forRepaintDummy=Ln(i),E(i,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),E(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){E(i,"transition",""),E(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},l)}}}}function Ln(r){return r.offsetWidth}function Dn(r,e,t,i){return Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*i.animation}var ve=[],kt={initializeByDefault:!0},Qe={mount:function(e){for(var t in kt)kt.hasOwnProperty(t)&&!(t in e)&&(e[t]=kt[t]);ve.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ve.push(e)},pluginEvent:function(e,t,i){var s=this;this.eventCanceled=!1,i.cancel=function(){s.eventCanceled=!0};var n=e+"Global";ve.forEach(function(l){t[l.pluginName]&&(t[l.pluginName][n]&&t[l.pluginName][n](te({sortable:t},i)),t.options[l.pluginName]&&t[l.pluginName][e]&&t[l.pluginName][e](te({sortable:t},i)))})},initializePlugins:function(e,t,i,s){ve.forEach(function(a){var o=a.pluginName;if(!(!e.options[o]&&!a.initializeByDefault)){var d=new a(e,t,e.options);d.sortable=e,d.options=e.options,e[o]=d,re(i,d.defaults)}});for(var n in e.options)if(e.options.hasOwnProperty(n)){var l=this.modifyOption(e,n,e.options[n]);typeof l<"u"&&(e.options[n]=l)}},getEventProperties:function(e,t){var i={};return ve.forEach(function(s){typeof s.eventProperties=="function"&&re(i,s.eventProperties.call(t[s.pluginName],e))}),i},modifyOption:function(e,t,i){var s;return ve.forEach(function(n){e[n.pluginName]&&n.optionListeners&&typeof n.optionListeners[t]=="function"&&(s=n.optionListeners[t].call(e[n.pluginName],i))}),s}};function Nn(r){var e=r.sortable,t=r.rootEl,i=r.name,s=r.targetEl,n=r.cloneEl,l=r.toEl,a=r.fromEl,o=r.oldIndex,d=r.newIndex,c=r.oldDraggableIndex,h=r.newDraggableIndex,f=r.originalEvent,b=r.putSortable,m=r.extraEventProperties;if(e=e||t&&t[z],!!e){var u,g=e.options,_="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!ne&&!Je?u=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent(i,!0,!0)),u.to=l||t,u.from=a||t,u.item=s||t,u.clone=n,u.oldIndex=o,u.newIndex=d,u.oldDraggableIndex=c,u.newDraggableIndex=h,u.originalEvent=f,u.pullMode=b?b.lastPutMode:void 0;var C=te(te({},m),Qe.getEventProperties(i,e));for(var I in C)u[I]=C[I];t&&t.dispatchEvent(u),g[_]&&g[_].call(e,u)}}var Fn=["evt"],V=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.evt,n=An(i,Fn);Qe.pluginEvent.bind(S)(e,t,te({dragEl:p,parentEl:L,ghostEl:w,rootEl:k,nextEl:ge,lastDownEl:ot,cloneEl:x,cloneHidden:de,dragStarted:Re,putSortable:R,activeSortable:S.active,originalEvent:s,oldIndex:we,oldDraggableIndex:$e,newIndex:Y,newDraggableIndex:oe,hideGhostForTarget:fs,unhideGhostForTarget:ms,cloneNowHidden:function(){de=!0},cloneNowShown:function(){de=!1},dispatchSortableEvent:function(a){U({sortable:t,name:a,originalEvent:s})}},n))};function U(r){Nn(te({putSortable:R,cloneEl:x,targetEl:p,rootEl:k,oldIndex:we,oldDraggableIndex:$e,newIndex:Y,newDraggableIndex:oe},r))}var p,L,w,k,ge,ot,x,de,we,Y,$e,oe,st,R,Ce=!1,bt=!1,_t=[],fe,J,xt,Lt,Oi,ki,Re,Ee,Ke,Ge=!1,rt=!1,dt,q,Dt=[],$t=!1,yt=[],It=typeof document<"u",nt=Zt,xi=Je||ne?"cssFloat":"float",Mn=It&&!ss&&!Zt&&"draggable"in document.createElement("div"),hs=function(){if(It){if(ne)return!1;var r=document.createElement("x");return r.style.cssText="pointer-events:auto",r.style.pointerEvents==="auto"}}(),us=function(e,t){var i=E(e),s=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),n=Pe(e,0,t),l=Pe(e,1,t),a=n&&E(n),o=l&&E(l),d=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+F(n).width,c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+F(l).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return l&&(o.clear==="both"||o.clear===h)?"vertical":"horizontal"}return n&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||d>=s&&i[xi]==="none"||l&&i[xi]==="none"&&d+c>s)?"vertical":"horizontal"},Hn=function(e,t,i){var s=i?e.left:e.top,n=i?e.right:e.bottom,l=i?e.width:e.height,a=i?t.left:t.top,o=i?t.right:t.bottom,d=i?t.width:t.height;return s===a||n===o||s+l/2===a+d/2},Bn=function(e,t){var i;return _t.some(function(s){var n=s[z].options.emptyInsertThreshold;if(!(!n||ei(s))){var l=F(s),a=e>=l.left-n&&e<=l.right+n,o=t>=l.top-n&&t<=l.bottom+n;if(a&&o)return i=s}}),i},ps=function(e){function t(n,l){return function(a,o,d,c){var h=a.options.group.name&&o.options.group.name&&a.options.group.name===o.options.group.name;if(n==null&&(l||h))return!0;if(n==null||n===!1)return!1;if(l&&n==="clone")return n;if(typeof n=="function")return t(n(a,o,d,c),l)(a,o,d,c);var f=(l?a:o).options.group.name;return n===!0||typeof n=="string"&&n===f||n.join&&n.indexOf(f)>-1}}var i={},s=e.group;(!s||at(s)!="object")&&(s={name:s}),i.name=s.name,i.checkPull=t(s.pull,!0),i.checkPut=t(s.put),i.revertClone=s.revertClone,e.group=i},fs=function(){!hs&&w&&E(w,"display","none")},ms=function(){!hs&&w&&E(w,"display","")};It&&!ss&&document.addEventListener("click",function(r){if(bt)return r.preventDefault(),r.stopPropagation&&r.stopPropagation(),r.stopImmediatePropagation&&r.stopImmediatePropagation(),bt=!1,!1},!0);var me=function(e){if(p){e=e.touches?e.touches[0]:e;var t=Bn(e.clientX,e.clientY);if(t){var i={};for(var s in e)e.hasOwnProperty(s)&&(i[s]=e[s]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[z]._onDragOver(i)}}},Rn=function(e){p&&p.parentNode[z]._isOutsideThisEl(e.target)};function S(r,e){if(!(r&&r.nodeType&&r.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(r));this.el=r,this.options=e=re({},e),r[z]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(r.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return us(r,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,a){l.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:S.supportPointer!==!1&&"PointerEvent"in window&&(!je||Zt),emptyInsertThreshold:5};Qe.initializePlugins(this,r,t);for(var i in t)!(i in e)&&(e[i]=t[i]);ps(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:Mn,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?T(r,"pointerdown",this._onTapStart):(T(r,"mousedown",this._onTapStart),T(r,"touchstart",this._onTapStart)),this.nativeDraggable&&(T(r,"dragover",this),T(r,"dragenter",this)),_t.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),re(this,xn())}S.prototype={constructor:S,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ee=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,p):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,s=this.options,n=s.preventOnFilter,l=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,o=(a||e).target,d=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||o,c=s.filter;if(Gn(i),!p&&!(/mousedown|pointerdown/.test(l)&&e.button!==0||s.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&je&&o&&o.tagName.toUpperCase()==="SELECT")&&(o=Q(o,s.draggable,i,!1),!(o&&o.animated)&&ot!==o)){if(we=X(o),$e=X(o,s.draggable),typeof c=="function"){if(c.call(this,e,o,this)){U({sortable:t,rootEl:d,name:"filter",targetEl:o,toEl:i,fromEl:i}),V("filter",t,{evt:e}),n&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(h){if(h=Q(d,h.trim(),i,!1),h)return U({sortable:t,rootEl:h,name:"filter",targetEl:o,fromEl:i,toEl:i}),V("filter",t,{evt:e}),!0}),c)){n&&e.preventDefault();return}s.handle&&!Q(d,s.handle,i,!1)||this._prepareDragStart(e,a,o)}}},_prepareDragStart:function(e,t,i){var s=this,n=s.el,l=s.options,a=n.ownerDocument,o;if(i&&!p&&i.parentNode===n){var d=F(i);if(k=n,p=i,L=p.parentNode,ge=p.nextSibling,ot=i,st=l.group,S.dragged=p,fe={target:p,clientX:(t||e).clientX,clientY:(t||e).clientY},Oi=fe.clientX-d.left,ki=fe.clientY-d.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,p.style["will-change"]="all",o=function(){if(V("delayEnded",s,{evt:e}),S.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!Ii&&s.nativeDraggable&&(p.draggable=!0),s._triggerDragStart(e,t),U({sortable:s,name:"choose",originalEvent:e}),G(p,l.chosenClass,!0)},l.ignore.split(",").forEach(function(c){ls(p,c.trim(),Nt)}),T(a,"dragover",me),T(a,"mousemove",me),T(a,"touchmove",me),l.supportPointer?(T(a,"pointerup",s._onDrop),!this.nativeDraggable&&T(a,"pointercancel",s._onDrop)):(T(a,"mouseup",s._onDrop),T(a,"touchend",s._onDrop),T(a,"touchcancel",s._onDrop)),Ii&&this.nativeDraggable&&(this.options.touchStartThreshold=4,p.draggable=!0),V("delayStart",this,{evt:e}),l.delay&&(!l.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Je||ne))){if(S.eventCanceled){this._onDrop();return}l.supportPointer?(T(a,"pointerup",s._disableDelayedDrag),T(a,"pointercancel",s._disableDelayedDrag)):(T(a,"mouseup",s._disableDelayedDrag),T(a,"touchend",s._disableDelayedDrag),T(a,"touchcancel",s._disableDelayedDrag)),T(a,"mousemove",s._delayedDragTouchMoveHandler),T(a,"touchmove",s._delayedDragTouchMoveHandler),l.supportPointer&&T(a,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(o,l.delay)}else o()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){p&&Nt(p),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;A(e,"mouseup",this._disableDelayedDrag),A(e,"touchend",this._disableDelayedDrag),A(e,"touchcancel",this._disableDelayedDrag),A(e,"pointerup",this._disableDelayedDrag),A(e,"pointercancel",this._disableDelayedDrag),A(e,"mousemove",this._delayedDragTouchMoveHandler),A(e,"touchmove",this._delayedDragTouchMoveHandler),A(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?T(document,"pointermove",this._onTouchMove):t?T(document,"touchmove",this._onTouchMove):T(document,"mousemove",this._onTouchMove):(T(p,"dragend",this),T(k,"dragstart",this._onDragStart));try{document.selection?ct(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Ce=!1,k&&p){V("dragStarted",this,{evt:t}),this.nativeDraggable&&T(document,"dragover",Rn);var i=this.options;!e&&G(p,i.dragClass,!1),G(p,i.ghostClass,!0),S.active=this,e&&this._appendGhost(),U({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(J){this._lastX=J.clientX,this._lastY=J.clientY,fs();for(var e=document.elementFromPoint(J.clientX,J.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(J.clientX,J.clientY),e!==t);)t=e;if(p.parentNode[z]._isOutsideThisEl(e),t)do{if(t[z]){var i=void 0;if(i=t[z]._onDragOver({clientX:J.clientX,clientY:J.clientY,target:e,rootEl:t}),i&&!this.options.dragoverBubble)break}e=t}while(t=ns(t));ms()}},_onTouchMove:function(e){if(fe){var t=this.options,i=t.fallbackTolerance,s=t.fallbackOffset,n=e.touches?e.touches[0]:e,l=w&&Ae(w,!0),a=w&&l&&l.a,o=w&&l&&l.d,d=nt&&q&&Pi(q),c=(n.clientX-fe.clientX+s.x)/(a||1)+(d?d[0]-Dt[0]:0)/(a||1),h=(n.clientY-fe.clientY+s.y)/(o||1)+(d?d[1]-Dt[1]:0)/(o||1);if(!S.active&&!Ce){if(i&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(w){l?(l.e+=c-(xt||0),l.f+=h-(Lt||0)):l={a:1,b:0,c:0,d:1,e:c,f:h};var f="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");E(w,"webkitTransform",f),E(w,"mozTransform",f),E(w,"msTransform",f),E(w,"transform",f),xt=c,Lt=h,J=n}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!w){var e=this.options.fallbackOnBody?document.body:k,t=F(p,!0,nt,!0,e),i=this.options;if(nt){for(q=e;E(q,"position")==="static"&&E(q,"transform")==="none"&&q!==document;)q=q.parentNode;q!==document.body&&q!==document.documentElement?(q===document&&(q=ee()),t.top+=q.scrollTop,t.left+=q.scrollLeft):q=ee(),Dt=Pi(q)}w=p.cloneNode(!0),G(w,i.ghostClass,!1),G(w,i.fallbackClass,!0),G(w,i.dragClass,!0),E(w,"transition",""),E(w,"transform",""),E(w,"box-sizing","border-box"),E(w,"margin",0),E(w,"top",t.top),E(w,"left",t.left),E(w,"width",t.width),E(w,"height",t.height),E(w,"opacity","0.8"),E(w,"position",nt?"absolute":"fixed"),E(w,"zIndex","100000"),E(w,"pointerEvents","none"),S.ghost=w,e.appendChild(w),E(w,"transform-origin",Oi/parseInt(w.style.width)*100+"% "+ki/parseInt(w.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,s=e.dataTransfer,n=i.options;if(V("dragStart",this,{evt:e}),S.eventCanceled){this._onDrop();return}V("setupClone",this),S.eventCanceled||(x=ds(p),x.removeAttribute("id"),x.draggable=!1,x.style["will-change"]="",this._hideClone(),G(x,this.options.chosenClass,!1),S.clone=x),i.cloneId=ct(function(){V("clone",i),!S.eventCanceled&&(i.options.removeCloneOnHide||k.insertBefore(x,p),i._hideClone(),U({sortable:i,name:"clone"}))}),!t&&G(p,n.dragClass,!0),t?(bt=!0,i._loopId=setInterval(i._emulateDragOver,50)):(A(document,"mouseup",i._onDrop),A(document,"touchend",i._onDrop),A(document,"touchcancel",i._onDrop),s&&(s.effectAllowed="move",n.setData&&n.setData.call(i,s,p)),T(document,"drop",i),E(p,"transform","translateZ(0)")),Ce=!0,i._dragStartId=ct(i._dragStarted.bind(i,t,e)),T(document,"selectstart",i),Re=!0,window.getSelection().removeAllRanges(),je&&E(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,i=e.target,s,n,l,a=this.options,o=a.group,d=S.active,c=st===o,h=a.sort,f=R||d,b,m=this,u=!1;if($t)return;function g(De,Ss){V(De,m,te({evt:e,isOwner:c,axis:b?"vertical":"horizontal",revert:l,dragRect:s,targetRect:n,canSort:h,fromSortable:f,target:i,completed:C,onMove:function(si,Cs){return lt(k,t,p,s,si,F(si),e,Cs)},changed:I},Ss))}function _(){g("dragOverAnimationCapture"),m.captureAnimationState(),m!==f&&f.captureAnimationState()}function C(De){return g("dragOverCompleted",{insertion:De}),De&&(c?d._hideClone():d._showClone(m),m!==f&&(G(p,R?R.options.ghostClass:d.options.ghostClass,!1),G(p,a.ghostClass,!0)),R!==m&&m!==S.active?R=m:m===S.active&&R&&(R=null),f===m&&(m._ignoreWhileAnimating=i),m.animateAll(function(){g("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(i===p&&!p.animated||i===t&&!i.animated)&&(Ee=null),!a.dragoverBubble&&!e.rootEl&&i!==document&&(p.parentNode[z]._isOutsideThisEl(e.target),!De&&me(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),u=!0}function I(){Y=X(p),oe=X(p,a.draggable),U({sortable:m,name:"change",toEl:t,newIndex:Y,newDraggableIndex:oe,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=Q(i,a.draggable,t,!0),g("dragOver"),S.eventCanceled)return u;if(p.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||m._ignoreWhileAnimating===i)return C(!1);if(bt=!1,d&&!a.disabled&&(c?h||(l=L!==k):R===this||(this.lastPutMode=st.checkPull(this,d,p,e))&&o.checkPut(this,d,p,e))){if(b=this._getDirection(e,i)==="vertical",s=F(p),g("dragOverValid"),S.eventCanceled)return u;if(l)return L=k,_(),this._hideClone(),g("revert"),S.eventCanceled||(ge?k.insertBefore(p,ge):k.appendChild(p)),C(!0);var O=ei(t,a.draggable);if(!O||jn(e,b,this)&&!O.animated){if(O===p)return C(!1);if(O&&t===e.target&&(i=O),i&&(n=F(i)),lt(k,t,p,s,i,n,e,!!i)!==!1)return _(),O&&O.nextSibling?t.insertBefore(p,O.nextSibling):t.appendChild(p),L=t,I(),C(!0)}else if(O&&Vn(e,b,this)){var M=Pe(t,0,a,!0);if(M===p)return C(!1);if(i=M,n=F(i),lt(k,t,p,s,i,n,e,!1)!==!1)return _(),t.insertBefore(p,M),L=t,I(),C(!0)}else if(i.parentNode===t){n=F(i);var H=0,W,ue=p.parentNode!==t,B=!Hn(p.animated&&p.toRect||s,i.animated&&i.toRect||n,b),ke=b?"top":"left",le=Ti(i,"top","top")||Ti(p,"top","top"),xe=le?le.scrollTop:void 0;Ee!==i&&(W=n[ke],Ge=!1,rt=!B&&a.invertSwap||ue),H=zn(e,i,n,b,B?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,rt,Ee===i);var ie;if(H!==0){var pe=X(p);do pe-=H,ie=L.children[pe];while(ie&&(E(ie,"display")==="none"||ie===w))}if(H===0||ie===i)return C(!1);Ee=i,Ke=H;var Le=i.nextElementSibling,ae=!1;ae=H===1;var Ze=lt(k,t,p,s,i,n,e,ae);if(Ze!==!1)return(Ze===1||Ze===-1)&&(ae=Ze===1),$t=!0,setTimeout(Un,30),_(),ae&&!Le?t.appendChild(p):i.parentNode.insertBefore(p,ae?Le:i),le&&os(le,0,xe-le.scrollTop),L=p.parentNode,W!==void 0&&!rt&&(dt=Math.abs(W-F(i)[ke])),I(),C(!0)}if(t.contains(p))return C(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){A(document,"mousemove",this._onTouchMove),A(document,"touchmove",this._onTouchMove),A(document,"pointermove",this._onTouchMove),A(document,"dragover",me),A(document,"mousemove",me),A(document,"touchmove",me)},_offUpEvents:function(){var e=this.el.ownerDocument;A(e,"mouseup",this._onDrop),A(e,"touchend",this._onDrop),A(e,"pointerup",this._onDrop),A(e,"pointercancel",this._onDrop),A(e,"touchcancel",this._onDrop),A(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;if(Y=X(p),oe=X(p,i.draggable),V("drop",this,{evt:e}),L=p&&p.parentNode,Y=X(p),oe=X(p,i.draggable),S.eventCanceled){this._nulling();return}Ce=!1,rt=!1,Ge=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Kt(this.cloneId),Kt(this._dragStartId),this.nativeDraggable&&(A(document,"drop",this),A(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),je&&E(document.body,"user-select",""),E(p,"transform",""),e&&(Re&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),w&&w.parentNode&&w.parentNode.removeChild(w),(k===L||R&&R.lastPutMode!=="clone")&&x&&x.parentNode&&x.parentNode.removeChild(x),p&&(this.nativeDraggable&&A(p,"dragend",this),Nt(p),p.style["will-change"]="",Re&&!Ce&&G(p,R?R.options.ghostClass:this.options.ghostClass,!1),G(p,this.options.chosenClass,!1),U({sortable:this,name:"unchoose",toEl:L,newIndex:null,newDraggableIndex:null,originalEvent:e}),k!==L?(Y>=0&&(U({rootEl:L,name:"add",toEl:L,fromEl:k,originalEvent:e}),U({sortable:this,name:"remove",toEl:L,originalEvent:e}),U({rootEl:L,name:"sort",toEl:L,fromEl:k,originalEvent:e}),U({sortable:this,name:"sort",toEl:L,originalEvent:e})),R&&R.save()):Y!==we&&Y>=0&&(U({sortable:this,name:"update",toEl:L,originalEvent:e}),U({sortable:this,name:"sort",toEl:L,originalEvent:e})),S.active&&((Y==null||Y===-1)&&(Y=we,oe=$e),U({sortable:this,name:"end",toEl:L,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){V("nulling",this),k=p=L=w=ge=x=ot=de=fe=J=Re=Y=oe=we=$e=Ee=Ke=R=st=S.dragged=S.ghost=S.clone=S.active=null,yt.forEach(function(e){e.checked=!0}),yt.length=xt=Lt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":p&&(this._onDragOver(e),qn(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,i=this.el.children,s=0,n=i.length,l=this.options;s<n;s++)t=i[s],Q(t,l.draggable,this.el,!1)&&e.push(t.getAttribute(l.dataIdAttr)||Kn(t));return e},sort:function(e,t){var i={},s=this.el;this.toArray().forEach(function(n,l){var a=s.children[l];Q(a,this.options.draggable,s,!1)&&(i[n]=a)},this),t&&this.captureAnimationState(),e.forEach(function(n){i[n]&&(s.removeChild(i[n]),s.appendChild(i[n]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Q(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(t===void 0)return i[e];var s=Qe.modifyOption(this,e,t);typeof s<"u"?i[e]=s:i[e]=t,e==="group"&&ps(i)},destroy:function(){V("destroy",this);var e=this.el;e[z]=null,A(e,"mousedown",this._onTapStart),A(e,"touchstart",this._onTapStart),A(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(A(e,"dragover",this),A(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),_t.splice(_t.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!de){if(V("hideClone",this),S.eventCanceled)return;E(x,"display","none"),this.options.removeCloneOnHide&&x.parentNode&&x.parentNode.removeChild(x),de=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(de){if(V("showClone",this),S.eventCanceled)return;p.parentNode==k&&!this.options.group.revertClone?k.insertBefore(x,p):ge?k.insertBefore(x,ge):k.appendChild(x),this.options.group.revertClone&&this.animate(p,x),E(x,"display",""),de=!1}}};function qn(r){r.dataTransfer&&(r.dataTransfer.dropEffect="move"),r.cancelable&&r.preventDefault()}function lt(r,e,t,i,s,n,l,a){var o,d=r[z],c=d.options.onMove,h;return window.CustomEvent&&!ne&&!Je?o=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(o=document.createEvent("Event"),o.initEvent("move",!0,!0)),o.to=e,o.from=r,o.dragged=t,o.draggedRect=i,o.related=s||e,o.relatedRect=n||F(e),o.willInsertAfter=a,o.originalEvent=l,r.dispatchEvent(o),c&&(h=c.call(d,o,l)),h}function Nt(r){r.draggable=!1}function Un(){$t=!1}function Vn(r,e,t){var i=F(Pe(t.el,0,t.options,!0)),s=cs(t.el,t.options,w),n=10;return e?r.clientX<s.left-n||r.clientY<i.top&&r.clientX<i.right:r.clientY<s.top-n||r.clientY<i.bottom&&r.clientX<i.left}function jn(r,e,t){var i=F(ei(t.el,t.options.draggable)),s=cs(t.el,t.options,w),n=10;return e?r.clientX>s.right+n||r.clientY>i.bottom&&r.clientX>i.left:r.clientY>s.bottom+n||r.clientX>i.right&&r.clientY>i.top}function zn(r,e,t,i,s,n,l,a){var o=i?r.clientY:r.clientX,d=i?t.height:t.width,c=i?t.top:t.left,h=i?t.bottom:t.right,f=!1;if(!l){if(a&&dt<d*s){if(!Ge&&(Ke===1?o>c+d*n/2:o<h-d*n/2)&&(Ge=!0),Ge)f=!0;else if(Ke===1?o<c+dt:o>h-dt)return-Ke}else if(o>c+d*(1-s)/2&&o<h-d*(1-s)/2)return $n(e)}return f=f||l,f&&(o<c+d*n/2||o>h-d*n/2)?o>c+d/2?1:-1:0}function $n(r){return X(p)<X(r)?1:-1}function Kn(r){for(var e=r.tagName+r.className+r.src+r.href+r.textContent,t=e.length,i=0;t--;)i+=e.charCodeAt(t);return i.toString(36)}function Gn(r){yt.length=0;for(var e=r.getElementsByTagName("input"),t=e.length;t--;){var i=e[t];i.checked&&yt.push(i)}}function ct(r){return setTimeout(r,0)}function Kt(r){return clearTimeout(r)}It&&T(document,"touchmove",function(r){(S.active||Ce)&&r.cancelable&&r.preventDefault()});S.utils={on:T,off:A,css:E,find:ls,is:function(e,t){return!!Q(e,t,e,!1)},extend:On,throttle:as,closest:Q,toggleClass:G,clone:ds,index:X,nextTick:ct,cancelNextTick:Kt,detectDirection:us,getChild:Pe,expando:z};S.get=function(r){return r[z]};S.mount=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(S.utils=te(te({},S.utils),i.utils)),Qe.mount(i)})};S.create=function(r,e){return new S(r,e)};S.version=Tn;var N=[],qe,Gt,Yt=!1,Ft,Mt,vt,Ue;function Yn(){function r(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return r.prototype={dragStarted:function(t){var i=t.originalEvent;this.sortable.nativeDraggable?T(document,"dragover",this._handleAutoScroll):this.options.supportPointer?T(document,"pointermove",this._handleFallbackAutoScroll):i.touches?T(document,"touchmove",this._handleFallbackAutoScroll):T(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var i=t.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?A(document,"dragover",this._handleAutoScroll):(A(document,"pointermove",this._handleFallbackAutoScroll),A(document,"touchmove",this._handleFallbackAutoScroll),A(document,"mousemove",this._handleFallbackAutoScroll)),Li(),ht(),kn()},nulling:function(){vt=Gt=qe=Yt=Ue=Ft=Mt=null,N.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,i){var s=this,n=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(n,l);if(vt=t,i||this.options.forceAutoScrollFallback||Je||ne||je){Ht(t,this.options,a,i);var o=ce(a,!0);Yt&&(!Ue||n!==Ft||l!==Mt)&&(Ue&&Li(),Ue=setInterval(function(){var d=ce(document.elementFromPoint(n,l),!0);d!==o&&(o=d,ht()),Ht(t,s.options,d,i)},10),Ft=n,Mt=l)}else{if(!this.options.bubbleScroll||ce(a,!0)===ee()){ht();return}Ht(t,this.options,ce(a,!1),!1)}}},re(r,{pluginName:"scroll",initializeByDefault:!0})}function ht(){N.forEach(function(r){clearInterval(r.pid)}),N=[]}function Li(){clearInterval(Ue)}var Ht=as(function(r,e,t,i){if(e.scroll){var s=(r.touches?r.touches[0]:r).clientX,n=(r.touches?r.touches[0]:r).clientY,l=e.scrollSensitivity,a=e.scrollSpeed,o=ee(),d=!1,c;Gt!==t&&(Gt=t,ht(),qe=e.scroll,c=e.scrollFn,qe===!0&&(qe=ce(t,!0)));var h=0,f=qe;do{var b=f,m=F(b),u=m.top,g=m.bottom,_=m.left,C=m.right,I=m.width,O=m.height,M=void 0,H=void 0,W=b.scrollWidth,ue=b.scrollHeight,B=E(b),ke=b.scrollLeft,le=b.scrollTop;b===o?(M=I<W&&(B.overflowX==="auto"||B.overflowX==="scroll"||B.overflowX==="visible"),H=O<ue&&(B.overflowY==="auto"||B.overflowY==="scroll"||B.overflowY==="visible")):(M=I<W&&(B.overflowX==="auto"||B.overflowX==="scroll"),H=O<ue&&(B.overflowY==="auto"||B.overflowY==="scroll"));var xe=M&&(Math.abs(C-s)<=l&&ke+I<W)-(Math.abs(_-s)<=l&&!!ke),ie=H&&(Math.abs(g-n)<=l&&le+O<ue)-(Math.abs(u-n)<=l&&!!le);if(!N[h])for(var pe=0;pe<=h;pe++)N[pe]||(N[pe]={});(N[h].vx!=xe||N[h].vy!=ie||N[h].el!==b)&&(N[h].el=b,N[h].vx=xe,N[h].vy=ie,clearInterval(N[h].pid),(xe!=0||ie!=0)&&(d=!0,N[h].pid=setInterval((function(){i&&this.layer===0&&S.active._onTouchMove(vt);var Le=N[this.layer].vy?N[this.layer].vy*a:0,ae=N[this.layer].vx?N[this.layer].vx*a:0;typeof c=="function"&&c.call(S.dragged.parentNode[z],ae,Le,r,vt,N[this.layer].el)!=="continue"||os(N[this.layer].el,ae,Le)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&f!==o&&(f=ce(f,!1)));Yt=d}},30),gs=function(e){var t=e.originalEvent,i=e.putSortable,s=e.dragEl,n=e.activeSortable,l=e.dispatchSortableEvent,a=e.hideGhostForTarget,o=e.unhideGhostForTarget;if(t){var d=i||n;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,h=document.elementFromPoint(c.clientX,c.clientY);o(),d&&!d.el.contains(h)&&(l("spill"),this.onSpill({dragEl:s,putSortable:i}))}};function ti(){}ti.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var s=Pe(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(t,s):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:gs};re(ti,{pluginName:"revertOnSpill"});function ii(){}ii.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable,s=i||this.sortable;s.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),s.animateAll()},drop:gs};re(ii,{pluginName:"removeOnSpill"});S.mount(new Yn);S.mount(ii,ti);let Z={},Me=!1,bs='"{{ITEM NAME}}" grabbed. Current position: {{POSITION}} of {{TOTAL ITEMS}}. Use up and down keys to move the item, space bar to drop it.',_s='"{{ITEM NAME}}" dropped at position {{POSITION}} of {{TOTAL ITEMS}}.',ys='"{{ITEM NAME}}" moved to position {{POSITION}} of {{TOTAL ITEMS}}',vs='"{{ITEM NAME}}" moved to position {{POSITION}} of {{TOTAL ITEMS}} in "{{LIST NAME}}"',Es='Move of "{{ITEM NAME}}" canceled.';window.Intellum&&window.Intellum.i18nStrings&&(bs=window.Intellum.i18nStrings.item_grabbed,_s=window.Intellum.i18nStrings.item_dropped,ys=window.Intellum.i18nStrings.item_moved_to_position,vs=window.Intellum.i18nStrings.item_moved_to_position_in_list,Es=window.Intellum.i18nStrings.item_move_canceled);class Wn extends D{static get is(){return"exceed-sortable-items"}static get properties(){return{groupName:{type:String,value:null},dragHandleSelector:{type:String,value:".exceed-sortable-items__draghandle"},draggableSelector:{type:String,value:"li"},dragListSelector:{type:String,value:"ul"},dropUpdateEndpoint:{type:String,value:""},dropUpdateMethod:{type:String,value:"put"},ghostClass:{type:String,value:"sortableitems__item--ghost"},draggingClass:{type:String,value:"sortableitems__item--dragging"},customDragImageAttribute:{type:String,value:""},customDragImageWidth:{type:Number,value:300},keepUntilDropped:{type:Boolean,value:!1},keepUntilDroppedPlaceholderClass:{type:String,value:"sortableitems__placeholder"},isLockedForDrop:{type:Boolean,value:!1},emptyListClass:{type:String,value:""},dragErrorMessage:{type:String,value:"Error moving item"},pageScrollElementId:{type:String,value:""},pageScrollThreshold:{type:Number,value:100},swapThreshold:{type:Number,value:1},disablePointerAreaSelector:{type:String,value:""},ariaDragMessageId:{type:String,value:"aria-drag-message"},a11yListName:{type:String,value:"List"},a11yAnnouncementDivId:{type:String,value:"sortableItemsA11yAnnouncements"},ariaGrabbedMessage:{type:String,value:bs},ariaDroppedMessage:{type:String,value:_s},ariaMovedMessage:{type:String,value:ys},ariaMovedToListMessage:{type:String,value:vs},ariaEscMessage:{type:String,value:Es},ariaMovedItemIndexAdjustment:{type:Number,value:1},showHoverActive:{type:Boolean,value:!1},isNested:{type:Boolean,value:!1},disableSelector:{type:String,value:".contentdisabled"},preventDraggableAttribute:{type:String,value:"data-prevent-draggable"},preventDraggableOnFocusSelector:{type:String,value:"[data-prevent-draggable-on-focus]"}}}getItemIds(e){let t=[];return e.querySelectorAll(this.draggableSelector).forEach(i=>{let s=i.dataset.itemId;s&&t.push(s)}),t}getItemInListData(e,t){let i=e.dataset.itemId,s=e.dataset.a11yItemName,n=this.getItemIds(t),l=n.indexOf(i);return{itemId:i,itemName:s,itemIdsArray:n,itemIndex:l}}handleEmptyList(e){this.emptyListClass&&(e.querySelectorAll(this.draggableSelector).length?e.classList.remove(this.emptyListClass):(e.classList.add(this.emptyListClass),e.innerHTML=""))}setFocus(e){return this.setKeyboardDragData(e),e.focus(),e}moveItem(e,t,i,s){let n;e.parentNode?(n=e.cloneNode(!0),e.parentNode.removeChild(e)):n=e;const l=s.querySelectorAll(this.draggableSelector)[t];return l?s.insertBefore(n,l):s.appendChild(n),this.handleEmptyList(s),this.handleEmptyList(i),n}revertItem(e,t,i,s,n=!1){let l=this.moveItem(e,t,s,i),a=this.setFocus(l);n?window.Intellum&&Intellum.flashnotice&&Intellum.flashnotice.show(this.dragErrorMessage,"warning"):(this._announcementDiv.innerText=this.ariaEscMessage.replace("{{ITEM NAME}}",e.dataset.a11yItemName),this.sendPositionUpdate(e,s,i,null,t)),Z.originalComponent!=this&&Z.originalComponent.initKeyboardDragData(),this.initKeyboardDragData(),Z={},a.setAttribute("aria-pressed","false")}handleDisabledPointerAreas(e){this.disablePointerAreaSelector&&document.querySelectorAll(this.disablePointerAreaSelector).forEach(function(t){e?t.style.pointerEvents="none":t.style.removeProperty("pointer-events")})}sendPositionUpdate(e,t,i,s=null,n=null){if(this.dropUpdateEndpoint){const l=this.getItemInListData(e,i);Te[this.dropUpdateMethod](this.dropUpdateEndpoint,{item_id:l.itemId,item_index:n||l.itemIndex,item_ids:l.itemIdsArray,section_id:i.dataset.sectionId,from_section_id:t.dataset.sectionId}).then(a=>{let o={itemId:e.id};Me&&(o={isKeyboardMove:Me,toList:i,itemId:e.id}),v.publish(y.sortable_success,o)}).catch(()=>{s&&(this.revertItem(e,s,t,i,!0),v.publish(y.sortable_error))})}}makeSortable(){let e={name:this.groupName||"items"};this.isLockedForDrop&&(e.put=!1);let t,i;this.pageScrollElementId&&(t=document.getElementById(this.pageScrollElementId)),i=t||!0,this._sortableInstance=S.create(this._sortableEl,{draggable:this.draggableSelector,handle:this.dragHandleSelector,scroll:i,scrollSensitivity:this.pageScrollThreshold,group:e,dragClass:this.draggingClass,ghostClass:this.ghostClass,chosenClass:this.draggingClass,swapThreshold:this.swapThreshold,forceFallback:!0,fallbackTolerance:15,onRemove:s=>{this.handleEmptyList(s.from)},onStart:s=>{this.handleDisabledPointerAreas(!0),this.keepUntilDropped&&this.createKeepInPlaceClone(s.item),v.publish(y.sortable_start),this.handleEmptyList(s.from)},onAdd:s=>{this.handleEmptyList(s.to)},onEnd:s=>{this.handleDisabledPointerAreas(!1),this.keepUntilDropped&&this.removeKeepInPlaceClone(),this.sendPositionUpdate(s.item,s.from,s.to,s.oldIndex)}})}handleCustomDragImages(){if(!this.customDragImageAttribute)return;let e,t,i=[];this._sortableEl.querySelectorAll(`[${this.customDragImageAttribute}]`).forEach((s,n)=>{let l=s.getAttribute(this.customDragImageAttribute);l&&(i[n]=document.createElement("img"),i[n].src=l)}),this._sortableEl.addEventListener("dragstart",s=>{let n=s.target.getAttribute(this.customDragImageAttribute);n&&(t=document.createElement("img"),e=document.createElement("div"),t.src=n,t.width=this.customDragImageWidth,t.classList.add("sortableitems__customdragimage"),e.appendChild(t),document.querySelector("body").appendChild(e),s.dataTransfer.setDragImage(e,20,20))}),this._sortableEl.addEventListener("dragend",()=>{t&&t.parentNode&&t.parentNode.removeChild(t),e&&e.parentNode&&e.parentNode.removeChild(e)})}createKeepInPlaceClone(e){this._placeholderCloneEl=e.cloneNode(!0),this._placeholderCloneEl.classList.remove(this.ghostClass),this._placeholderCloneEl.classList.add(this.keepUntilDroppedPlaceholderClass),this._placeholderCloneEl.removeAttribute("item-id"),this._placeholderCloneEl.dataset.itemId=!1,e.parentNode.insertBefore(this._placeholderCloneEl,e)}removeKeepInPlaceClone(){this._placeholderCloneEl.parentNode.removeChild(this._placeholderCloneEl)}setRevertData(e,t,i=this._sortableEl,s=this._sortableEl){Z={originalComponent:this,item:e,originalIndex:t,fromList:i,toList:s}}updateRevertData(e,t){Z.item=e,Z.toList=t}getAdjacentLists(e){const t=this.groupName?`exceed-sortable-items[group-name="${this.groupName}"]`:"exceed-sortable-items",i=this.groupName?`exceed-sortable-items[group-name="${this.groupName}"]:not([is-locked-for-drop])`:"exceed-sortable-items:not([is-locked-for-drop])",s=e.closest(t),n=document.querySelectorAll(i),l={current:s.querySelector(this.dragListSelector)};return n.forEach((a,o)=>{a===s&&(o>0&&(l.before=n[o-1].querySelector(this.dragListSelector)),o+1<n.length&&(l.after=n[o+1].querySelector(this.dragListSelector)))}),l}getDataForKeyboardMove(e,t){const i=this.getAdjacentLists(e),s=this.getItemInListData(e,i.current);return t==="up"&&e.previousElementSibling&&e.previousElementSibling.matches(this.draggableSelector)?{item:e,fromIndex:s.itemIndex,newIndex:s.itemIndex-1,fromList:i.current,toList:i.current,toListCount:this.getItemIds(i.current).length}:t==="up"&&i.before?{item:e,fromIndex:s.itemIndex,newIndex:this.getItemIds(i.before).length,fromList:i.current,toList:i.before,toListCount:this.getItemIds(i.before).length}:t==="down"&&e.nextElementSibling&&e.nextElementSibling.matches(this.draggableSelector)?{item:e,fromIndex:s.itemIndex,newIndex:s.itemIndex+1,fromList:i.current,toList:i.current,toListCount:this.getItemIds(i.current).length}:t==="down"&&i.after?{item:e,fromIndex:s.itemIndex,newIndex:0,fromList:i.current,toList:i.after,toListCount:this.getItemIds(i.after).length}:!1}handleKeyboardMove(e,t){let i=this.getDataForKeyboardMove(e,t);if(i){let s=this.moveItem(e,i.newIndex,i.fromList,i.toList);this.sendPositionUpdate(e,i.fromList,i.toList,i.fromIndex),this.updateRevertData(s,i.toList),i.fromList!==i.toList&&(this.initKeyboardDragData(),s.dataset.isInNewList=!0),this.setKeyboardDragData(s),this.setFocus(s),i.toList==i.fromList?this._announcementDiv.innerText=this.ariaMovedMessage.replace("{{ITEM NAME}}",i.item.dataset.a11yItemName).replace("{{POSITION}}",i.newIndex+this.ariaMovedItemIndexAdjustment).replace("{{TOTAL ITEMS}}",i.toListCount):this._announcementDiv.innerText=this.ariaMovedToListMessage.replace("{{ITEM NAME}}",i.item.dataset.a11yItemName).replace("{{POSITION}}",i.newIndex+this.ariaMovedItemIndexAdjustment).replace("{{TOTAL ITEMS}}",i.toListCount+1).replace("{{LIST NAME}}",i.toList.dataset.a11yListName)}}getItemUniqueIdentifier(e){return`${Array.from(e.classList).join("_")}_${e.dataset.itemId}`}doesItemMatch(e,t){return e?(e.id||this.getItemUniqueIdentifier(e))===t:!1}setKeyboardDragData(e){this._keyboardDragData={selectedItemId:e.id||this.getItemUniqueIdentifier(e)}}initKeyboardDragData(){this._keyboardDragData={}}bindDragItemsForList(){this._sortableEl.addEventListener("keydown",e=>{this.isNested&&e.stopPropagation();const t=e.target.closest(this.draggableSelector);if(!t||t.hasAttribute(this.preventDraggableAttribute))return!1;let i=this.getItemInListData(t,this._sortableEl);t&&t.dataset.isInNewList&&(this.setKeyboardDragData(t),delete t.dataset.isInNewList),e.key===" "||e.key==="Spacebar"?(e.target.isContentEditable||e.target.type=="text"||e.target.tagName=="TEXTAREA"||e.preventDefault(),this._keyboardDragData.selectedItemId&&this.doesItemMatch(t,this._keyboardDragData.selectedItemId)?(this.initKeyboardDragData(),t.setAttribute("aria-pressed","false"),this._announcementDiv.innerText=this.ariaDroppedMessage.replace("{{ITEM NAME}}",i.itemName).replace("{{POSITION}}",i.itemIndex+1).replace("{{TOTAL ITEMS}}",i.itemIdsArray.length),Me=!1):(this.setKeyboardDragData(t),this.setRevertData(t,i.itemIndex),t.setAttribute("aria-pressed","true"),this._announcementDiv.innerText=this.ariaGrabbedMessage.replace("{{ITEM NAME}}",i.itemName).replace("{{POSITION}}",i.itemIndex+1).replace("{{TOTAL ITEMS}}",i.itemIdsArray.length),Me=!0,v.publish(y.sortable_choose,{isKeyboardMove:Me,toList:this._sortableEl,itemId:t.id}))):wt.indexOf(e.key)>-1&&this.doesItemMatch(t,this._keyboardDragData.selectedItemId)?this.handleKeyboardMove(t,"up"):Ct.indexOf(e.key)>-1&&this.doesItemMatch(t,this._keyboardDragData.selectedItemId)?this.handleKeyboardMove(t,"down"):e.key==="Tab"?this.initKeyboardDragData():(e.key==="Escape"||e.key==="Esc")&&this._keyboardDragData.selectedItemId&&this.revertItem(Z.item,Z.originalIndex,Z.fromList,Z.toList)})}setupA11yDragItems(e){e.setAttribute("grabbable","true"),e.setAttribute("aria-pressed","false"),e.setAttribute("tabindex",0),e.setAttribute("aria-describedby",this.ariaDragMessageId);let t=e.querySelector(this.dragHandleSelector);t&&t.setAttribute("aria-hidden","true")}setupAnnouncementDiv(){if(this._announcementDiv=document.getElementById(this.a11yAnnouncementDivId),!this._announcementDiv){const e=document.querySelector("exceed-sortable-items"),t=document.createElement("div");t.id=this.a11yAnnouncementDivId,t.classList.add("a11y-atonly"),t.setAttribute("aria-live","assertive"),t.setAttribute("aria-atomic","true"),this._announcementDiv=e.parentElement.insertBefore(t,e)}}handleHoverActive(e){e.classList.add("sortableitems__item--showhoveractive");let t=e.parentElement.closest(".sortableitems__item");t&&(e.addEventListener("mouseover",i=>{t.classList.add("sortableitems__item--blockhoveractive")}),e.addEventListener("mouseout",i=>{t.classList.remove("sortableitems__item--blockhoveractive")})),e.querySelectorAll("button, a[href], .sortableitems__interactivesubitem").forEach(i=>{i.addEventListener("mouseover",s=>{e.classList.add("sortableitems__item--blockhoveractive")}),i.addEventListener("mouseout",s=>{e.classList.remove("sortableitems__item--blockhoveractive")})})}disableDraggable(e){e.target.closest(this.draggableSelector).removeAttribute("draggable")}enableDraggable(e){e.target.closest(this.draggableSelector).setAttribute("draggable","true")}handleDraggableItems(){this.querySelectorAll(this.draggableSelector).forEach(e=>{e.hasAttribute(this.preventDraggableAttribute)||(e.classList.add("sortableitems__item"),e.setAttribute("draggable","false"),e.setAttribute("role","option button"),this.setupA11yDragItems(e),this.showHoverActive&&this.handleHoverActive(e))}),this.querySelectorAll(this.preventDraggableOnFocusSelector).forEach(e=>{const t=this.disableDraggable.bind(this),i=this.enableDraggable.bind(this);e.addEventListener("focus",t),e.addEventListener("blur",i)})}initElements(){this.setupAnnouncementDiv(),this._sortableEl=this.querySelector(this.dragListSelector),this._sortableEl.classList.add("sortableitems__list"),this._sortableEl.dataset.a11yListName=this.a11yListName,this.emptyListClass&&this.handleEmptyList(this._sortableEl),this.handleDraggableItems(),this.bindDragItemsForList(),this.handleCustomDragImages()}ready(){if(super.ready(),this.closest(this.disableSelector)){this.querySelectorAll(this.draggableSelector).forEach(e=>{e.setAttribute("tabindex",-1)});return}this.initKeyboardDragData(),this.initElements(),this.makeSortable()}}customElements.define("exceed-sortable-items",Wn);class Xn extends D{static get is(){return"exceed-remove-item"}static get properties(){return{itemId:{type:String,value:""},confirmDialogId:{type:String,value:""},confirmButtonId:{type:String,value:""},triggerSelector:{type:String,value:"button"},removeItemEndpoint:{type:String,value:""},removeItemMethod:{type:String,value:"delete"},removeSuccessMessage:{type:String,value:""},removeErrorMessage:{type:String,value:""},isSendingMessage:{type:Boolean,value:!1},removingItemClass:{type:String,value:""},reloadFormIfEmptied:{type:Boolean,value:!1},parentFormSelector:{type:String,value:"exceed-magic-form"},isUndoingRenderInPlace:{type:Boolean,value:!1}}}showFeedback(e,t){!window.Intellum||!Intellum.flashnotice||(t=t||this.removeErrorMessage,e&&this.removeSuccessMessage?Intellum.flashnotice.show(this.removeSuccessMessage):!e&&t&&Intellum.flashnotice.show(t,"warning"))}sendMessage(e){this.isSendingMessage&&v.publish(y.update_content,{source:e.id,count:e.childElementCount.toString()})}publishRemovedEvent(){v.publish(y.remove_success,{itemId:this.itemId})}setRemovingClass(e,t){if(!this.removingItemClass)return!1;t?e.classList.add(this.removingItemClass):e.classList.remove(this.removingItemClass)}reloadFormIfLastItemRemoved(e,t){if(this.reloadFormIfEmptied&&!e.innerHTML.trim()&&t){let i=e.closest(this.parentFormSelector)||e.closest('form[data-remote="true"]');i&&(i.innerHTML=t)}}removeItem(e){let t=document.getElementById(this.itemId),i=t.parentNode;if(!t||this._isDeleting)return!1;this._isDeleting=!0,v.publish(y.remove_start,{itemId:this.itemId}),this.setRemovingClass(t,!0),Te[this.removeItemMethod](this.removeItemEndpoint).then(s=>{i.removeChild(t),this.sendMessage(i),this.showFeedback(!(e&&e.isFail)),this.publishRemovedEvent(),this.reloadFormIfLastItemRemoved(i,s.data)}).catch(s=>{this.setRemovingClass(t),this._isDeleting=!1,s.response&&s.response.data&&s.response.data.errors&&this.showFeedback(!1,s.response.data.errors[0])})}startRemove(e){this._dialogEl?(this._dialogEl.dispatchEvent(new window.CustomEvent("show.dialog",{detail:{trigger:null}})),this._confirmButtonEl.addEventListener("click",this._boundConfirmListener)):this.removeItem(e)}triggerListener(){this._triggerEl.blur(),this.startRemove()}handleRemoveRequestEvents(){this._handleRemoveEvents=v.subscribe(y.remove_item,(e,t)=>{t.itemId===this.itemId&&this.startRemove(t)})}confirmListener(){this._confirmButtonEl&&this._dialogEl&&(this._confirmButtonEl.removeEventListener("click",this._boundConfirmListener),this._dialogEl.dispatchEvent(new window.CustomEvent("hide.dialog")),this.removeItem())}handleCancelConfirm(){this._dialogEl&&(this.isUndoingRenderInPlace&&this._dialogEl.parentNode!==document.body&&document.body.appendChild(this._dialogEl),this._dialogEl.addEventListener("hide.dialog",()=>{this._confirmButtonEl.removeEventListener("click",this._boundConfirmListener)}))}connectedCallback(){super.connectedCallback(),this._triggerEl=this.querySelector(this.triggerSelector)||document.querySelector(this.triggerSelector),this.confirmDialogId&&(this._dialogEl=document.getElementById(this.confirmDialogId),this._confirmButtonEl=document.getElementById(this.confirmButtonId),this.handleCancelConfirm()),this._triggerEl&&this._triggerEl.addEventListener("click",this._boundTriggerListener),this.handleRemoveRequestEvents()}disconnectedCallback(){super.disconnectedCallback(),this._triggerEl&&this._triggerEl.removeEventListener("click",this._boundTriggerListener),this._confirmButtonEl&&this._confirmButtonEl.removeEventListener("click",this._boundConfirmListener),v.unsubscribe(this._handleRemoveEvents)}constructor(){super(),this._boundTriggerListener=this.triggerListener.bind(this),this._boundConfirmListener=this.confirmListener.bind(this)}}customElements.define("exceed-remove-item",Xn);class Jn extends D{static get is(){return"exceed-approve-item"}static get properties(){return{itemId:{type:String,value:""},confirmDialogId:{type:String,value:""},confirmButtonId:{type:String,value:""},triggerSelector:{type:String,value:"button"},approveItemEndpoint:{type:String,value:""},approveItemMethod:{type:String,value:"put"},approveSuccessMessage:{type:String,value:""},approveErrorMessage:{type:String,value:""},isSendingMessage:{type:Boolean,value:!1},approvingItemClass:{type:String,value:""},reloadFormIfEmptied:{type:Boolean,value:!1},parentFormSelector:{type:String,value:"exceed-magic-form"}}}showFeedback(e,t){!window.Intellum||!Intellum.flashnotice||(t=t||this.approveErrorMessage,e&&this.approveSuccessMessage?Intellum.flashnotice.show(this.approveSuccessMessage):!e&&t&&Intellum.flashnotice.show(t,"warning"))}publishApprovedEvent(){v.publish(y.approve_success,{itemId:this.itemId})}setApprovingClass(e,t){if(!this.approvingItemClass)return!1;t?e.classList.add(this.approvingItemClass):e.classList.remove(this.approvingItemClass)}removeElement(e){let t=e.getElementsByTagName("exceed-approve-item")[0];t&&t.remove()}approveItem(){let e=document.getElementById(this.itemId);if(e.parentNode,!e||this._isApproving)return!1;this._isApproving=!0,v.publish(y.approve_start,{itemId:this.itemId}),this.setApprovingClass(e,!0),Te[this.approveItemMethod](this.approveItemEndpoint).then(t=>{this.removeElement(e),this.setApprovingClass(e,!1),this.showFeedback(!0)}).catch(t=>{this.setApprovingClass(e),this._isApproving=!1,t.response&&t.response.data&&t.response.data.errors&&this.showFeedback(!1,t.response.data.errors[0])})}startApprove(){this.approveItem()}triggerListener(){this.triggerEl.blur(),this.startApprove()}disconnectedCallback(){super.disconnectedCallback(),this.triggerEl.removeEventListener("click",this._boundTriggerListener)}connectedCallback(){super.connectedCallback(),this.triggerEl=this.querySelector(this.triggerSelector),this.triggerEl&&this.triggerEl.addEventListener("click",this._boundTriggerListener)}constructor(){super(),this._boundTriggerListener=this.triggerListener.bind(this)}}customElements.define("exceed-approve-item",Jn);class Qn extends D{static get is(){return"exceed-set-field"}static get properties(){return{targetTextFieldId:{type:String},targetValueFieldId:{type:String},itemValue:{type:String},selectableElSelector:{type:String,value:""},selectedClass:{type:String,value:""},itemText:{type:String,value:""},allowEventDefault:{type:Boolean,value:!1}}}doSetValues(){this.addEventListener("click",e=>{this.allowEventDefault||e.preventDefault();let t=document.getElementById(this.targetValueFieldId),i=document.getElementById(this.targetTextFieldId);if(this.targetValueFieldId&&t&&(t.value=this.itemValue),this.targetTextFieldId&&i&&(i.value=this.itemText||this.innerText),this.selectedClass.length&&this.selectableElSelector.length){document.querySelectorAll(this.selectableElSelector).forEach(l=>{l.classList.remove(this.selectedClass)});let n=this.querySelector(this.selectableElSelector);n&&n.classList.add(this.selectedClass)}})}connectedCallback(){super.connectedCallback(),this.doSetValues()}}customElements.define("exceed-set-field",Qn);class Zn extends D{static get properties(){return{isClickableRows:{type:Boolean,value:!1},hoverContentSelector:{type:String,value:"[data-row-hover-content]"},hoverContentClass:{type:String,value:""},bulkCheckboxSelector:{type:String,value:""},bulkHiddenInputSelector:{type:String,value:""},itemCheckboxesSelector:{type:String,value:""},bulkActionsId:{type:String,value:""},nonBulkActionsId:{type:String,value:""},hiddenActionsClass:{type:String,value:"a11y-hidden"},selectAllNoticeId:{type:String,value:""},allOnPageSelectedText:{type:String,value:"All {{COUNT}} items on this page have been selected."},allSelectedText:{type:String,value:"All {{COUNT}} items have been selected."},selectAllText:{type:String,value:"Select all results for current filters"},selectNoneText:{type:String,value:"Clear selections"},noMoreResultsText:{type:String,value:"There are no more results."},totalItemsCount:{type:Number,value:0}}}static get is(){return"exceed-table-utils"}setupClickableRows(){this.isClickableRows&&this.querySelector("tbody").addEventListener("click",()=>{const e=event.target.closest("td");if(e&&!e.getAttribute("data-block-row-click")){const t=e.closest("tr");if(t){const i=t.getAttribute("data-href");i&&(location.href=i)}}})}setupRowHovers(){this.querySelectorAll(this.hoverContentSelector).forEach(e=>{e.hasAttribute("data-intelluminitialized")||e.closest("tr")&&(e.firstElementChild.classList.add(this.hoverContentClass),e.setAttribute("data-intelluminitialized",!0))})}setupCheckboxes(){this.bulkCheckboxSelector.length&&this.itemCheckboxesSelector.length&&this.bulkActionsId.length&&(this._bulkCheckbox=this.querySelector(this.bulkCheckboxSelector),this._bulkCheckbox&&this._bulkCheckbox.tagName!="INPUT"&&(this._bulkCheckbox=this._bulkCheckbox.querySelector('input[type="checkbox"]')),this._itemCheckboxes=this.querySelectorAll(this.itemCheckboxesSelector),this._bulkActions=document.getElementById(this.bulkActionsId),this.nonBulkActionsId.length&&(this._nonBulkActions=document.getElementById(this.nonBulkActionsId)),this._bulkCheckbox&&this._itemCheckboxes&&(this.bindCheckboxHandlers(),this.selectAllNoticeId.length&&(this._selectAllNotice=document.getElementById(this.selectAllNoticeId),this._selectAllNotice&&this.bulkHiddenInputSelector.length&&(this._bulkHiddenInput=document.querySelector(this.bulkHiddenInputSelector),this._bulkHiddenInput&&(this._selectAllAction=document.createElement("button"),this._selectAllAction.setAttribute("type","button"),this._selectAllAction.classList.add("button","button--link"),this._selectAllAction.innerHTML=this.totalItemsCount>0?this.selectAllText.replace("{{COUNT}}",this.totalItemsCount):this.selectAllText.replace("{{COUNT}}",""),this._selectNoneAction=document.createElement("button"),this._selectNoneAction.setAttribute("type","button"),this._selectNoneAction.classList.add("button","button--link"),this._selectNoneAction.innerHTML=this.selectNoneText,this.bindSelectButtonActions()))),this.handleBulkCheckboxEffects()))}handleBulkCheckboxEffects(){this._itemCheckboxes.forEach(e=>{e.checked=this._bulkCheckbox.checked}),this.handleItemCheckboxEffects()}handleItemCheckboxEffects(){let e=this.querySelector(`${this.itemCheckboxesSelector}:not(:checked)`),t=this.querySelectorAll(`${this.itemCheckboxesSelector}:checked`);e&&(this._bulkCheckbox.checked=!1),t.length?(this._bulkActions.classList.remove(this.hiddenActionsClass),this._nonBulkActions&&this._nonBulkActions.classList.add(this.hiddenActionsClass)):(this._bulkActions.classList.add(this.hiddenActionsClass),this._nonBulkActions&&this._nonBulkActions.classList.remove(this.hiddenActionsClass)),this._checkedItemsCount=t.length,this._selectAllNotice&&(e?this._selectAllNotice.innerHTML="":(this._selectAllNotice.innerHTML=this.allOnPageSelectedText.replace("{{COUNT}}",this._checkedItemsCount),this._selectAllAction&&(this.totalItemsCount>1&&this._checkedItemsCount<this.totalItemsCount?(this._selectAllNotice.innerHTML+=" ",this._selectAllNotice.append(this._selectAllAction)):this._selectAllNotice.innerHTML+=` ${this.noMoreResultsText}`)))}handleActionsOnDisconnect(){this._bulkActions&&this._bulkActions.classList.add(this.hiddenActionsClass),this._nonBulkActions&&this._nonBulkActions.classList.remove(this.hiddenActionsClass)}handleSelectUndisplayedActions(e=!1){e?(this._bulkHiddenInput.setAttribute("value","all"),this._selectAllNotice.removeChild(this._selectAllAction),this._selectAllNotice.innerHTML=`${this.allSelectedText.replace("{{COUNT}}",this.totalItemsCount)} `,this._selectAllNotice.append(this._selectNoneAction)):(this._bulkHiddenInput.setAttribute("value",""),this._bulkCheckbox.checked=!1,this.handleBulkCheckboxEffects())}bindCheckboxHandlers(){this._boundBulkCheckboxClickHandler=this.handleBulkCheckboxEffects.bind(this),this._boundItemCheckboxClickHandler=this.handleItemCheckboxEffects.bind(this),this._bulkCheckbox.addEventListener("click",this._boundBulkCheckboxClickHandler),this._itemCheckboxes.forEach(e=>{e.addEventListener("click",this._boundItemCheckboxClickHandler)})}bindSelectButtonActions(){this._boundSelectAllActionHandler=this.handleSelectUndisplayedActions.bind(this,!0),this._selectAllAction.addEventListener("click",this._boundSelectAllActionHandler),this._boundSelectNoneActionHandler=this.handleSelectUndisplayedActions.bind(this,!1),this._selectNoneAction.addEventListener("click",this._boundSelectNoneActionHandler)}unbindCheckboxHandlers(){this._bulkCheckbox&&this._boundBulkCheckboxClickHandler&&this._bulkCheckbox.removeEventListener("click",this._boundBulkCheckboxClickHandler),this._itemCheckboxes&&this._boundItemCheckboxClickHandler&&this._itemCheckboxes.forEach(e=>{e.removeEventListener("click",this._boundItemCheckboxClickHandler)})}unbindSelectButtonActions(){this._boundSelectAllActionHandler&&this._boundSelectNoneActionHandler&&(this._selectAllAction.removeEventListener("click",this._boundSelectAllActionHandler),this._selectNoneAction.removeEventListener("click",this._boundSelectNoneActionHandler))}init(){this.setupClickableRows(),this.setupRowHovers(),this.setupCheckboxes(),this._subscribeToLoaded=v.subscribe(y.infinitescroll.loaded,()=>{this.setupRowHovers(),this.setupCheckboxes()})}connectedCallback(){super.connectedCallback(),this.init()}disconnectedCallback(){super.connectedCallback(),v.unsubscribe(this._subscribeToLoaded),this.handleActionsOnDisconnect(),this.unbindCheckboxHandlers(),this.unbindSelectButtonActions()}}customElements.define("exceed-table-utils",Zn);class el extends D{static get properties(){return{targetSelector:{type:String,value:""},targetFocus:{type:String,value:""},toggleClass:{type:String,value:""},triggerSelector:{type:String,value:""},triggerToggleClass:{type:String,value:""},pauseTransitionClass:{type:String,value:""},pauseTransitionTime:{type:Number,value:1e3},preventBodyScroll:{type:Boolean,value:!1},hasDynamicContent:{type:Boolean,value:!1},disableHiddenContent:{type:Boolean,value:!1}}}static get is(){return"exceed-toggle-button"}handleBodyScroll(e){const t="body--noscroll";e?document.body.classList.add(t):document.body.classList.remove(t)}doToggle(){this.triggerSelector.length&&(this.triggerEl=this.querySelector(this.triggerSelector)),this.targetEls=document.querySelectorAll(this.targetSelector),this.addEventListener("click",()=>{let e=document.querySelectorAll(this.targetSelector).length>document.querySelectorAll(`.${this.toggleClass}`).length;this.hasDynamicContent&&(this.targetEls=document.querySelectorAll(this.targetSelector)),this.targetEls.forEach(t=>{e?(this.pauseTransitionClass&&t.classList.remove(this.pauseTransitionClass),t.classList.add(this.toggleClass),t.removeAttribute("aria-hidden"),this.triggerEl?(this.triggerEl.classList.add(this.triggerToggleClass),this.triggerEl.setAttribute("aria-expanded","true")):this.setAttribute("aria-expanded","true"),this.disableHiddenContent&&t.removeAttribute("disabled")):(t.classList.remove(this.toggleClass),t.setAttribute("aria-hidden","true"),this.triggerEl?(this.triggerEl.classList.remove(this.triggerToggleClass),this.triggerEl.setAttribute("aria-expanded","false")):this.setAttribute("aria-expanded","false"),this.disableHiddenContent&&t.setAttribute("disabled","disabled"),window.setTimeout(()=>{this.pauseTransitionClass&&t.classList.add(this.pauseTransitionClass)},this.pauseTransitionTime)),this.isToggledOn=!this.isToggledOn}),this.targetFocus.length&&!document.body.classList.contains("a11y-nofocus")&&window.setTimeout(()=>{document.querySelector(this.targetFocus).focus()},100),this.handleBodyScroll(this.preventBodyScroll&&e)})}connectedCallback(){super.connectedCallback(),this.doToggle()}}customElements.define("exceed-toggle-button",el);const Di="saving",Bt="complete";class tl extends D{static get properties(){return{autoSavePath:{type:String,value:""},uploadFileControlsSelector:{type:String,value:".uploadfile"},uploadField:{type:String,value:""},existingFileInfoSelector:{type:String,value:".uploadmanager__filename"}}}static get is(){return"exceed-upload-manager"}showFeedback(e){window.Intellum&&Intellum.flashnotice&&e&&Intellum.flashnotice.show(e)}sendUploadSuccessEvent(e,t,i){v.publish(y.uploadfile_change,{uploadField:this.uploadField,url:e,status:t,fileName:i}),t===Bt&&this.hideFileInfo()}sendUploadRemoveEvent(){this.fileUploaderEl.dispatchEvent(new CustomEvent("delete")),v.publish(y.uploadfile_delete,{uploadField:this.uploadField}),this.hideFileInfo()}sendUploadStartEvent(){v.publish(y.uploadfile_start,{uploadField:this.uploadField})}sendAutoSaveErrorEvent(e){e?this.fileUploaderEl.innerHTML=`<span class="uploadfile__status uploadfile__error">${this.dataset.removeErrorMsg}</span>`:this.fileUploaderEl.dispatchEvent(new CustomEvent("error")),v.publish(y.uploadfile_error,{uploadField:this.uploadField}),this.fileInfoEl&&(this.fileInfoEl.innerHTML=this.cachedFileInfo,this.fileInfoEl.hidden=!1)}hideFileInfo(){this.fileInfoEl&&(this.fileInfoEl.hidden=!0)}autoSave(e){let t=encodeURIComponent(e),i=`${this.autoSavePath}/?file_url=${t}`;Te.post(i).then(s=>{s.data.status==="processing"&&v.publish(y.uploadfile_processing,{processing_url:s.data.processing_url}),this.sendUploadSuccessEvent(s.data.url,Bt),this.showFeedback(s.data.message)}).catch(()=>{this.sendAutoSaveErrorEvent()})}autoRemove(){Te.delete(this.autoSavePath).then(e=>{this.sendUploadRemoveEvent(),this.showFeedback(e.data.message)}).catch(()=>{this.sendAutoSaveErrorEvent(!0)})}handleUploadCompleteEvent(e){let t=e.detail.path;this.autoSavePath&&t?(this.sendUploadSuccessEvent(t,Di),this.autoSave(t)):this.sendUploadSuccessEvent(t,Bt,e.detail.fileName)}handleUploadRemoveEvent(){this.autoSavePath?(this.sendUploadSuccessEvent("",Di),this.autoRemove()):this.sendUploadRemoveEvent()}handleUploadStartEvent(){this.sendUploadStartEvent()}handleFormRevertEvent(){this.fileUploaderEl.dispatchEvent(new CustomEvent("revert",{detail:{initialImageState:this.initialImageState}}))}setupFileInfo(){this.fileInfoEl=this.querySelector(this.existingFileInfoSelector),this.fileInfoEl&&(this.cachedFileInfo=this.fileInfoEl.innerHTML)}initUploadControls(){this.fileUploaderEl&&!this.fileUploaderEl.dataset.intelluminitialized&&window.jQuery&&new window.Intellum.uploadFile($(this.fileUploaderEl))}init(){this.fileUploaderEl=this.querySelector(this.uploadFileControlsSelector),this.managedPreviewImage=this.querySelector("exceed-uploaded-image"),this.managedPreviewImage?this.initialImageState=!this.managedPreviewImage.classList.contains("uploadedimage--empty"):this.initialImageState=!1,this.initUploadControls(),this.setupFileInfo(),this.fileUploaderEl.addEventListener("uploadfile.complete",this._boundHandleUploadCompleteEvent),this.fileUploaderEl.addEventListener("uploadfile.removed",this._boundHandleUploadRemoveEvent),this.fileUploaderEl.addEventListener("uploadfile.start",this._boundHandleUploadStartEvent),v.subscribe(y.form,(e,t)=>{e===y.form_revert&&this.handleFormRevertEvent()})}connectedCallback(){super.connectedCallback(),this.init()}disconnectedCallback(){super.connectedCallback(),this.fileUploaderEl.removeEventListener("uploadfile.complete",this._boundHandleUploadCompleteEvent),this.fileUploaderEl.removeEventListener("uploadfile.removed",this._boundHandleUploadRemoveEvent),this.fileUploaderEl.removeEventListener("uploadfile.start",this._boundHandleUploadStartEvent),v.unsubscribe(y.form)}constructor(){super(),this._boundHandleUploadCompleteEvent=this.handleUploadCompleteEvent.bind(this),this._boundHandleUploadRemoveEvent=this.handleUploadRemoveEvent.bind(this),this._boundHandleUploadStartEvent=this.handleUploadStartEvent.bind(this)}}customElements.define("exceed-upload-manager",tl);class il extends D{static get properties(){return{emptyClass:{type:String,value:"uploadedimage--empty"},savingClass:{type:String,value:"uploadedimage--saving"},uploadField:{type:String,value:""},pollingPath:{type:String,value:""},pollingInterval:{type:Number,value:1e4},imageStyle:{type:String,value:""},defaultImageContainerSelector:{type:String,value:""},isVideo:{type:Boolean,value:!1},videoFileNameSelector:{type:String,value:".uploadedimage__videofilename"}}}static get is(){return"exceed-uploaded-image"}updateImage(e,t,i){console.log(e),console.log(t),console.log(i),this.isVideo?this.videoFileNameEl&&i&&(this.videoFileNameEl.innerText=i):e&&(this.imageEl?this.oldImageSrc=this.imageEl.getAttribute("src"):this.addImgEl()),this.imageEl&&(this.imageEl.hidden=!1,this.imageEl.setAttribute("src",e)),this.classList.remove(this.emptyClass),this.defaultImageEl&&this.defaultImageEl.setAttribute("hidden","hidden"),setTimeout(()=>{t==="saving"?this.classList.add(this.savingClass):(this.classList.remove(this.savingClass),this.newImageSrc=e,v.publish(y.uploadfile_added,{}))},500)}revertImage(){this.imageEl?this.newImageSrc.length&&this.imageEl.getAttribute("src")==this.newImageSrc?this.oldImageSrc.length?this.imageEl.setAttribute("src",this.oldImageSrc):(this.hideImage(),this.classList.add(this.emptyClass)):this.imageEl.getAttribute("src").length&&(this.imageEl.hidden||this.classList.contains(this.emptyClass))&&this.unhideImage():this.isVideo||this.oldImageSrc.length&&(this.addImgEl(),this.imageEl.setAttribute("src",this.oldImageSrc)),this.oldImageSrc="",this.newImagesrc=""}addImgEl(){let e=document.createElement("img");this.appendChild(e),this.imageEl=e}hideImage(){this.imageEl&&(this.imageEl.hidden=!0),this.classList.add(this.emptyClass),this.defaultImageEl&&this.defaultImageEl.removeAttribute("hidden")}unhideImage(){this.classList.remove(this.emptyClass),this.imageEl&&(this.imageEl.hidden=!1),this.defaultImageEl&&this.defaultImageEl.setAttribute("hidden","hidden")}listenForPubSubEvents(){v.subscribe(y.uploadfile,(e,t)=>{t.uploadField===this.uploadField&&(console.log("MSG",e),e===y.uploadfile_change?this.updateImage(t.url,t.status,t.fileName):e===y.uploadfile_error?this.updateImage(this.cachedImagePath):e===y.uploadfile_delete?this.hideImage():e===y.uploadfile_processing&&(this.isProcessing=!0,this.pollingPath=t.processing_url,this.startPolling()))}),v.subscribe(y.form,(e,t)=>{e===y.form_revert&&this.revertImage()})}cacheExistingImagePath(){this.imageEl&&(this.cachedImagePath=this.imageEl.getAttribute("src"))}startPolling(){this.isProcessing&&(this.pollingInterval=setInterval(()=>{this.pollForCompletion()},this.pollingInterval))}pollForCompletion(){_e.get(this.pollingPath).then(e=>{e.data.status==="complete"&&(clearInterval(this.pollingInterval),this.updateImage(e.data.url),this.isProcessing=!1)})}handleProcessingOnPageLoad(){this.pollingPath&&(this.isProcessing=!0,this.startPolling())}connectedCallback(){super.connectedCallback(),this.imageEl=this.querySelector("img"),this.oldImageSrc="",this.newImageSrc="",this.isVideo&&(this.videoFileNameEl=this.querySelector(this.videoFileNameSelector)),this.defaultImageContainerSelector&&(this.defaultImageEl=document.querySelector(this.defaultImageContainerSelector)),this.listenForPubSubEvents(),this.cacheExistingImagePath(),this.handleProcessingOnPageLoad()}disconnectedCallback(){super.disconnectedCallback(),this.imageEl=null}}customElements.define("exceed-uploaded-image",il);class sl extends D{static get is(){return"exceed-autocomplete-simple"}static get properties(){return{endPoint:{type:String},method:{type:String,value:"POST"},methodNormalised:{type:String,computed:"normaliseMethodString(method)"},isDropdown:{type:Boolean,value:!1},forceAutocompleteValue:{type:Boolean,value:!1},resultsElSelector:{type:String,value:"#autocomplete-results"}}}normaliseMethodString(e){return e=e.toLowerCase(),e!=="get"&&e!=="post"&&(e="post"),e}getResults(e){e=e||1;let t={};t[this.inputEl.name]=this.inputEl.value,this.methodNormalised==="get"&&(t={params:t},t.params.page=e),this.inputEl.value?Te[this.methodNormalised](this.endPoint,t).then(i=>{this.resultsEl.innerHTML="",this.resultsEl.appendChild(document.createRange().createContextualFragment(i.data)),this.bindPaginationEvents()}):this.resultsEl.innerHTML=""}bindKeyEvents(){this.inputEl.addEventListener("keyup",Intellum.util.debounce(()=>{this.getResults(),this.dispatchEvent(new CustomEvent("autocompletesimple.search"))},500))}bindMouseEvents(){this.isDropdown&&document.addEventListener("click",()=>{this.resultsEl.innerHTML=""})}bindPaginationEvents(){if(this.resultsEl&&(this.nextPageEl=this.resultsEl.querySelector('*[data-behaviour="goToNextPage"]'),this.prevPageEl=this.resultsEl.querySelector('*[data-behaviour="goToPrevPage"]')),this.nextPageEl){var e=this.nextPageEl.dataset.nextPageNumber||0;this.nextPageEl.addEventListener("click",Intellum.util.debounce(()=>{this.getResults(e),this.dispatchEvent(new CustomEvent("autocompletesimple.search"))},500))}if(this.prevPageEl){var t=this.prevPageEl.dataset.prevPageNumber||0;this.prevPageEl.addEventListener("click",Intellum.util.debounce(()=>{this.getResults(t),this.dispatchEvent(new CustomEvent("autocompletesimple.search"))},500))}}init(){this.inputEl=this.querySelector("input"),this.resultsEl=this.querySelector(this.resultsElSelector),this.bindKeyEvents(),this.bindPaginationEvents(),this.bindMouseEvents()}connectedCallback(){super.connectedCallback(),this.init()}}customElements.define("exceed-autocomplete-simple",sl);class rl extends D{static get is(){return"exceed-validate-autocomplete"}static get properties(){return{parentDialogId:{type:String,value:""},isFormValid:{type:Boolean,value:!1,observer:"toggleSubmitButton"},editFormId:{type:String,value:"edit-activity-form"},selectedItemIdId:{type:String,value:"add-course-to-topic-id"},autoCompleteSelector:{type:String,value:"exceed-autocomplete-simple"},warningMessageId:{type:String,value:"add-item-warning"},generalErrorMessage:{type:String,value:"Did not select an item"}}}toggleSubmitButton(e){let t=this._submitButtonEl||this.querySelector(`#${this.editFormId} button[type="submit"]`);e?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled")}toggleItemSelectionWarning(e){let t;t||(t=this.querySelector(`#${this.warningMessageId}`)),this._selectedItemIdEl.value||e?t.style.display="none":t.style.display="block"}monitorAutoComplete(){this._autoCompleteEl&&(this._autoCompleteEl.addEventListener("autocompletesimple.search",()=>{this._selectedItemIdEl.value=""}),this._autoCompleteInputEl.addEventListener("blur",()=>{setTimeout(()=>{this.toggleItemSelectionWarning(),this.checkRequiredFields()},500)}))}checkRequiredFields(){let e,t=this._selectedItemIdEl.value;e=Array.from(this._requiredFieldEls).some(i=>!i.value),this.isFormValid=t&&!e}monitorRequiredFields(){this._requiredFieldEls.forEach(e=>{e.addEventListener("keyup",()=>{this.checkRequiredFields()})})}bindEditFormSubmitButton(){this._submitButtonEl.addEventListener("click",e=>{e.preventDefault(),this._submitButtonEl.hasAttribute("disabled")||(this.checkRequiredFields(),this.isFormValid&&this._editFormEl.submit())})}clearForm(){this.toggleItemSelectionWarning(!0),this._editFormEl.querySelectorAll(`[${this.defaultValuesAttribute}]`).forEach(e=>{e.value=e.getAttribute(this.defaultValuesAttribute)})}init(){this._editFormEl=this.querySelector(`#${this.editFormId}`),this._submitButtonEl=this._editFormEl.querySelector('button[type="submit"]'),this._autoCompleteEl=this.querySelector(this.autoCompleteSelector),this._autoCompleteInputEl=this._autoCompleteEl.querySelector("input"),this._selectedItemIdEl=this.querySelector(`#${this.selectedItemIdId}`),this._requiredFieldEls=this.querySelectorAll("input[required]"),this.parentDialogId&&(this._dialogEl=document.getElementById(this.parentDialogId)),this._dialogEl&&this._dialogEl.addEventListener("show.dialog",()=>{this.clearForm(),this.monitorAutoComplete(),this.monitorRequiredFields(),this.bindEditFormSubmitButton()})}connectedCallback(){super.connectedCallback(),this.init()}}customElements.define("exceed-validate-autocomplete",rl);class nl extends D{static get properties(){return{inputElementSelector:{type:String,value:".searchableselect__input"},inputElementActiveClass:{type:String,value:"searchableselect__input--open"},valueInputId:{type:String,value:""},searchEndpoint:{type:String,value:""},createEndpoint:{type:String,value:""},createParamsScope:{type:String,value:""},searchInputSelector:{type:String,value:".searchableselect__search"},contentSelector:{type:String,value:".searchableselect__content"},contentTabbablesSelector:{type:String,value:".searchableselect__tabbablecontent"},searchResultsSelector:{type:String,value:".searchableselect__results"},resultsLoadingClass:{type:String,value:"searchableselect__results--loading"},resultsSelectedClass:{type:String,value:"searchableselect__results--clearable"},searchResultItemSelector:{type:String,value:".searchableselect__resultitem"},searchResultCreateSelector:{type:String,value:".searchableselect__create"},isShowing:{type:Boolean,value:!1,observer:"setContentVisibility"},clearValueSelector:{type:String,value:".searchableselect__clear"},clearValueButtonSelector:{type:String,value:".searchableselect__clearbutton"}}}static get is(){return"exceed-searchable-select"}showFeedback(e,t){!window.Intellum||!Intellum.flashnotice||(t=t||this.approveErrorMessage,e&&this.approveSuccessMessage?Intellum.flashnotice.show(this.approveSuccessMessage):!e&&t&&Intellum.flashnotice.show(t,"warning"))}setContentVisibility(e){if(this._contentEl){let t=this._contentEl.querySelectorAll(this.contentTabbablesSelector);this._contentEl.hidden=!e,e?(t.forEach(i=>{i.removeAttribute("tabindex")}),this._inputEl.setAttribute("aria-expanded","true")):(t.forEach(i=>{i.setAttribute("tabindex","-1")}),this._inputEl.removeAttribute("aria-expanded"))}}clearValueHandler(){this._searchedValue=null,this.setValues(!1),this.closeContent()}toggleClearValueEl(){this._clearValueEl&&(this._valueInputEl.value?(this._clearValueEl.hidden=!1,this._resultsEl.classList.add(this.resultsSelectedClass)):(this._clearValueEl.hidden=!0,this._resultsEl.classList.remove(this.resultsSelectedClass)))}setValues(e){let t={name:"",id:""};e&&(t=e.dataset),this._resultsEl.querySelectorAll("[aria-selected]").forEach(i=>{i.removeAttribute("aria-selected")}),e&&e.setAttribute&&e.setAttribute("aria-selected","true"),this._inputEl&&(this._inputEl.value=t.name),this._valueInputEl&&(this._valueInputEl.value=t.id,this._valueInputEl.dispatchEvent(new Event("input")),this._valueInputEl.dispatchEvent(new Event("searchableselect.input"))),this.toggleClearValueEl()}selectHandler(e){let t=e.target.closest(this.searchResultItemSelector),i=e.target.closest(this.searchResultCreateSelector);if(i){this.createItem(i.dataset.name);return}t&&(this.setValues(t),this.closeContent())}renderResults(e){this._resultsEl.scrollTop=0,this._resultsEl.setAttribute("aria-label",Intellum.i18nStrings.search_results),this._resultsEl.innerHTML=e,this._resultsEl.classList.remove(this.resultsLoadingClass)}getResults(e){_e.get(this.searchEndpoint,{params:{query:e}}).then(t=>{this.renderResults(t.data)})}createItem(e){let t={name:e},i=this.createParamsScope||"";i&&i.size>0&&(t[i]={params:t}),_e.post(this.createEndpoint,t).then(s=>{let n=s.data||{};this.setValues({dataset:{name:n.name,id:n.id}}),this.closeContent(),this.showFeedback(!0,"The item was correctly created")}).catch(s=>{s.response&&s.response.data&&s.response.data.errors?this.showFeedback(!1,s.response.data.errors[0]):this.showFeedback(!1,"There was an error with the creation.")})}handleSearchField(){this._searchInputEl.value!==this._searchedValue&&(this._searchedValue=this._searchInputEl.value,this.getResults(this._searchedValue))}clickAwayHandler(e){!e.target.closest(`#${this.id}`)&&e.target!=this._valueInputEl&&this.closeContent()}closeContent(){this.isShowing&&(this.isShowing=!1,this.reset())}openContent(){this.isShowing=!0,this.init()}toggleContent(){this.isShowing=!this.isShowing,this.isShowing?this.init():this.reset()}init(){this._inputEl.classList.add(this.inputElementActiveClass),this._resultsEl.classList.add(this.resultsLoadingClass),this._searchInputEl.value="",this._contentEl.focus(),this.getResults(),this.toggleClearValueEl(),this._searchInputEl.focus(),v.publish(y.escape_lock)}reset(){this._inputEl.classList.remove(this.inputElementActiveClass),this._resultsEl.innerHTML="",this._resultsEl.classList.add(this.resultsLoadingClass),this._inputEl.focus(),v.publish(y.escape_unlock)}moveFocusDown(e){let t;e.matches(this.contentSelector)?t=this._searchInputEl:e.matches(this.searchInputSelector)?t=this._resultsEl.querySelectorAll("[tabindex]")[0]:t=e.nextElementSibling,t&&t.focus()}moveFocusUp(e){let t=e.previousElementSibling;e.matches(this.searchInputSelector)?this._inputEl.focus():t?t.focus():this._searchInputEl.focus()}handleHomeAndEnd(e){let t=this._resultsEl.querySelectorAll("[tabindex]"),i;if(t.length)e==="home"?i=t[0]:i=t[t.length-1];else return;i&&i.focus()}handleKeyboardEvents(e){e.key==="Escape"?(this.isShowing&&e.stopPropagation(),this._inputEl.focus()):wt.indexOf(e.key)>-1?(e.stopPropagation(),e.preventDefault(),this.moveFocusUp(e.target)):Ct.indexOf(e.key)>-1?(e.stopPropagation(),e.preventDefault(),this.isShowing?this.moveFocusDown(e.target):this.openContent()):e.key==="Enter"?(e.stopPropagation(),e.preventDefault(),this.isShowing?e.target.closest(this.clearValueSelector)?this.clearValueHandler():this.selectHandler(e):this.openContent()):e.key===" "&&!e.target.matches(this.searchInputSelector)?(e.stopPropagation(),e.preventDefault(),this.isShowing||this.openContent()):e.key==="Home"&&e.target.closest(this.searchResultsSelector)?(e.stopPropagation(),e.preventDefault(),this.handleHomeAndEnd("home")):e.key==="End"&&e.target.closest(this.searchResultsSelector)?(e.stopPropagation(),e.preventDefault(),this.handleHomeAndEnd("end")):e.key==="Tab"&&e.target.closest(this.searchResultsSelector)&&this._clearValueButtonEl&&(e.preventDefault(),e.shiftKey?this._searchInputEl.focus():this._clearValueButtonEl.focus())}bindKeyboardAndFocusEvents(){this._boundKeyboardEventHandler=this.handleKeyboardEvents.bind(this),this.addEventListener("keydown",this._boundKeyboardEventHandler),this._focusEventHandler=this.closeContent.bind(this),this._inputEl.addEventListener("focus",this._focusEventHandler)}setupElements(){this._inputEl=this.querySelector(this.inputElementSelector),this._contentEl=this.querySelector(this.contentSelector),this._searchedValue="",this._inputEl&&(this._boundToggleHandler=this.toggleContent.bind(this),this._inputEl.addEventListener("click",this._boundToggleHandler),this._boundClickAwayHandler=this.clickAwayHandler.bind(this),document.addEventListener("click",this._boundClickAwayHandler)),this.valueInputId&&(this._valueInputEl=document.getElementById(this.valueInputId)),this._searchInputEl=this.querySelector(this.searchInputSelector),this._searchInputEl&&(this._boundSearchHandler=Cn(()=>{this.handleSearchField()},500).bind(this),this._searchInputEl.addEventListener("keyup",this._boundSearchHandler)),this._resultsEl=this.querySelector(this.searchResultsSelector),this._resultsEl&&(this._boundSelectHandler=this.selectHandler.bind(this),this._resultsEl.addEventListener("click",this._boundSelectHandler)),this._clearValueEl=this.querySelector(this.clearValueSelector),this._clearValueButtonEl=this.querySelector(this.clearValueButtonSelector),this._clearValueButtonEl&&(this._boundClearValueHandler=this.clearValueHandler.bind(this),this._clearValueButtonEl.addEventListener("click",this._boundClearValueHandler)),this._inputEl&&this._searchInputEl&&this.bindKeyboardAndFocusEvents()}connectedCallback(){super.connectedCallback(),this.searchEndpoint&&this.setupElements()}disconnectedCallback(){super.disconnectedCallback(),this._boundSearchHandler&&this._searchInputEl&&this._searchInputEl.removeEventListener("keyup",this._boundSearchHandler),this._resultsEl&&this._boundSelectHandler&&this._resultsEl.removeEventListener("click",this._boundSelectHandler),this._inputEl&&(this._inputEl.removeEventListener("click",this._boundToggleHandler),document.removeEventListener("click",this._boundClickAwayHandler),this._inputEl.removeEventListener("focus",this._focusEventHandler)),this._boundKeyboardEventHandler&&this.removeEventListener("keydown",this._boundKeyboardEventHandler)}constructor(){super()}}customElements.define("exceed-searchable-select",nl);export{an as E,D as P,v as a,dn as b,pn as c,Cn as d,un as f,sn as g,ul as n,ln as r,Ei as s,nn as t};
//# sourceMappingURL=exceed-searchable-select-BhMu3kYd.js.map
