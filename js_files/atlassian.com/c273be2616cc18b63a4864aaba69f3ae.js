WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-frontend:analytics-support', location = '/includes/js/analytics-support.js' */
define("confluence/analytics-support","jquery ajs confluence/meta window document confluence/api/url".split(" "),function(k,r,m,l,n,g){function t(){if("undefined"===typeof p){var a=k._data(l,"events");p=a&&a.analytics&&0<a.analytics.length}return p}var e=Object.create(null),p;e.setAnalyticsSource=function(a,c){t()&&a.attr("href",function(d,b){d=encodeURIComponent(c);b=g.parseUrl(b);0!==b.size&&b.get("queryParams").set("src",[d]);return g.formatUrl(b)})};e.srcRemovedUrl=function(a){a=g.parseUrl(a);
a.get("queryParams").delete("src");for(var c=Array.from(a.get("queryParams").keys()),d=0;d<c.length;d++){var b=c[d],f=b.split(".");3===f.length&&"src"===f[0]&&a.get("queryParams").delete(b);"jwt"===b&&a.get("queryParams").delete(b)}return g.formatUrl(a)};e.srcParamValues=function(a){return(a=g.parseUrl(a).get("queryParams"))&&a.get("src")?a.get("src"):[]};e.srcAttrParamValues=function(a){a=g.parseUrl(a).get("queryParams");for(var c=Object.create(null),d=Array.from(a.keys()),b=0;b<d.length;b++){var f=
d[b],h=f.split(".");if(3===h.length&&"src"===h[0]){var q=h[1];h=h[2];c[q]=c[q]||Object.create(null);c[q][h]=decodeURIComponent(a.get(f)[0])}}return c};e.extractAnalyticsData=function(a){var c=[],d=e.srcParamValues(a);a=e.srcAttrParamValues(a);for(var b=0;b<d.length;b++){var f=d[b];c.push({src:f,attr:a[f]||{}})}return c};e.publish=function(a,c){r.trigger("analytics",{name:a,data:c||{}})};e.init=function(){var a=e.extractAnalyticsData(n.URL),c={userKey:m.get("remote-user-key"),pageID:m.get("page-id"),
draftID:m.get("draft-id")};if(0<a.length){for(var d=0;d<a.length;d++){var b=a[d],f=k.extend({},c,b.attr);e.publish("confluence.viewpage.src."+b.src,f)}l.history&&l.history.replaceState&&(a=e.srcRemovedUrl(n.URL),n.URL!==a&&l.history.replaceState(null,"",a))}else e.publish("confluence.viewpage.src.empty",c)};return e});require("confluence/module-exporter").exportModuleAsGlobal("confluence/analytics-support","AJS.Confluence.Analytics",function(k){require("ajs").toInit(k.init)});
}catch(e){WRMCB(e)};